import{u as V,r as g,j as e,H as D,L as _}from"./app-BydbXvNR.js";import{A as H}from"./app-layout-JAdefpY2.js";import{B as v}from"./app-logo-icon-_X7DW1Ak.js";import{I as c}from"./input-D0VuUaJ9.js";import{L as i}from"./label-khDChMbA.js";import{S as m,a as h,b as u,c as j,d}from"./select-CFEYMzWh.js";import{C as I,a as P,b as R,c as T}from"./card-D9wtjh1c.js";import"./app-B_WQW7DO.js";import"./index-BqVwD9uT.js";import"./index-BMp7K-bq.js";import"./index-Vh9KUzuR.js";function Y({auth:B,application:r,units:C,cities:N,properties:o,unitsByProperty:x}){const{data:l,setData:a,put:y,processing:f,errors:t}=V({city:r.city,property:r.property,name:r.name,co_signer:r.co_signer,unit:r.unit,status:r.status||"",date:r.date||"",stage_in_progress:r.stage_in_progress||"",notes:r.notes||"",attachment:null}),S=C.find(s=>s.property===r.property&&s.unit_name===r.unit),[n,A]=g.useState(r.city||S?.city||""),[F,b]=g.useState(n&&o[n]?o[n]:[]),[w,p]=g.useState(n&&r.property&&x[n]?.[r.property]?x[n][r.property]:[]),U=s=>{A(s),a("city",s),a("property",""),a("unit",""),s&&o[s]?b(o[s]):b([]),p([])},k=s=>{a("property",s),a("unit",""),n&&s&&x[n]?.[s]?p(x[n][s]):p([])},E=s=>{s.preventDefault(),y(route("applications.update",r.id))},L=[{title:"Applications",href:"/applications"},{title:"Edit",href:"applications/{application}/edit"}];return e.jsxs(H,{breadcrumbs:L,children:[e.jsx(D,{title:`Edit Application - ${r.name}`}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8",children:e.jsxs(I,{children:[e.jsx(P,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(R,{className:"text-2xl",children:["Edit Application - ",r.name]}),e.jsx(_,{href:route("applications.index"),children:e.jsx(v,{variant:"outline",children:"Back to List"})})]})}),e.jsx(T,{children:e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"city",children:"City *"}),e.jsxs(m,{onValueChange:U,value:n,children:[e.jsx(h,{children:e.jsx(u,{placeholder:"Select city"})}),e.jsx(j,{children:N.map(s=>e.jsx(d,{value:s,children:s},s))})]}),t.city&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.city})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"property",children:"Property *"}),e.jsxs(m,{onValueChange:k,value:l.property,disabled:!n,children:[e.jsx(h,{children:e.jsx(u,{placeholder:"Select property"})}),e.jsx(j,{children:F.map(s=>e.jsx(d,{value:s,children:s},s))})]}),t.property&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.property})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"unit",children:"Unit *"}),e.jsxs(m,{onValueChange:s=>a("unit",s),value:l.unit,disabled:!l.property,children:[e.jsx(h,{children:e.jsx(u,{placeholder:"Select unit"})}),e.jsx(j,{children:w.map(s=>e.jsx(d,{value:s,children:s},s))})]}),t.unit&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.unit})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"status",children:"Status *"}),e.jsxs(m,{value:l.status,onValueChange:s=>a("status",s),children:[e.jsx(h,{children:e.jsx(u,{placeholder:"Select status"})}),e.jsxs(j,{children:[e.jsx(d,{value:"New",children:"New"}),e.jsx(d,{value:"Approved",children:"Approved"}),e.jsx(d,{value:"Undecided",children:"Undecided"})]})]}),t.status&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.status})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"name",children:"Name *"}),e.jsx(c,{id:"name",value:l.name,onChange:s=>a("name",s.target.value),error:t.name}),t.name&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.name})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"co_signer",children:"Co-signer *"}),e.jsx(c,{id:"co_signer",value:l.co_signer,onChange:s=>a("co_signer",s.target.value),error:t.co_signer}),t.co_signer&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.co_signer})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"date",children:"Date"}),e.jsx(c,{id:"date",type:"date",value:l.date,onChange:s=>a("date",s.target.value),error:t.date}),t.date&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.date})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"stage_in_progress",children:"Stage in Progress"}),e.jsx(c,{id:"stage_in_progress",value:l.stage_in_progress,onChange:s=>a("stage_in_progress",s.target.value),placeholder:"e.g., Document Review, Background Check, etc.",error:t.stage_in_progress}),t.stage_in_progress&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.stage_in_progress})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"notes",children:"Notes"}),e.jsx("textarea",{id:"notes",value:l.notes,onChange:s=>a("notes",s.target.value),rows:4,placeholder:"Add any additional notes...",className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"}),t.notes&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.notes})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"attachment",children:"Attachment"}),e.jsx(c,{id:"attachment",type:"file",accept:"*",onChange:s=>a("attachment",s.target.files?.[0]||null),className:"cursor-pointer file:cursor-pointer file:border-0 file:bg-transparent file:text-sm file:font-medium"}),t.attachment&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.attachment})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(_,{href:route("applications.index"),children:e.jsx(v,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(v,{type:"submit",disabled:f,children:f?"Updatingâ€¦":"Update Application"})]})]})})]})})})]})}export{Y as default};
