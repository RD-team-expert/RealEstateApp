import{r as o,j as t}from"./app-XlMZG7vD.js";import{B as j}from"./button-D56PIbu9.js";import{I as x}from"./input-nhBJFe9F.js";import{C as y}from"./chevron-down-Dqt3V4Kg.js";import{S as M}from"./search-BKBHV1D6.js";import{X}from"./x-B-P-7DDz.js";import"./app-D9zByHv3.js";import"./index-D09_T-bu.js";import"./index-CdJFUDDL.js";import"./utils-CBfrqCZ4.js";import"./createLucideIcon-BneQKrth.js";function $({cities:b,properties:N,allUnits:S,onSearch:R,onClear:D,initialFilters:a}){const[n,u]=o.useState({city:"",property:"",unit:""}),[I,l]=o.useState(!1),[L,c]=o.useState(!1),[k,i]=o.useState(!1),p=o.useRef(null),d=o.useRef(null),h=o.useRef(null),f=o.useRef(null),m=o.useRef(null),g=o.useRef(null);o.useEffect(()=>{a&&u({city:a.city??"",property:a.property??"",unit:a.unit??""});const e=r=>{p.current&&!p.current.contains(r.target)&&f.current&&!f.current.contains(r.target)&&l(!1),d.current&&!d.current.contains(r.target)&&m.current&&!m.current.contains(r.target)&&c(!1),h.current&&!h.current.contains(r.target)&&g.current&&!g.current.contains(r.target)&&i(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[a]);const s=(e,r)=>{u(T=>({...T,[e]:r}))},P=e=>{s("city",e),l(!1)},U=e=>{const r=e.target.value;s("city",r),l(r.length>0)},E=e=>{const r=e.target.value;s("property",r),c(r.length>0)},F=e=>{s("property",e),c(!1)},z=e=>{const r=e.target.value;s("unit",r),i(r.length>0)},_=e=>{s("unit",e),i(!1)},B=()=>{R({city_id:n.city||null,property_id:n.property||null,unit_id:n.unit||null})},O=()=>{u({city:"",property:"",unit:""}),D()},v=b.filter(e=>e.toLowerCase().includes(n.city.toLowerCase())),w=N.filter(e=>e.toLowerCase().includes(n.property.toLowerCase())),C=S.filter(e=>e.toLowerCase().includes(n.unit.toLowerCase()));return t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(x,{ref:f,type:"text",placeholder:"City",value:n.city,onChange:U,onFocus:()=>l(!0),className:"text-input-foreground bg-input pr-8"}),t.jsx(y,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),I&&v.length>0&&t.jsx("div",{ref:p,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:v.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>P(e),children:e},e))})]}),t.jsxs("div",{className:"relative",children:[t.jsx(x,{ref:m,type:"text",placeholder:"Property",value:n.property,onChange:E,onFocus:()=>c(!0),className:"text-input-foreground bg-input pr-8"}),t.jsx(y,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),L&&w.length>0&&t.jsx("div",{ref:d,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:w.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>F(e),children:e},e))})]}),t.jsxs("div",{className:"relative",children:[t.jsx(x,{ref:g,type:"text",placeholder:"Unit",value:n.unit,onChange:z,onFocus:()=>i(!0),className:"text-input-foreground bg-input pr-8"}),t.jsx(y,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),k&&C.length>0&&t.jsx("div",{ref:h,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:C.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>_(e),children:e},e))})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(j,{onClick:B,variant:"default",className:"flex items-center",children:[t.jsx(M,{className:"mr-2 h-4 w-4"}),"Search"]}),t.jsxs(j,{onClick:O,variant:"outline",className:"flex items-center",children:[t.jsx(X,{className:"mr-2 h-4 w-4"}),"Clear"]})]})]})}export{$ as default};
