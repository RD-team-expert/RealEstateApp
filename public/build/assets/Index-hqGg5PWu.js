import{r as s,u as Ie,b as De,a as v,j as e,H as Le}from"./app-Dn1r5IbR.js";import{B as y}from"./badge-RsTSOVo0.js";import{B as p}from"./button-DoJlCKhy.js";import{C as k,b as _,a as X,c as oe}from"./card-CC5S67z1.js";import{I as Y}from"./input-DJHjvjS7.js";import{L as Ee}from"./label-CyLYjr_a.js";import{T as Te,a as Re,b as re,c as n,d as Fe,e as d}from"./table-Db_Q7fBX.js";import{u as Pe,A as Be}from"./app-layout-DnYRhJak.js";import Ue from"./UnitCreateDrawer-CqaTjeBu.js";import Ae from"./UnitEditDrawer-BLrbJUTw.js";import{D as Ve}from"./download-6aFrEsoc.js";import{U as q,F as te}from"./upload-DeA81b8h.js";import{P as $e}from"./plus-Dipb1hms.js";import{C as se}from"./chevron-down-Bfpn-qjr.js";import{S as ze}from"./search-BFedrvkI.js";import{X as B}from"./x-BwrjvaMS.js";import{S as Oe}from"./square-pen-FxHG6met.js";import{T as Me}from"./trash-2-D4imcYNn.js";import{L as He}from"./loader-circle-Din-CPwl.js";import{C as ne}from"./circle-check-big-BR9Wxftr.js";import{C as ae}from"./circle-alert-tTPA0evf.js";import{C as Ye}from"./circle-x-BMDKmjpB.js";import{f as qe}from"./format-PYUiRpxY.js";import"./app-BmbQfT0_.js";import"./index-DF1-xgR-.js";import"./utils-CBfrqCZ4.js";import"./index-C5yiDUFi.js";import"./index-C_Yr3VBI.js";import"./index-Dc_FVRD7.js";import"./index-cId8iuZu.js";import"./index-WPnjh8bd.js";import"./index-qhuad6ry.js";import"./index-CGaG4LkD.js";import"./index-BHn9DcD9.js";import"./index-BV3nWfAJ.js";import"./index-h5kqUyi-.js";import"./index-IWqIVFcu.js";import"./index-q0Alrdsu.js";import"./createLucideIcon-ezkluWMI.js";import"./collapsible-qDUSHKwG.js";import"./chevron-right-BXKQFlIK.js";import"./index-rczzAiLR.js";import"./log-out-Ct01-_Ob.js";import"./app-logo-icon-BlbTi8ah.js";import"./house-DJeZoJEi.js";import"./building-BqS3fvcq.js";import"./users-DQ0jSc7b.js";import"./wrench-CQBd_7T8.js";import"./credit-card-D5_xJTq0.js";import"./dollar-sign-Ci_GX2V5.js";import"./file-text-goluWCNr.js";import"./triangle-alert-Dv1F3tRV.js";import"./bell-DmBxL8R5.js";import"./popover-CuJpm8qA.js";import"./drawer-BbQvx4Pm.js";import"./select-BPfsX62k.js";import"./index-C0T19-Xq.js";import"./check-CZby3Z4H.js";import"./chevron-up-CyiongBQ.js";import"./radioGroup-Dyu-l9CF.js";import"./calendar-Xujg-VPa.js";const S=(t,m="-")=>{if(!t)return m;const l=/^(\d{4})-(\d{2})-(\d{2})/.exec(t);if(!l)return m;const[,i,u,o]=l,h=new Date(Number(i),Number(u)-1,Number(o));return qe(h,"P")},Xe=(t,m="units.csv")=>{const i=[["ID","City","Property","Unit Name","Tenants","Lease Start","Lease End","Beds","Baths","Lease Status","Monthly Rent","Recurring Transaction","Utility Status","Account Number","Insurance","Insurance Expiration","Vacant","Listed","Applications"].join(","),...t.map(a=>[a.id,`"${a.city}"`,`"${a.property}"`,`"${a.unit_name}"`,`"${a.tenants||""}"`,`"${S(a.lease_start,"")}"`,`"${S(a.lease_end,"")}"`,a.count_beds||"",a.count_baths||"",`"${a.lease_status||""}"`,`"${a.formatted_monthly_rent||""}"`,`"${(a.recurring_transaction||"").replace(/"/g,'""')}"`,`"${(a.utility_status||"").replace(/"/g,'""')}"`,`"${(a.account_number||"").replace(/"/g,'""')}"`,`"${a.insurance||""}"`,`"${S(a.insurance_expiration_date,"")}"`,`"${a.vacant}"`,`"${a.listed}"`,a.total_applications||0].join(","))].join(`
`),u=new Blob([i],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),h=URL.createObjectURL(u);o.setAttribute("href",h),o.setAttribute("download",m),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(h)},Ke=({type:t,message:m,onClose:l,duration:i=4e3})=>{s.useEffect(()=>{const h=setTimeout(()=>{l()},i);return()=>clearTimeout(h)},[l,i]);const u=()=>{switch(t){case"success":return e.jsx(ne,{className:"h-5 w-5 text-green-500"});case"error":return e.jsx(Ye,{className:"h-5 w-5 text-red-500"});case"info":return e.jsx(ae,{className:"h-5 w-5 text-blue-500"});default:return e.jsx(ae,{className:"h-5 w-5 text-blue-500"})}},o=()=>{switch(t){case"success":return"bg-green-50 border-green-200 dark:bg-green-950 dark:border-green-800";case"error":return"bg-red-50 border-red-200 dark:bg-red-950 dark:border-red-800";case"info":return"bg-blue-50 border-blue-200 dark:bg-blue-950 dark:border-blue-800";default:return"bg-blue-50 border-blue-200 dark:bg-blue-950 dark:border-blue-800"}};return e.jsx("div",{className:`fixed top-4 right-4 z-50 max-w-md min-w-80 transform rounded-lg border p-4 shadow-lg transition-all duration-300 ease-in-out ${o()}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[u(),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-medium text-foreground",children:m})}),e.jsx(p,{variant:"ghost",size:"sm",onClick:l,className:"h-6 w-6 p-0 text-muted-foreground hover:text-foreground",children:e.jsx(B,{className:"h-4 w-4"})})]})})},Ge=()=>{const[t,m]=s.useState(null),l=s.useCallback((u,o)=>{m({type:u,message:o})},[]),i=s.useCallback(()=>{m(null)},[]);return{notification:t,showNotification:l,hideNotification:i}},Je=({stats:t,onClose:m})=>t?e.jsxs(k,{className:"mb-6 border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-950/20",children:[e.jsx(X,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-5 w-5 text-green-600"}),e.jsx(oe,{className:"text-lg font-semibold text-green-800 dark:text-green-200",children:"Import Completed Successfully"})]}),e.jsx(p,{onClick:m,variant:"ghost",size:"sm",className:"text-green-600 hover:text-green-800 dark:text-green-400",children:e.jsx(B,{className:"h-4 w-4"})})]})}),e.jsx(_,{children:e.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-4 md:grid-cols-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:t.success_count}),e.jsx("div",{className:"text-sm text-green-600 dark:text-green-400",children:"Success"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:t.error_count}),e.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Errors"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-700 dark:text-orange-300",children:t.skipped_count}),e.jsx("div",{className:"text-sm text-orange-600 dark:text-orange-400",children:"Skipped"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-700 dark:text-purple-300",children:t.total_processed}),e.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400",children:"Total Processed"})]})]})})]}):null,Qe=({isOpen:t,onClose:m,onSubmit:l,isLoading:i})=>{const u=s.useRef(null),[o,h]=s.useState(null),[a,f]=s.useState(!1),b=x=>{x&&x.type==="text/csv"?h(x):alert("Please select a valid CSV file.")},I=x=>{const g=x.target.files?.[0];g&&b(g)},D=x=>{x.preventDefault(),f(!1);const g=x.dataTransfer.files[0];g&&b(g)},L=x=>{x.preventDefault(),o&&l(o)},E=()=>{h(null),f(!1),u.current&&(u.current.value="")},w=()=>{E(),m()};return s.useEffect(()=>{t||E()},[t]),t?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:e.jsxs(k,{className:"w-full max-w-md bg-background",children:[e.jsx(X,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-5 w-5 text-primary"}),e.jsx(oe,{children:"Import Units from CSV"})]}),e.jsx(p,{onClick:w,variant:"ghost",size:"sm",disabled:i,children:e.jsx(B,{className:"h-4 w-4"})})]})}),e.jsx(_,{children:e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ee,{children:"CSV File"}),e.jsxs("div",{className:`rounded-lg border-2 border-dashed p-6 text-center transition-colors ${a?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50"}`,onDrop:D,onDragOver:x=>{x.preventDefault(),f(!0)},onDragLeave:()=>f(!1),children:[o?e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{className:"mx-auto h-8 w-8 text-green-600"}),e.jsx("p",{className:"font-medium text-green-700",children:o.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(o.size/1024).toFixed(1)," KB"]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{className:"mx-auto h-8 w-8 text-muted-foreground"}),e.jsxs("p",{className:"text-muted-foreground",children:["Drop your CSV file here or"," ",e.jsx(p,{type:"button",variant:"link",className:"h-auto p-0 text-primary",onClick:()=>u.current?.click(),children:"browse files"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"CSV files only, max 10MB"})]}),e.jsx("input",{ref:u,type:"file",accept:".csv",onChange:I,className:"hidden",disabled:i})]})]}),e.jsxs("div",{className:"rounded-lg bg-muted/50 p-3",children:[e.jsx("h4",{className:"mb-2 text-sm font-medium",children:"Required CSV Columns"}),e.jsxs("ul",{className:"space-y-1 text-xs text-muted-foreground",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"PropertyName"})," - Name of the property"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"number"})," - Unit number/name"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"BedBath"}),' - Bedroom/bathroom info (e.g., "4 Bed/3.5 Bath")']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Residents"}),' - Tenant names or "VACANT"']}),e.jsxs("li",{children:[e.jsx("strong",{children:"LeaseStartRaw"})," - Lease start date"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"LeaseEndRaw"})," - Lease end date"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"rent"})," - Monthly rent amount"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"recurringCharges"})," - Recurring charges"]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(p,{type:"submit",disabled:!o||i,className:"flex-1",children:i?e.jsxs(e.Fragment,{children:[e.jsx(He,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"Import CSV"]})}),e.jsx(p,{type:"button",variant:"outline",onClick:w,disabled:i,children:"Cancel"})]})]})})]})}):null};function ot({units:t,filters:m,cities:l,properties:i,importStats:u}){const{hasPermission:o,hasAnyPermission:h,hasAllPermissions:a}=Pe(),[,f]=s.useState(m),[b,I]=s.useState(m),[D,L]=s.useState(!1),[E,w]=s.useState(!1),[x,g]=s.useState(!!u),[de,K]=s.useState(!1),[le,G]=s.useState(!1),[J,ie]=s.useState(null),{flash:T}=Ie().props,[R,U]=s.useState(b.city||""),[ce,F]=s.useState(!1),[Q,W]=s.useState([]),A=s.useRef(null),V=s.useRef(null),[Z,$]=s.useState(b.property||""),[me,P]=s.useState(!1),z=s.useRef(null),O=s.useRef(null),{notification:M,showNotification:H,hideNotification:ue}=Ge(),j=De({file:null,skip_duplicates:!0,update_existing:!1});s.useEffect(()=>{if(l)if(R.trim()==="")W(l);else{const r=l.filter(c=>c.city.toLowerCase().includes(R.toLowerCase()));W(r)}},[R,l]);const ee=i?.filter(r=>r.property_name.toLowerCase().includes(Z.toLowerCase()))||[];s.useEffect(()=>{const r=c=>{V.current&&!V.current.contains(c.target)&&A.current&&!A.current.contains(c.target)&&F(!1),O.current&&!O.current.contains(c.target)&&z.current&&!z.current.contains(c.target)&&P(!1)};return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[]);const N=(r,c)=>{I({...b,[r]:c})},xe=r=>{U(r),N("city",r),F(!1)},he=r=>{U(r),N("city",r),F(!0)},pe=r=>{const c=r.target.value;$(c),N("property",c),P(c.length>0)},be=r=>{$(r.property_name),N("property",r.property_name),P(!1)},fe=()=>{f(b);const r={};Object.entries(b).forEach(([c,C])=>{C!=null&&C!==""&&(r[c]=String(C))}),v.get(route("units.index"),r,{preserveState:!0,preserveScroll:!0})},ge=()=>{const r={city:"",property:"",unit_name:"",vacant:"",listed:"",insurance:""};I(r),f(r),U(""),$(""),v.get(route("units.index"),{},{preserveState:!0,preserveScroll:!0})},je=r=>{confirm("Are you sure you want to delete this unit?")&&v.delete(route("units.destroy",r.id))},Ne=r=>{ie(r),G(!0)},ve=()=>{v.reload({only:["units","statistics"]})},ye=()=>{v.reload({only:["units","statistics"]})},we=()=>{if(t.data.length===0){alert("No data to export");return}L(!0);try{const r=`units-${new Date().toISOString().split("T")[0]}.csv`;Xe(t.data,r)}catch(r){console.error("Export failed:",r),alert("Export failed. Please try again.")}finally{L(!1)}},Ce=s.useCallback(r=>{j.setData("file",r),v.post(route("units.import"),{file:r,skip_duplicates:j.data.skip_duplicates,update_existing:j.data.update_existing},{forceFormData:!0,onSuccess:()=>{w(!1),j.reset(),H("success","CSV file imported successfully!")},onError:c=>{const C=c.file||"Failed to import CSV file. Please try again.";H("error",C)},onFinish:()=>{j.clearErrors()}})},[j,H]),Se=r=>r?e.jsx(y,{variant:r==="Yes"?"destructive":"default",children:r}):e.jsx(y,{variant:"outline",children:"-"}),ke=r=>r?e.jsx(y,{variant:r==="Yes"?"default":"secondary",children:r}):e.jsx(y,{variant:"outline",children:"-"}),_e=r=>!r||r==="-"?e.jsx(y,{variant:"outline",children:"N/A"}):e.jsx(y,{variant:r==="Yes"?"default":"destructive",children:r});return e.jsxs(Be,{children:[e.jsx(Le,{title:"Units"}),M&&e.jsx(Ke,{type:M.type,message:M.message,onClose:ue}),e.jsx(Qe,{isOpen:E,onClose:()=>w(!1),onSubmit:Ce,isLoading:j.processing}),e.jsx("div",{className:"min-h-screen bg-background py-12 text-foreground transition-colors",children:e.jsxs("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:[T?.success&&e.jsx(k,{className:"mb-4 border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-950",children:e.jsx(_,{className:"p-4",children:e.jsx("div",{className:"text-green-700 dark:text-green-300",children:T?.success})})}),T?.error&&e.jsx(k,{className:"mb-4 border-red-200 bg-red-50 dark:border-red-800 dark:bg-red-950",children:e.jsx(_,{className:"p-4",children:e.jsx("div",{className:"text-red-700 dark:text-red-300",children:T?.error})})}),x&&u&&e.jsx(Je,{stats:u,onClose:()=>g(!1)}),e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Units List"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(p,{variant:"outline",size:"sm",onClick:we,disabled:D||t.data.length===0,className:"flex items-center",children:[e.jsx(Ve,{className:"mr-2 h-4 w-4"}),D?"Exporting...":"Export CSV"]}),o("units.import")&&e.jsxs(p,{onClick:()=>w(!0),variant:"outline",size:"sm",className:"flex items-center",children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"Import CSV"]}),h(["units.store","units.create"])&&e.jsxs(p,{onClick:()=>K(!0),children:[e.jsx($e,{className:"mr-2 h-4 w-4"}),"Add Unit"]})]})]}),e.jsxs(k,{className:"bg-card text-card-foreground shadow-lg",children:[e.jsx(X,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-7",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Y,{ref:A,type:"text",placeholder:"City",value:R,onChange:r=>he(r.target.value),onFocus:()=>F(!0),className:"text-input-foreground bg-input pr-8"}),e.jsx(se,{className:"absolute right-2 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),ce&&Q.length>0&&e.jsx("div",{ref:V,className:"absolute top-full left-0 right-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:Q.map(r=>e.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>xe(r.city),children:r.city},r.id))})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Y,{ref:z,type:"text",placeholder:"Property",value:Z,onChange:pe,onFocus:()=>P(!0),className:"text-input-foreground bg-input pr-8"}),e.jsx(se,{className:"absolute right-2 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),me&&ee.length>0&&e.jsx("div",{ref:O,className:"absolute top-full left-0 right-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:ee.map(r=>e.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>be(r),children:r.property_name},r.id))})]}),e.jsx(Y,{type:"text",placeholder:"Unit Name",value:b.unit_name||"",onChange:r=>N("unit_name",r.target.value),className:"text-input-foreground bg-input"}),e.jsxs("select",{value:b.vacant||"",onChange:r=>N("vacant",r.target.value),className:"flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:ring-1 focus-visible:ring-ring focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50",children:[e.jsx("option",{value:"",children:"All Vacant Status"}),e.jsx("option",{value:"Yes",children:"Vacant"}),e.jsx("option",{value:"No",children:"Occupied"})]}),e.jsxs("select",{value:b.listed||"",onChange:r=>N("listed",r.target.value),className:"flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:ring-1 focus-visible:ring-ring focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50",children:[e.jsx("option",{value:"",children:"All Listed Status"}),e.jsx("option",{value:"Yes",children:"Listed"}),e.jsx("option",{value:"No",children:"Not Listed"})]}),e.jsxs(p,{onClick:fe,variant:"default",className:"flex items-center",children:[e.jsx(ze,{className:"mr-2 h-4 w-4"}),"Search"]}),e.jsxs(p,{onClick:ge,variant:"outline",className:"flex items-center",children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),"Clear"]})]})}),e.jsxs(_,{children:[e.jsx("div",{className:"relative overflow-x-auto",children:e.jsxs(Te,{className:"border-collapse rounded-md border border-border",children:[e.jsx(Re,{children:e.jsxs(re,{className:"border-border",children:[e.jsx(n,{className:"sticky left-0 z-10 min-w-[120px] border border-border bg-muted text-muted-foreground",children:"City"}),e.jsx(n,{className:"sticky left-[120px] z-10 min-w-[120px] border border-border bg-muted text-muted-foreground",children:"Property"}),e.jsx(n,{className:"sticky left-[240px] z-10 min-w-[120px] border border-border bg-muted text-muted-foreground",children:"Unit Name"}),e.jsx(n,{className:"border border-border bg-muted text-muted-foreground",children:"Tenants"}),e.jsx(n,{className:"border border-border bg-muted text-muted-foreground",children:"Lease Start"}),e.jsx(n,{className:"border border-border bg-muted text-muted-foreground",children:"Lease End"}),e.jsx(n,{className:"border border-border bg-muted text-muted-foreground",children:"Beds"}),e.jsx(n,{className:"border border-border bg-muted text-muted-foreground",children:"Baths"}),e.jsx(n,{className:"border border-border bg-muted text-muted-foreground",children:"Lease Status"}),e.jsx(n,{className:"border border-border bg-muted text-muted-foreground",children:"Monthly Rent"}),e.jsx(n,{className:"border border-border bg-muted text-muted-foreground",children:"Recurring Transaction"}),e.jsx(n,{className:"border border-border bg-muted text-muted-foreground",children:"Utility Status"}),e.jsx(n,{className:"border border-border bg-muted text-muted-foreground",children:"Account Number"}),e.jsx(n,{className:"border border-border bg-muted text-muted-foreground",children:"Insurance"}),e.jsx(n,{className:"border border-border bg-muted text-muted-foreground",children:"Insurance Exp."}),e.jsx(n,{className:"border border-border bg-muted text-muted-foreground",children:"Vacant"}),e.jsx(n,{className:"border border-border bg-muted text-muted-foreground",children:"Listed"}),e.jsx(n,{className:"border border-border bg-muted text-muted-foreground",children:"Applications"}),h(["units.show","units.edit","units.update","units.destroy"])&&e.jsx(n,{className:"border border-border bg-muted text-muted-foreground",children:"Actions"})]})}),e.jsx(Fe,{children:t.data.map(r=>e.jsxs(re,{className:"border-border hover:bg-muted/50",children:[e.jsx(d,{className:"sticky left-0 z-10 min-w-[120px] border border-border bg-muted text-center font-medium text-foreground",children:r.city}),e.jsx(d,{className:"sticky left-[120px] z-10 min-w-[120px] border border-border bg-muted text-center font-medium text-foreground",children:r.property}),e.jsx(d,{className:"sticky left-[240px] z-10 min-w-[120px] border border-border bg-muted text-center font-medium text-foreground",children:r.unit_name}),e.jsx(d,{className:"border border-border text-center text-foreground",children:r.tenants||"-"}),e.jsx(d,{className:"border border-border text-center text-foreground",children:S(r.lease_start)}),e.jsx(d,{className:"border border-border text-center text-foreground",children:S(r.lease_end)}),e.jsx(d,{className:"border border-border text-center text-foreground",children:r.count_beds||"-"}),e.jsx(d,{className:"border border-border text-center text-foreground",children:r.count_baths||"-"}),e.jsx(d,{className:"border border-border text-center text-foreground",children:r.lease_status||"-"}),e.jsx(d,{className:"border border-border text-center text-foreground",children:e.jsx("span",{className:"font-medium",children:r.formatted_monthly_rent})}),e.jsx(d,{className:"border border-border text-center text-foreground",children:e.jsx("div",{className:"max-w-32 truncate",title:r.recurring_transaction||"",children:r.recurring_transaction||"-"})}),e.jsx(d,{className:"border border-border text-center text-foreground",children:e.jsx("div",{className:"max-w-24 truncate",title:r.utility_status||"",children:r.utility_status||"-"})}),e.jsx(d,{className:"border border-border text-center text-foreground",children:e.jsx("div",{className:"max-w-24 truncate",title:r.account_number||"",children:r.account_number||"-"})}),e.jsx(d,{className:"border border-border text-center",children:_e(r.insurance)}),e.jsx(d,{className:"border border-border text-center text-foreground",children:r.insurance_expiration_date?S(r.insurance_expiration_date):"-"}),e.jsx(d,{className:"border border-border text-center",children:Se(r.vacant)}),e.jsx(d,{className:"border border-border text-center",children:ke(r.listed)}),e.jsx(d,{className:"border border-border text-center",children:e.jsx(y,{variant:"secondary",className:"bg-secondary text-secondary-foreground",children:r.total_applications})}),h(["units.show","units.edit","units.update","units.destroy"])&&e.jsx(d,{className:"border border-border text-center",children:e.jsxs("div",{className:"flex gap-1",children:[a(["units.edit","units.update"])&&e.jsx(p,{variant:"outline",size:"sm",onClick:()=>Ne(r),children:e.jsx(Oe,{className:"h-4 w-4"})}),o("units.destroy")&&e.jsx(p,{variant:"outline",size:"sm",onClick:()=>je(r),className:"border-destructive/20 text-destructive hover:bg-destructive/10 hover:text-destructive",children:e.jsx(Me,{className:"h-4 w-4"})})]})})]},r.id))})]})}),t.data.length===0&&e.jsxs("div",{className:"py-8 text-center text-muted-foreground",children:[e.jsx("p",{className:"text-lg",children:"No units found matching your criteria."}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search filters."})]}),t.last_page>1&&e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx("nav",{className:"flex space-x-2",children:t.links.map((r,c)=>e.jsx("button",{onClick:()=>r.url&&v.get(r.url),disabled:!r.url,className:`rounded px-3 py-2 text-sm transition-colors ${r.active?"bg-primary text-primary-foreground":r.url?"bg-secondary text-secondary-foreground hover:bg-secondary/80":"cursor-not-allowed bg-muted text-muted-foreground"}`,dangerouslySetInnerHTML:{__html:r.label}},c))})}),e.jsxs("div",{className:"mt-4 text-center text-sm text-muted-foreground",children:["Showing ",t.from||0," to ",t.to||0," of ",t.total||0," units"]})]})]})]})}),e.jsx(Ue,{open:de,onOpenChange:K,cities:l||[],properties:i||[],onSuccess:ye}),J&&e.jsx(Ae,{unit:J,cities:l||[],properties:i||[],open:le,onOpenChange:G,onSuccess:ve})]})}export{ot as default};
