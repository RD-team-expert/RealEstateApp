import{r as m,b as k,j as r}from"./app-B8ebXpyL.js";import{B as x}from"./button-CPgLtvIU.js";import{D as R,a as P,b as B}from"./drawer-BGYUKi-8.js";import T from"./CityField-JHA7ZdNZ.js";import z from"./VendorNameField-DR7P3k2h.js";import A from"./PhoneNumberField-Ch_5Bngo.js";import I from"./EmailField-6JA9SyAA.js";import W from"./ServiceTypeField-uLXFcZvp.js";import"./app-DzAncQ8Z.js";import"./index-BvTxALZe.js";import"./index-CdJFUDDL.js";import"./utils-CBfrqCZ4.js";import"./index-D1eOqOTZ.js";import"./index-DAWwAdgX.js";import"./index-D-HIh1V3.js";import"./index-D14oVES4.js";import"./index-B1T6AYU9.js";import"./index-Ck7g32ef.js";import"./x-DoFGuxfS.js";import"./createLucideIcon-B4WReUhf.js";import"./label-nhRupGpP.js";import"./select-B8s2DExj.js";import"./index-Dc_FVRD7.js";import"./index-B2KxWlhD.js";import"./index-7ugTB-P5.js";import"./index-Z2oIQlZU.js";import"./index-BCMuVr1f.js";import"./chevron-down-CWVENDnU.js";import"./check-BsIcLAQ3.js";import"./chevron-up-LAfsrV3l.js";import"./input-C70n0jI8.js";import"./plus-WII3wxe5.js";import"./trash-2-CKQv4Lrc.js";function xe({cities:h,open:C,onOpenChange:d,onSuccess:g}){const l=m.useRef(null),c=m.useRef(null),[j,n]=m.useState(""),[_,a]=m.useState(""),[,u]=m.useState(""),{data:t,setData:s,post:E,processing:v,errors:i,reset:b}=k({city_id:"",vendor_name:"",number:[],email:[],service_type:[]}),p=e=>{if(i[e])return i[e];const o=Object.keys(i).find(f=>f.startsWith(`${e}.`));if(o)return i[o]},V=e=>{s("city_id",e);const o=h.find(f=>f.id.toString()===e);u(o?o.city:""),n("")},N=e=>{s("vendor_name",e.target.value),a("")},w=e=>{s("number",e)},S=e=>{s("email",e)},F=e=>{s("service_type",e)},y=e=>{e.preventDefault(),n(""),a("");let o=!1;(!t.city_id||t.city_id.trim()==="")&&(n("Please select a city before submitting the form."),l.current&&(l.current.focus(),l.current.scrollIntoView({behavior:"smooth",block:"center"})),o=!0),(!t.vendor_name||t.vendor_name.trim()==="")&&(a("Please enter a vendor name before submitting the form."),c.current&&(c.current.focus(),c.current.scrollIntoView({behavior:"smooth",block:"center"})),o=!0),!o&&E(route("vendors.store"),{onSuccess:()=>{b(),u(""),n(""),a(""),d(!1),g?.()}})},D=()=>{b(),u(""),n(""),a(""),d(!1)};return r.jsx(R,{open:C,onOpenChange:d,modal:!1,children:r.jsx(P,{size:"half",title:"Create New Vendor",children:r.jsxs("div",{className:"flex h-full flex-col",children:[r.jsx("div",{className:"flex-1 overflow-auto p-6",children:r.jsxs("form",{onSubmit:y,className:"space-y-4",children:[r.jsx(T,{cities:h,value:t.city_id,onChange:V,error:i.city_id,validationError:j,ref:l}),r.jsx(z,{value:t.vendor_name,onChange:N,error:i.vendor_name,validationError:_,ref:c}),r.jsx(A,{value:t.number,onChange:w,error:p("number")}),r.jsx(I,{value:t.email,onChange:S,error:p("email")}),r.jsx(W,{value:t.service_type,onChange:F,error:p("service_type")})]})}),r.jsxs(B,{className:"flex-row justify-end gap-2 border-t bg-muted/50 p-4",children:[r.jsx(x,{type:"button",variant:"outline",onClick:D,children:"Cancel"}),r.jsx(x,{type:"submit",onClick:y,disabled:v,children:v?"Creating...":"Create Vendor"})]})]})})})}export{xe as default};
