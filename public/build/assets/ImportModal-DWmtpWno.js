import{r as l,j as e}from"./app-DIEWn7Ix.js";import{B as n}from"./button-C0qpziZb.js";import{C as w,a as D,c as F,b as T}from"./card-D0lM0cRg.js";import{L as f}from"./label-BIgMUqDa.js";import{F as j}from"./file-spreadsheet-cfLteSY8.js";import{X as V}from"./x-imATtpBe.js";import{U as g}from"./upload-CbKC-Y5O.js";import{L as I}from"./loader-circle-DunDFCHN.js";import"./app-ChTVGdbA.js";import"./index-Bt0zfGgm.js";import"./index-CdJFUDDL.js";import"./utils-CBfrqCZ4.js";import"./index-BtB4-ACe.js";import"./createLucideIcon-lZMskSwP.js";const X=({isOpen:o,onClose:b,onSubmit:N,isLoading:t})=>{const i=l.useRef(null),[r,d]=l.useState(null),[y,c]=l.useState(!1),[m,x]=l.useState(!1),p=s=>{s&&(s.type==="text/csv"||s.name.toLowerCase().endsWith(".csv"))?d(s):alert("Please select a valid CSV file.")},v=s=>{const a=s.target.files?.[0];a&&p(a)},C=s=>{s.preventDefault(),c(!1);const a=s.dataTransfer.files[0];a&&p(a)},S=s=>{s.preventDefault(),r&&N(r,m)},h=()=>{d(null),c(!1),x(!1),i.current&&(i.current.value="")},u=()=>{h(),b()},k=()=>{window.location.href=route("tenants.import.template")};return l.useEffect(()=>{o||h()},[o]),o?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:e.jsxs(w,{className:"w-full max-w-md bg-background",children:[e.jsx(D,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-5 w-5 text-primary"}),e.jsx(F,{children:"Import Tenants from CSV"})]}),e.jsx(n,{onClick:u,variant:"ghost",size:"sm",disabled:t,children:e.jsx(V,{className:"h-4 w-4"})})]})}),e.jsx(T,{children:e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{children:"CSV File"}),e.jsxs("div",{className:`rounded-lg border-2 border-dashed p-6 text-center transition-colors ${y?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50"}`,onDrop:C,onDragOver:s=>{s.preventDefault(),c(!0)},onDragLeave:()=>c(!1),children:[r?e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{className:"mx-auto h-8 w-8 text-green-600"}),e.jsx("p",{className:"font-medium text-green-700",children:r.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(r.size/1024).toFixed(1)," KB"]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{className:"mx-auto h-8 w-8 text-muted-foreground"}),e.jsxs("p",{className:"text-muted-foreground",children:["Drop your CSV file here or"," ",e.jsx(n,{type:"button",variant:"link",className:"h-auto p-0 text-primary",onClick:()=>i.current?.click(),children:"browse files"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"CSV files only, max 10MB"})]}),e.jsx("input",{ref:i,type:"file",accept:".csv",onChange:v,className:"hidden",disabled:t})]})]}),e.jsxs("div",{className:"rounded-lg bg-muted/50 p-3",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Required CSV Columns"}),e.jsx(n,{type:"button",variant:"link",size:"sm",onClick:k,className:"h-auto p-0 text-xs text-primary",children:"Download Template"})]}),e.jsxs("ul",{className:"space-y-1 text-xs text-muted-foreground",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Property name"})," - Name of the property"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Unit number"})," - Unit number/name"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"First name"})," - Tenant's first name"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Last name"})," - Tenant's last name"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Street address line 1"})," - Street address (optional)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Login email"})," - Login email (optional)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Alternate email"})," - Alternate email (optional)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Mobile"})," - Mobile phone (optional)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Emergency phone"})," - Emergency contact (optional)"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"skip-duplicates",type:"checkbox",checked:m,onChange:s=>x(s.target.checked),className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary",disabled:t}),e.jsx(f,{htmlFor:"skip-duplicates",className:"text-sm text-muted-foreground",children:"Skip duplicate tenants"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(n,{type:"submit",disabled:!r||t,className:"flex-1",children:t?e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"mr-2 h-4 w-4"}),"Import CSV"]})}),e.jsx(n,{type:"button",variant:"outline",onClick:u,disabled:t,children:"Cancel"})]})]})})]})}):null};export{X as ImportModal};
