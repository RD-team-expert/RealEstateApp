import{r as o,b as K,a as f,j as e,H as O}from"./app-C79wt3tX.js";import{u as Q,A as V,B as j}from"./app-layout-CQQyJnHK.js";import{B as x}from"./createLucideIcon-C1z_f29J.js";import{I as y}from"./input-BS89LrTW.js";import{L as S}from"./label-CArU7ATR.js";import{C as E,a as T,c as B,b as $}from"./card-AzpDVrLx.js";import{P as A,T as W,a as Y,b as _,c as b,d as Z,e as v,f as ee}from"./table-BkCbQJPV.js";import{B as N}from"./badge-BxLpr-IS.js";import{X as C}from"./index-DkjncacZ.js";import{S as w}from"./search-BTrBOoaV.js";import{S as P}from"./square-pen-C2yNsVP7.js";import{C as se}from"./calendar-DZOiGQZc.js";import{C as F}from"./circle-alert-BzASD5aK.js";import{C as te}from"./circle-x-spimeuTI.js";import{C as ae}from"./circle-check-big-Bq2J0eZh.js";import"./app-Do7cDRzv.js";import"./index-DMpLQi-Z.js";import"./index-CkXl1I8e.js";import"./index-ChhieIKn.js";import"./index-DLJGb8q0.js";import"./chevron-right-CkaRxpST.js";import"./app-logo-icon-CJ6cgBSF.js";import"./file-text-DtifDZmy.js";const re=({type:t,message:d,onClose:l,duration:n=4e3})=>{o.useEffect(()=>{const c=setTimeout(()=>{l()},n);return()=>clearTimeout(c)},[l,n]);const r=()=>{switch(t){case"success":return e.jsx(ae,{className:"h-5 w-5 text-green-500"});case"error":return e.jsx(te,{className:"h-5 w-5 text-red-500"});case"info":return e.jsx(F,{className:"h-5 w-5 text-blue-500"});default:return e.jsx(F,{className:"h-5 w-5 text-blue-500"})}},a=()=>{switch(t){case"success":return"bg-green-50 border-green-200 dark:bg-green-950 dark:border-green-800";case"error":return"bg-red-50 border-red-200 dark:bg-red-950 dark:border-red-800";case"info":return"bg-blue-50 border-blue-200 dark:bg-blue-950 dark:border-blue-800";default:return"bg-blue-50 border-blue-200 dark:bg-blue-950 dark:border-blue-800"}};return e.jsx("div",{className:`fixed top-4 right-4 z-50 min-w-80 max-w-md p-4 rounded-lg border shadow-lg transform transition-all duration-300 ease-in-out ${a()}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[r(),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-medium text-foreground",children:d})}),e.jsx(x,{variant:"ghost",size:"sm",onClick:l,className:"h-6 w-6 p-0 text-muted-foreground hover:text-foreground",children:e.jsx(C,{className:"h-4 w-4"})})]})})},ne=()=>{const[t,d]=o.useState(null),l=o.useCallback((r,a)=>{d({type:r,message:a})},[]),n=o.useCallback(()=>{d(null)},[]);return{notification:t,showNotification:l,hideNotification:n}},le=({notice:t,onSubmit:d,onCancel:l,isLoading:n,errors:r})=>{const[a,c]=o.useState(t?.notice_name||""),[m,u]=o.useState(t?.days?.toString()||""),s=h=>{h.preventDefault(),a.trim()&&m.trim()&&d({notice_name:a.trim(),days:Number(m)})},g=!!t;return e.jsxs(E,{className:"bg-card text-card-foreground shadow-lg border-primary/10",children:[e.jsx(T,{className:"pb-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-5 w-5 text-primary"}),e.jsx(B,{className:"text-xl font-semibold",children:g?`Edit Notice - ${t.notice_name}`:"Add New Notice"})]}),e.jsx(x,{onClick:l,variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground",children:e.jsx(C,{className:"h-4 w-4"})})]})}),e.jsx($,{children:e.jsxs("form",{onSubmit:s,className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(S,{htmlFor:"notice_name",className:"text-sm font-medium",children:["Notice Name ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(y,{id:"notice_name",type:"text",value:a,onChange:h=>c(h.target.value),placeholder:"Enter notice name",className:"transition-colors focus:border-primary",disabled:n,autoComplete:"off"}),r?.notice_name&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:r.notice_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(S,{htmlFor:"days",className:"text-sm font-medium",children:["Days ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(y,{id:"days",type:"number",min:"0",value:m,onChange:h=>u(h.target.value),placeholder:"Enter number of days",className:"transition-colors focus:border-primary",disabled:n,autoComplete:"off"}),r?.days&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:r.days})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(x,{type:"submit",disabled:n||!a.trim()||!m.trim(),className:"flex-1",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-background border-t-transparent"}),g?"Updating...":"Creating..."]}):e.jsx(e.Fragment,{children:g?e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Update Notice"]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Create Notice"]})})}),e.jsx(x,{type:"button",variant:"outline",onClick:l,disabled:n,children:"Cancel"})]})]})})]})},oe=({notices:t,onEdit:d,onDelete:l,canEdit:n,canDelete:r,searchTerm:a})=>{const c=o.useMemo(()=>a?t.filter(s=>s.notice_name.toLowerCase().includes(a.toLowerCase())):t,[t,a]),m=o.useCallback(s=>{window.confirm(`Are you sure you want to archive "${s.notice_name}"? This will hide it from the active notices list but it can be restored later.`)&&l(s.id)},[l]),u=s=>s<=3?e.jsxs(N,{variant:"destructive",children:[s," days"]}):s<=7?e.jsxs(N,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",children:[s," days"]}):e.jsxs(N,{variant:"default",className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",children:[s," days"]});return c.length===0&&a?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(w,{className:"mx-auto h-12 w-12 text-muted-foreground/50"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold text-foreground",children:"No notices found"}),e.jsxs("p",{className:"text-muted-foreground",children:['No notices match your search for "',a,'"']})]}):t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(j,{className:"mx-auto h-12 w-12 text-muted-foreground/50"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold text-foreground",children:"No notices yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Get started by adding your first notice"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-hidden rounded-lg border border-border",children:e.jsxs(W,{children:[e.jsx(Y,{children:e.jsxs(_,{className:"bg-muted/50 hover:bg-muted/50",children:[e.jsx(b,{className:"font-semibold text-foreground",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-4 w-4"}),"Notice Name"]})}),e.jsx(b,{className:"font-semibold text-foreground",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4"}),"Days"]})}),(n||r)&&e.jsx(b,{className:"font-semibold text-foreground w-32",children:"Actions"})]})}),e.jsx(Z,{children:c.map(s=>e.jsxs(_,{className:"hover:bg-muted/30 transition-colors group",children:[e.jsx(v,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-primary/60"}),e.jsx("span",{className:"text-foreground",children:s.notice_name})]})}),e.jsx(v,{children:u(s.days)}),(n||r)&&e.jsx(v,{children:e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[n&&e.jsxs(x,{variant:"ghost",size:"sm",onClick:()=>d(s),className:"text-muted-foreground hover:text-primary hover:bg-primary/10",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsxs("span",{className:"sr-only",children:["Edit ",s.notice_name]})]}),r&&e.jsxs(x,{variant:"ghost",size:"sm",onClick:()=>m(s),className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10",children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsxs("span",{className:"sr-only",children:["Archive ",s.notice_name]})]})]})})]},s.id))})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 text-sm text-muted-foreground border-t border-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{variant:"secondary",className:"font-mono",children:c.length}),e.jsxs("span",{children:[c.length===1?"notice":"notices",a&&` matching "${a}"`]})]}),t.length!==c.length&&e.jsxs("span",{className:"text-xs",children:[t.length," total"]})]})]})},$e=({notices:t,search:d})=>{const[l,n]=o.useState(!1),[r,a]=o.useState(null),[c,m]=o.useState(d||""),{notification:u,showNotification:s,hideNotification:g}=ne(),{processing:h,errors:D}=K({notice_name:"",days:""}),{hasPermission:z,hasAllPermissions:k}=Q(),p=k(["notices.create","notices.store"]),H=k(["notices.edit","notices.update"]),I=z("notices.destroy"),U=i=>{i.preventDefault(),f.get(route("notices.index"),{search:c},{preserveState:!0})},M=o.useCallback(i=>{f.post("/notices",i,{onSuccess:()=>{n(!1),s("success",`Notice "${i.notice_name}" has been created successfully!`)},onError:()=>{s("error","Failed to create notice. Please try again.")}})},[s]),L=o.useCallback(i=>{r&&f.put(`/notices/${r.id}`,i,{onSuccess:()=>{a(null),s("success",`Notice "${i.notice_name}" has been updated successfully!`)},onError:()=>{s("error","Failed to update notice. Please try again.")}})},[r,s]),R=o.useCallback(i=>{a(i),n(!1)},[]),X=o.useCallback(i=>{const G=t.find(J=>J.id===i)?.notice_name||"Unknown";f.delete(`/notices/${i}`,{onSuccess:()=>{s("success",`Notice "${G}" has been archived successfully!`)},onError:()=>{s("error","Failed to archive notice. Please try again.")}})},[t,s]),q=o.useCallback(()=>{n(!1),a(null)},[]);return e.jsxs(V,{children:[e.jsx(O,{title:"Notices"}),u&&e.jsx(re,{type:u.type,message:u.message,onClose:g}),e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[e.jsx(j,{className:"h-8 w-8 text-primary"}),"Notices Management"]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage your notices with different day periods"})]}),p&&e.jsx(x,{onClick:()=>{n(!l),a(null)},variant:l?"outline":"default",size:"lg",className:"shadow-lg",children:l?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Cancel"]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Add Notice"]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[(l||r)&&p&&e.jsx("div",{className:"lg:col-span-4",children:e.jsx(le,{notice:r||void 0,onSubmit:r?L:M,onCancel:q,isLoading:h,errors:D})}),e.jsx("div",{className:`${(l||r)&&p?"lg:col-span-8":"lg:col-span-12"}`,children:e.jsxs(E,{className:"bg-card text-card-foreground shadow-lg",children:[e.jsx(T,{className:"pb-4",children:e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(B,{className:"text-xl font-semibold",children:"Notices Directory"}),t.length>0&&e.jsxs("form",{onSubmit:U,className:"flex gap-2",children:[e.jsxs("div",{className:"relative max-w-sm",children:[e.jsx(w,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(y,{placeholder:"Search notices...",value:c,onChange:i=>m(i.target.value),className:"pl-10 bg-background"})]}),e.jsx(x,{type:"submit",children:e.jsx(w,{className:"h-4 w-4"})})]})]})}),e.jsx($,{children:e.jsx(oe,{notices:t,onEdit:R,onDelete:X,canEdit:H,canDelete:I,searchTerm:c})})]})})]})]})})]})};export{$e as default};
