import{r as P,a as S,j as e,H as V,L as u,b as j}from"./app-BydbXvNR.js";import{u as A,A as E}from"./app-layout-JAdefpY2.js";import{B as m}from"./app-logo-icon-_X7DW1Ak.js";import{I as h}from"./input-D0VuUaJ9.js";import{C as t,c as a,a as N,b}from"./card-D9wtjh1c.js";import{P as H,T as L,a as F,b as y,c as l,d as I,e as d,f as z}from"./table-BEFqGt7n.js";import{E as B}from"./eye-CPs45M0j.js";import{S as O}from"./square-pen-DQ2VcgES.js";import"./app-B_WQW7DO.js";import"./index-BqVwD9uT.js";import"./index-BMp7K-bq.js";function Y({auth:R,vendors:r,statistics:i,filters:w,cities:W}){const[n,C]=P.useState(w),{flash:o}=S().props,{hasPermission:p,hasAnyPermission:g,hasAllPermissions:v}=A(),x=(s,c)=>{const f={...n,[s]:c};C(f),j.get(route("vendors.index"),f,{preserveState:!0,preserveScroll:!0})},T=s=>{confirm("Are you sure you want to delete this vendor?")&&j.delete(route("vendors.destroy",s.id))},_=[{title:"Vendors",href:"/vendors"}];return e.jsxs(E,{breadcrumbs:_,children:[e.jsx(V,{title:"Vendors"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[o?.success&&e.jsx("div",{className:"mb-4 bg-chart-1/20 border border-chart-1 text-chart-1 px-4 py-3 rounded",children:o.success}),o?.error&&e.jsx("div",{className:"mb-4 bg-destructive/20 border border-destructive text-destructive px-4 py-3 rounded",children:o.error}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[e.jsx(t,{children:e.jsxs(a,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Total Vendors"}),e.jsx("p",{className:"text-3xl font-bold text-primary",children:i.total})]})}),e.jsx(t,{children:e.jsxs(a,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"With Email"}),e.jsx("p",{className:"text-3xl font-bold text-chart-1",children:i.with_email})]})}),e.jsx(t,{children:e.jsxs(a,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"With Phone"}),e.jsx("p",{className:"text-3xl font-bold text-chart-2",children:i.with_number})]})}),e.jsx(t,{children:e.jsxs(a,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Cities"}),e.jsx("p",{className:"text-3xl font-bold text-chart-3",children:Object.keys(i.city_counts).length})]})}),e.jsxs(t,{children:[e.jsx(N,{children:e.jsx(b,{className:"text-lg",children:"Vendors by City"})}),e.jsx(a,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:Object.entries(i.city_counts).map(([s,c])=>e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:s}),e.jsx("p",{className:"text-xl font-bold text-primary",children:c})]},s))})})]})]}),e.jsxs(t,{className:"mt-6",children:[e.jsxs(N,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(b,{className:"text-2xl",children:"Vendors List"}),v(["vendors.create","vendors.store"])&&e.jsx(u,{href:route("vendors.create"),children:e.jsxs(m,{children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Add Vendor"]})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(h,{type:"text",placeholder:"City",value:n.city||"",onChange:s=>x("city",s.target.value)}),e.jsx(h,{type:"text",placeholder:"Vendor Name",value:n.vendor_name||"",onChange:s=>x("vendor_name",s.target.value)}),e.jsx(h,{type:"text",placeholder:"Number",value:n.number||"",onChange:s=>x("number",s.target.value)}),e.jsx(h,{type:"email",placeholder:"Email",value:n.email||"",onChange:s=>x("email",s.target.value)})]})})]}),e.jsxs(a,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(L,{children:[e.jsx(F,{children:e.jsxs(y,{children:[e.jsx(l,{children:"City"}),e.jsx(l,{children:"Vendor Name"}),e.jsx(l,{children:"Number"}),e.jsx(l,{children:"Email"}),e.jsx(l,{children:"Service Type"}),g(["vendors.edit","vendors.show","vendors.update","vendors.destroy"])&&e.jsx(l,{children:"Actions"})]})}),e.jsx(I,{children:r.data.map(s=>e.jsxs(y,{className:"hover:bg-muted/50",children:[e.jsx(d,{className:"font-medium",children:s.city}),e.jsx(d,{children:s.vendor_name}),e.jsx(d,{children:s.number||"-"}),e.jsx(d,{children:s.email?e.jsx("a",{href:`mailto:${s.email}`,className:"text-primary hover:text-primary/80",children:s.email}):"-"}),e.jsx(d,{children:s.service_type}),g(["vendors.edit","vendors.show","vendors.update","vendors.destroy"])&&e.jsx(d,{children:e.jsxs("div",{className:"flex gap-1",children:[p("vendors.show")&&e.jsx(u,{href:route("vendors.show",s.id),children:e.jsx(m,{variant:"outline",size:"sm",children:e.jsx(B,{className:"h-4 w-4"})})}),v(["vendors.edit","vendors.update"])&&e.jsx(u,{href:route("vendors.edit",s.id),children:e.jsx(m,{variant:"outline",size:"sm",children:e.jsx(O,{className:"h-4 w-4"})})}),p("vendors.destroy")&&e.jsx(m,{variant:"outline",size:"sm",onClick:()=>T(s),className:"text-destructive hover:text-destructive hover:bg-destructive/10",children:e.jsx(z,{className:"h-4 w-4"})})]})})]},s.id))})]})}),r.data.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx("p",{className:"text-lg",children:"No vendors found."}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search filters."})]}),r.last_page>1&&e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx("nav",{className:"flex space-x-2",children:r.links.map((s,c)=>e.jsx("button",{onClick:()=>s.url&&j.get(s.url),disabled:!s.url,className:`px-3 py-2 text-sm rounded ${s.active?"bg-primary text-primary-foreground":s.url?"bg-muted text-foreground hover:bg-accent":"bg-muted text-muted-foreground cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:s.label}},c))})}),e.jsxs("div",{className:"mt-4 text-sm text-muted-foreground text-center",children:["Showing ",r.from||0," to ",r.to||0," of ",r.total||0," vendors"]})]})]})]})})]})}export{Y as default};
