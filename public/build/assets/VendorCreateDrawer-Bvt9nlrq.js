import{r as d,b as A,j as r}from"./app-XlMZG7vD.js";import{B as E}from"./button-D56PIbu9.js";import{D as I,a as L,b as Q}from"./drawer-B7-2XtV2.js";import U from"./CityField-s911rzI5.js";import W from"./VendorNameField-BqBgA9SY.js";import $ from"./PhoneNumberField-CGKRunkW.js";import G from"./EmailField-BmOmWaOj.js";import H from"./ServiceTypeField-CqrC9klJ.js";import"./app-D9zByHv3.js";import"./index-D09_T-bu.js";import"./index-CdJFUDDL.js";import"./utils-CBfrqCZ4.js";import"./index-CUT4GDty.js";import"./index-C_K36Fy_.js";import"./index-BoN4SSkO.js";import"./index-pZGqFUGS.js";import"./index-DqP218B8.js";import"./index-D2DcuX69.js";import"./x-B-P-7DDz.js";import"./createLucideIcon-BneQKrth.js";import"./label-BKN3erGN.js";import"./popover-DR8Y8CsW.js";import"./index-CTF06pqo.js";import"./command-DGwO2Uw9.js";import"./search-BKBHV1D6.js";import"./input-nhBJFe9F.js";import"./plus-Brzm8xdb.js";import"./trash-2-CisDGbUX.js";import"./select-C9mJLkAA.js";import"./index-Dc_FVRD7.js";import"./index-D8BBDizX.js";import"./index-DPt0Oyfm.js";import"./index-DdpYxxi8.js";import"./chevron-down-Dqt3V4Kg.js";import"./check-ZO7ekD6P.js";import"./chevron-up-COk4jH4h.js";function Fe({cities:g,open:w,onOpenChange:h,onSuccess:S}){const p=d.useRef(null),u=d.useRef(null),[V,n]=d.useState(""),[N,a]=d.useState(""),[,v]=d.useState(""),{data:t,setData:s,post:F,processing:x,errors:i,reset:C,transform:D}=A({city_id:"",vendor_name:"",number:[],email:[],service_type:[]}),y=e=>{if(i[e])return i[e];const o=Object.keys(i).find(m=>m.startsWith(`${e}.`));if(o)return i[o]},R=e=>{s("city_id",e);const o=g.find(m=>m.id.toString()===e);v(o?o.city:""),n("")},k=e=>{s("vendor_name",e.target.value),a("")},P=e=>{s("number",e)},B=e=>{s("email",e)},T=e=>{s("service_type",e)},j=e=>{e.preventDefault(),n(""),a("");let o=!1;if((!t.city_id||t.city_id.trim()==="")&&(n("Please select a city before submitting the form."),p.current&&(p.current.focus(),p.current.scrollIntoView({behavior:"smooth",block:"center"})),o=!0),(!t.vendor_name||t.vendor_name.trim()==="")&&(a("Please enter a vendor name before submitting the form."),u.current&&(u.current.focus(),u.current.scrollIntoView({behavior:"smooth",block:"center"})),o=!0),o)return;const m=()=>{try{const _=new URLSearchParams(window.location.search),f=["city","city_id","vendor_name","number","email","per_page","page"],l={};return f.forEach(b=>{const c=_.get(b);c!==null&&(l[b]=c)}),l}catch{return{}}};D(_=>{const f=m(),l={};return[["city","filter_city"],["city_id","filter_city_id"],["vendor_name","filter_vendor_name"],["number","filter_number"],["email","filter_email"],["per_page","filter_per_page"],["page","filter_page"]].forEach(([c,z])=>{f[c]!==void 0&&(l[z]=f[c])}),{..._,...l}}),F(route("vendors.store"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{C(),v(""),n(""),a(""),h(!1),S?.()}})},q=()=>{C(),v(""),n(""),a(""),h(!1)};return r.jsx(I,{open:w,onOpenChange:h,modal:!1,children:r.jsx(L,{size:"half",title:"Create New Vendor",children:r.jsxs("div",{className:"flex h-full flex-col",children:[r.jsx("div",{className:"flex-1 overflow-auto p-6",children:r.jsxs("form",{onSubmit:j,className:"space-y-4",children:[r.jsx(U,{cities:g,value:t.city_id,onChange:R,error:i.city_id,validationError:V,ref:p}),r.jsx(W,{value:t.vendor_name,onChange:k,error:i.vendor_name,validationError:N,ref:u}),r.jsx($,{value:t.number,onChange:P,error:y("number")}),r.jsx(G,{value:t.email,onChange:B,error:y("email")}),r.jsx(H,{value:t.service_type,onChange:T,error:y("service_type")})]})}),r.jsxs(Q,{className:"flex-row justify-end gap-2 border-t bg-muted/50 p-4",children:[r.jsx(E,{type:"button",variant:"outline",onClick:q,children:"Cancel"}),r.jsx(E,{type:"submit",onClick:j,disabled:x,children:x?"Creating...":"Create Vendor"})]})]})})})}export{Fe as default};
