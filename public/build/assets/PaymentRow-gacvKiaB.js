import{j as r}from"./app-DYme-6ST.js";import{b as f,e as o}from"./table-NBJhLnC1.js";import{f as N}from"./format-PYUiRpxY.js";import h from"./PaymentActions-CjUTrsst.js";import j from"./StatusBadge-CvZeRimA.js";import g from"./PermanentBadge-Cw9ZIGkR.js";const m=(t,c="-")=>{if(!t)return c;const s=/^(\d{4})-(\d{2})-(\d{2})/.exec(t);if(!s)return c;const[,n,i,b]=s,l=new Date(Number(n),Number(i)-1,Number(b));return N(l,"P")},$=(t,c="payments.csv")=>{try{const s=e=>e==null||isNaN(e)?"0.00":Number(e).toFixed(2),n=e=>e==null?"":String(e).replace(/"/g,'""'),i=e=>{if(!e)return"";try{return m(e,"")}catch{return e||""}},l=[["ID","Date","City","Property Name","Unit Name","Owes","Paid","Left to Pay","Status","Notes","Reversed Payments","Permanent","Has Assistance","Assistance Amount","Assistance Company"].join(","),...t.map(e=>{try{return[e.id||"",`"${i(e.date)}"`,`"${n(e.city)}"`,`"${n(e.property_name)}"`,`"${n(e.unit_name)}"`,s(e.owes),s(e.paid),s(e.left_to_pay),`"${n(e.status)}"`,`"${n(e.notes)}"`,`"${n(e.reversed_payments)}"`,`"${n(e.permanent)}"`,e.has_assistance?"Yes":"No",s(e.assistance_amount),`"${n(e.assistance_company)}"`].join(",")}catch(u){return console.error("Error processing payment row:",e,u),""}}).filter(e=>e!=="")].join(`
`),a=new Blob([l],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),x=URL.createObjectURL(a);return d.setAttribute("href",x),d.setAttribute("download",c),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(x),!0}catch(s){throw console.error("CSV Export Error:",s),s}};function _({payment:t,onEdit:c,onDelete:s,onHide:n,showActions:i,hasPermission:b,hasAllPermissions:l}){const a=d=>d==null||isNaN(d)?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(d);return r.jsxs(f,{className:"border-border hover:bg-muted/50",children:[r.jsx(o,{className:"sticky left-0 z-10 min-w-[120px] border border-border bg-card text-center font-medium text-foreground",children:t.city}),r.jsx(o,{className:"sticky left-[120px] z-10 min-w-[120px] border border-border bg-card text-center font-medium text-foreground",children:t.property_name||"N/A"}),r.jsx(o,{className:"sticky left-[240px] z-10 min-w-[120px] border border-border bg-card text-center font-medium text-foreground",children:t.unit_name}),r.jsx(o,{className:"border border-border text-center text-foreground",children:m(t.date)}),r.jsx(o,{className:"border border-border text-center font-medium text-red-600 dark:text-red-400",children:a(t.owes)}),r.jsx(o,{className:"border border-border text-center text-green-600 dark:text-green-400",children:a(t.paid)}),r.jsx(o,{className:"border border-border text-center font-medium text-blue-600 dark:text-blue-400",children:a(t.left_to_pay)}),r.jsx(o,{className:"border border-border text-center",children:r.jsx(j,{status:t.status})}),r.jsx(o,{className:"border border-border text-center text-foreground max-w-32 truncate",children:t.notes}),r.jsx(o,{className:"border border-border text-center text-foreground max-w-32 truncate",children:t.reversed_payments}),r.jsx(o,{className:"border border-border text-center",children:r.jsx(g,{permanent:t.permanent})}),r.jsx(o,{className:"border border-border text-center",children:t.has_assistance?r.jsxs("div",{className:"text-sm",children:[r.jsx("div",{className:"font-medium text-foreground",children:a(t.assistance_amount)}),r.jsx("div",{className:"text-xs text-muted-foreground",children:t.assistance_company||"N/A"})]}):r.jsx("span",{className:"text-muted-foreground",children:"-"})}),i&&r.jsx(o,{className:"border border-border text-center",children:r.jsx(h,{payment:t,onEdit:c,onDelete:s,onHide:n,hasPermission:b,hasAllPermissions:l})})]})}const C=Object.freeze(Object.defineProperty({__proto__:null,default:_},Symbol.toStringTag,{value:"Module"}));export{_ as P,C as a,$ as e};
