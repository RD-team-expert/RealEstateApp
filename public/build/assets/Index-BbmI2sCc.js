import{r as n,b as I,a as p,j as e,H as L}from"./app-CCzuXckj.js";import{u as R,A as X}from"./app-layout-BoNLLPeQ.js";import{B as m}from"./button-CMWBItP5.js";import{I as y}from"./input-Du17bKS3.js";import{L as G}from"./label-B-O3f5QY.js";import{C as v,a as w,c as C,b as k}from"./card-DRu8D1Tp.js";import{T as U,a as Y,b as g,c as j,d as _,e as b}from"./table-CeO9TH2o.js";import{B as q}from"./badge-bEJK_mFj.js";import{A as J,a as K}from"./alert-C9J30XRM.js";import{B as S}from"./building-2-D0YL9mr9.js";import{X as h}from"./x-DYjqv_U5.js";import{P as A}from"./plus-DQ_VxF2F.js";import{S as F}from"./search-CdnXWL7g.js";import{C as u}from"./circle-alert-DQoyP2A2.js";import{M as N}from"./map-pin-C8zSU97z.js";import{T as O}from"./trash-2-qsChcdJa.js";import{C as Q}from"./circle-x-BnQv1gqI.js";import{C as V}from"./circle-check-big-COPLr0mv.js";import"./app-BmbQfT0_.js";import"./index-ChB7U0Zf.js";import"./utils-CBfrqCZ4.js";import"./index-agTCOONj.js";import"./index-Dc_FVRD7.js";import"./index-DyliiUy6.js";import"./index-CqHfpVA2.js";import"./index-DvwIsXwg.js";import"./index-Dt7h0l9k.js";import"./index-DODHwusq.js";import"./index-wJbuxyvX.js";import"./index-DTxO9eYn.js";import"./index-vq7VqFSt.js";import"./index-5SWgZ8xG.js";import"./index-BNwgaesP.js";import"./createLucideIcon-C69XpSIN.js";import"./collapsible-CcNV7e-r.js";import"./chevron-right-C8wvZ16F.js";import"./index-D6OiOCOB.js";import"./log-out-nz5FjWG9.js";import"./app-logo-icon-atlGpzJG.js";import"./house-CQx8K8A-.js";import"./building-BN0Wz64N.js";import"./users-DybgbioK.js";import"./wrench-Cuo6Tfe4.js";import"./credit-card-sJP7HDaK.js";import"./dollar-sign-N6h4oYi4.js";import"./file-text-DuBeEt6Y.js";import"./triangle-alert-DpTJsPz5.js";import"./bell-BsA6WElf.js";const W=({type:t,message:i,onClose:a,duration:r=4e3})=>{n.useEffect(()=>{const s=setTimeout(()=>{a()},r);return()=>clearTimeout(s)},[a,r]);const o=()=>{switch(t){case"success":return e.jsx(V,{className:"h-5 w-5 text-green-500"});case"error":return e.jsx(Q,{className:"h-5 w-5 text-red-500"});case"info":return e.jsx(u,{className:"h-5 w-5 text-blue-500"});default:return e.jsx(u,{className:"h-5 w-5 text-blue-500"})}},l=()=>{switch(t){case"success":return"bg-green-50 border-green-200 dark:bg-green-950 dark:border-green-800";case"error":return"bg-red-50 border-red-200 dark:bg-red-950 dark:border-red-800";case"info":return"bg-blue-50 border-blue-200 dark:bg-blue-950 dark:border-blue-800";default:return"bg-blue-50 border-blue-200 dark:bg-blue-950 dark:border-blue-800"}};return e.jsx("div",{className:`fixed top-4 right-4 z-50 min-w-80 max-w-md p-4 rounded-lg border shadow-lg transform transition-all duration-300 ease-in-out ${l()}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[o(),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-medium text-foreground",children:i})}),e.jsx(m,{variant:"ghost",size:"sm",onClick:a,className:"h-6 w-6 p-0 text-muted-foreground hover:text-foreground",children:e.jsx(h,{className:"h-4 w-4"})})]})})},Z=()=>{const[t,i]=n.useState(null),a=n.useCallback((o,l)=>{i({type:o,message:l})},[]),r=n.useCallback(()=>{i(null)},[]);return{notification:t,showNotification:a,hideNotification:r}},ee=({onSubmit:t,onCancel:i,isLoading:a,error:r})=>{const[o,l]=n.useState(""),s=c=>{c.preventDefault(),o.trim()&&(t(o.trim()),l(""))};return e.jsxs(v,{className:"bg-card text-card-foreground shadow-lg border-primary/10",children:[e.jsx(w,{className:"pb-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5 text-primary"}),e.jsx(C,{className:"text-xl font-semibold",children:"Add New City"})]}),e.jsx(m,{onClick:i,variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground",children:e.jsx(h,{className:"h-4 w-4"})})]})}),e.jsxs(k,{children:[r&&e.jsxs(J,{className:"mb-4 text-destructive",children:[e.jsx(u,{className:"h-4 w-4"}),e.jsx(K,{className:"text-destructive",children:r})]}),e.jsxs("form",{onSubmit:s,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(G,{htmlFor:"city",className:"text-sm font-medium",children:["City Name ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(y,{id:"city",type:"text",value:o,onChange:c=>l(c.target.value),placeholder:"Enter city name (e.g., New York, London)",className:"transition-colors focus:border-primary",disabled:a,autoComplete:"off"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(m,{type:"submit",disabled:a||!o.trim(),className:"flex-1",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-background border-t-transparent"}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Add City"]})}),e.jsx(m,{type:"button",variant:"outline",onClick:i,disabled:a,children:"Cancel"})]})]})]})]})},se=({cities:t,onDelete:i,canDelete:a,searchTerm:r})=>{const o=n.useMemo(()=>r?t.filter(s=>s.city.toLowerCase().includes(r.toLowerCase())):t,[t,r]),l=n.useCallback((s,c)=>{window.confirm(`Are you sure you want to delete "${c}"? This action cannot be undone.`)&&i(s)},[i]);return o.length===0&&r?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(F,{className:"mx-auto h-12 w-12 text-muted-foreground/50"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold text-foreground",children:"No cities found"}),e.jsxs("p",{className:"text-muted-foreground",children:['No cities match your search for "',r,'"']})]}):t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(N,{className:"mx-auto h-12 w-12 text-muted-foreground/50"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold text-foreground",children:"No cities yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Get started by adding your first city"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-hidden rounded-lg border border-border",children:e.jsxs(U,{children:[e.jsx(Y,{children:e.jsxs(g,{className:"bg-muted/50 hover:bg-muted/50",children:[e.jsx(j,{className:"font-semibold text-foreground",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-4 w-4"}),"City Name"]})}),a&&e.jsx(j,{className:"font-semibold text-foreground w-24",children:"Actions"})]})}),e.jsx(_,{children:o.map(s=>e.jsxs(g,{className:"hover:bg-muted/30 transition-colors group",children:[e.jsx(b,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-primary/60"}),e.jsx("span",{className:"text-foreground",children:s.city})]})}),a&&e.jsx(b,{children:e.jsxs(m,{variant:"ghost",size:"sm",onClick:()=>l(s.id,s.city),className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(O,{className:"h-4 w-4"}),e.jsxs("span",{className:"sr-only",children:["Delete ",s.city]})]})})]},s.id))})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 text-sm text-muted-foreground border-t border-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{variant:"secondary",className:"font-mono",children:o.length}),e.jsxs("span",{children:[o.length===1?"city":"cities",r&&` matching "${r}"`]})]}),t.length!==o.length&&e.jsxs("span",{className:"text-xs",children:[t.length," total"]})]})]})},Ve=({cities:t})=>{const[i,a]=n.useState(!1),[r,o]=n.useState(""),{notification:l,showNotification:s,hideNotification:c}=Z(),{processing:T,errors:B,reset:f}=I({city:""}),{hasPermission:D,hasAllPermissions:P}=R(),x=P(["cities.store","cities.create"]),$=D("cities.destroy"),E=n.useCallback(d=>{p.post("/cities",{city:d},{onSuccess:()=>{f(),a(!1),s("success",`City "${d}" has been added successfully!`)},onError:()=>{s("error","Failed to add city. Please try again.")}})},[f,s]),M=n.useCallback(d=>{const z=t.find(H=>H.id===d)?.city||"Unknown";p.delete(`/cities/${d}`,{onSuccess:()=>{s("success",`City "${z}" has been deleted successfully!`)},onError:()=>{s("error","Failed to delete city. Please try again.")}})},[t,s]);return e.jsxs(X,{children:[e.jsx(L,{title:"Cities Management"}),l&&e.jsx(W,{type:l.type,message:l.message,onClose:c}),e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[e.jsx(S,{className:"h-8 w-8 text-primary"}),"Cities Management"]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage your cities database with ease"})]}),x&&e.jsx(m,{onClick:()=>a(!i),variant:i?"outline":"default",size:"lg",className:"shadow-lg",children:i?e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Cancel"]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Add City"]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[i&&x&&e.jsx("div",{className:"lg:col-span-4",children:e.jsx(ee,{onSubmit:E,onCancel:()=>a(!1),isLoading:T,error:B.city})}),e.jsx("div",{className:`${i&&x?"lg:col-span-8":"lg:col-span-12"}`,children:e.jsxs(v,{className:"bg-card text-card-foreground shadow-lg",children:[e.jsx(w,{className:"pb-4",children:e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(C,{className:"text-xl font-semibold",children:"Cities Directory"}),t.length>0&&e.jsxs("div",{className:"relative max-w-sm",children:[e.jsx(F,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(y,{placeholder:"Search cities...",value:r,onChange:d=>o(d.target.value),className:"pl-10 bg-background"})]})]})}),e.jsx(k,{children:e.jsx(se,{cities:t,onDelete:M,canDelete:$,searchTerm:r})})]})})]})]})})]})};export{Ve as default};
