import{u as E,r as p,j as e,H as V,L as b}from"./app-CPAFZdg5.js";import{A as D}from"./app-layout-BwaCDFuy.js";import{B as v}from"./app-logo-icon-DTHiVsgC.js";import{I as c}from"./input-BoejqtSG.js";import{L as l}from"./label-MD4WtZ4A.js";import{S as m,a as h,b as u,c as j,d}from"./select-DGHkX8Ag.js";import{C as H,a as I,b as P,c as R}from"./card-DG8dAfP6.js";import"./app-fgSBv9O3.js";import"./index-B7VlAMgv.js";import"./index-CbLkonV9.js";import"./index-B-ib2Fvb.js";function X({auth:T,application:r,units:C,cities:N,properties:o,unitsByProperty:x}){const{data:i,setData:a,put:y,processing:f,errors:t}=E({city:r.city,property:r.property,name:r.name,co_signer:r.co_signer,unit:r.unit,status:r.status||"",date:r.date||"",stage_in_progress:r.stage_in_progress||"",notes:r.notes||"",attachment:null}),S=C.find(s=>s.property===r.property&&s.unit_name===r.unit),[n,A]=p.useState(r.city||S?.city||""),[F,_]=p.useState(n&&o[n]?o[n]:[]),[w,g]=p.useState(n&&r.property&&x[n]?.[r.property]?x[n][r.property]:[]),U=s=>{A(s),a("city",s),a("property",""),a("unit",""),s&&o[s]?_(o[s]):_([]),g([])},k=s=>{a("property",s),a("unit",""),n&&s&&x[n]?.[s]?g(x[n][s]):g([])},L=s=>{s.preventDefault(),y(route("applications.update",r.id))};return e.jsxs(D,{children:[e.jsx(V,{title:`Edit Application - ${r.name}`}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8",children:e.jsxs(H,{children:[e.jsx(I,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(P,{className:"text-2xl",children:["Edit Application - ",r.name]}),e.jsx(b,{href:route("applications.index"),children:e.jsx(v,{variant:"outline",children:"Back to List"})})]})}),e.jsx(R,{children:e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"city",children:"City *"}),e.jsxs(m,{onValueChange:U,value:n,children:[e.jsx(h,{children:e.jsx(u,{placeholder:"Select city"})}),e.jsx(j,{children:N.map(s=>e.jsx(d,{value:s,children:s},s))})]}),t.city&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.city})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"property",children:"Property *"}),e.jsxs(m,{onValueChange:k,value:i.property,disabled:!n,children:[e.jsx(h,{children:e.jsx(u,{placeholder:"Select property"})}),e.jsx(j,{children:F.map(s=>e.jsx(d,{value:s,children:s},s))})]}),t.property&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.property})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"unit",children:"Unit *"}),e.jsxs(m,{onValueChange:s=>a("unit",s),value:i.unit,disabled:!i.property,children:[e.jsx(h,{children:e.jsx(u,{placeholder:"Select unit"})}),e.jsx(j,{children:w.map(s=>e.jsx(d,{value:s,children:s},s))})]}),t.unit&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.unit})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"status",children:"Status *"}),e.jsxs(m,{value:i.status,onValueChange:s=>a("status",s),children:[e.jsx(h,{children:e.jsx(u,{placeholder:"Select status"})}),e.jsxs(j,{children:[e.jsx(d,{value:"New",children:"New"}),e.jsx(d,{value:"Approved",children:"Approved"}),e.jsx(d,{value:"Undecided",children:"Undecided"})]})]}),t.status&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.status})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"name",children:"Name *"}),e.jsx(c,{id:"name",value:i.name,onChange:s=>a("name",s.target.value),error:t.name}),t.name&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.name})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"co_signer",children:"Co-signer *"}),e.jsx(c,{id:"co_signer",value:i.co_signer,onChange:s=>a("co_signer",s.target.value),error:t.co_signer}),t.co_signer&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.co_signer})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"date",children:"Date"}),e.jsx(c,{id:"date",type:"date",value:i.date,onChange:s=>a("date",s.target.value),error:t.date}),t.date&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.date})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"stage_in_progress",children:"Stage in Progress"}),e.jsx(c,{id:"stage_in_progress",value:i.stage_in_progress,onChange:s=>a("stage_in_progress",s.target.value),placeholder:"e.g., Document Review, Background Check, etc.",error:t.stage_in_progress}),t.stage_in_progress&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.stage_in_progress})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"notes",children:"Notes"}),e.jsx("textarea",{id:"notes",value:i.notes,onChange:s=>a("notes",s.target.value),rows:4,placeholder:"Add any additional notes...",className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"}),t.notes&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.notes})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"attachment",children:"Attachment"}),e.jsx(c,{id:"attachment",type:"file",accept:"*",onChange:s=>a("attachment",s.target.files?.[0]||null),className:"cursor-pointer file:cursor-pointer file:border-0 file:bg-transparent file:text-sm file:font-medium"}),t.attachment&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.attachment})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(b,{href:route("applications.index"),children:e.jsx(v,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(v,{type:"submit",disabled:f,children:f?"Updatingâ€¦":"Update Application"})]})]})})]})})})]})}export{X as default};
