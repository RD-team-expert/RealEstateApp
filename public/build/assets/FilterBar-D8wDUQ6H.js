import{r as o,j as t}from"./app-BSOlzI_M.js";import{B as j}from"./button-D2rKFPK1.js";import{I as l}from"./input-DWv8_Yxn.js";import{C as v}from"./chevron-down--Oeingn_.js";import{S as T}from"./search-BcNZ_u8M.js";import{X}from"./x-V2a7Zg3Q.js";import"./app-D9zByHv3.js";import"./index-ByB7CnZO.js";import"./index-CdJFUDDL.js";import"./utils-CBfrqCZ4.js";import"./createLucideIcon-BGWKpKjb.js";function te({cities:b,properties:N,units:S,onSearch:R,onClear:_,initialFilters:s}){const[n,u]=o.useState({city:"",property:"",unit:"",name:"",applicant_applied_from:""});o.useEffect(()=>{s&&u({city:s.city||"",property:s.property||"",unit:s.unit||"",name:s.name||"",applicant_applied_from:s.applicant_applied_from||""})},[s]);const[D,c]=o.useState(!1),[I,p]=o.useState(!1),[L,i]=o.useState(!1),d=o.useRef(null),m=o.useRef(null),f=o.useRef(null),h=o.useRef(null),g=o.useRef(null),x=o.useRef(null);o.useEffect(()=>{const e=r=>{d.current&&!d.current.contains(r.target)&&h.current&&!h.current.contains(r.target)&&c(!1),m.current&&!m.current.contains(r.target)&&g.current&&!g.current.contains(r.target)&&p(!1),f.current&&!f.current.contains(r.target)&&x.current&&!x.current.contains(r.target)&&i(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const a=(e,r)=>{u(A=>({...A,[e]:r}))},P=e=>{a("city",e.name),c(!1)},U=e=>{const r=e.target.value;a("city",r),c(r.length>0)},k=e=>{a("property",e.name),p(!1)},E=e=>{const r=e.target.value;a("property",r),p(r.length>0)},z=e=>{a("unit",e.name),i(!1)},B=e=>{const r=e.target.value;a("unit",r),i(r.length>0)},F=()=>{R(n)},O=()=>{u({city:"",property:"",unit:"",name:"",applicant_applied_from:""}),_()},y=Object.values(N).flat().filter(e=>e.name.toLowerCase().includes(n.property.toLowerCase())),w=Object.values(S).flat().filter(e=>e.name.toLowerCase().includes(n.unit.toLowerCase())),C=b.filter(e=>e.name.toLowerCase().includes(n.city.toLowerCase()));return t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-6",children:[t.jsxs("div",{className:"relative",children:[t.jsx(l,{ref:h,type:"text",placeholder:"City",value:n.city,onChange:U,onFocus:()=>c(!0),className:"text-input-foreground bg-input pr-8"}),t.jsx(v,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),D&&C.length>0&&t.jsx("div",{ref:d,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:C.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>P(e),children:e.name},e.id))})]}),t.jsxs("div",{className:"relative",children:[t.jsx(l,{ref:g,type:"text",placeholder:"Property",value:n.property,onChange:E,onFocus:()=>p(!0),className:"text-input-foreground bg-input pr-8"}),t.jsx(v,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),I&&y.length>0&&t.jsx("div",{ref:m,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:y.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>k(e),children:e.name},e.id))})]}),t.jsxs("div",{className:"relative",children:[t.jsx(l,{ref:x,type:"text",placeholder:"Unit",value:n.unit,onChange:B,onFocus:()=>i(!0),className:"text-input-foreground bg-input pr-8"}),t.jsx(v,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),L&&w.length>0&&t.jsx("div",{ref:f,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:w.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>z(e),children:e.name},e.id))})]}),t.jsx(l,{type:"text",placeholder:"Application Name",value:n.name,onChange:e=>a("name",e.target.value),className:"text-input-foreground bg-input"}),t.jsx(l,{type:"text",placeholder:"Applied From",value:n.applicant_applied_from,onChange:e=>a("applicant_applied_from",e.target.value),className:"text-input-foreground bg-input"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(j,{onClick:F,variant:"default",className:"flex items-center",children:[t.jsx(T,{className:"mr-2 h-4 w-4"}),"Search"]}),t.jsxs(j,{onClick:O,variant:"outline",className:"flex items-center",children:[t.jsx(X,{className:"mr-2 h-4 w-4"}),"Clear"]})]})]})}export{te as default};
