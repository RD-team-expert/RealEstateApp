import{u as E,r as p,j as e,H as V,L as b}from"./app-Cx8kZDp9.js";import{A as D}from"./app-layout-D--nS_sj.js";import{B as v}from"./app-logo-icon-DUx6zicL.js";import{I as x}from"./input-s06yV59d.js";import{L as i}from"./label-sl8qH8W7.js";import{S as m,a as h,b as u,c as j,d as l}from"./select-DZHzKdDj.js";import{C as H,a as I,b as P,c as R}from"./card-BYHDYmtC.js";/* empty css            */import"./index-B50YeaP0.js";import"./index-MDR33JSo.js";import"./index-CwTV956i.js";function X({auth:T,application:r,units:C,cities:y,properties:c,unitsByProperty:o}){const{data:d,setData:a,put:N,processing:f,errors:t}=E({city:r.city,property:r.property,name:r.name,co_signer:r.co_signer,unit:r.unit,status:r.status||"",date:r.date||"",stage_in_progress:r.stage_in_progress||"",notes:r.notes||""}),S=C.find(s=>s.property===r.property&&s.unit_name===r.unit),[n,A]=p.useState(r.city||S?.city||""),[F,_]=p.useState(n&&c[n]?c[n]:[]),[w,g]=p.useState(n&&r.property&&o[n]?.[r.property]?o[n][r.property]:[]),U=s=>{A(s),a("city",s),a("property",""),a("unit",""),s&&c[s]?_(c[s]):_([]),g([])},k=s=>{a("property",s),a("unit",""),n&&s&&o[n]?.[s]?g(o[n][s]):g([])},L=s=>{s.preventDefault(),N(route("applications.update",r.id))};return e.jsxs(D,{children:[e.jsx(V,{title:`Edit Application - ${r.name}`}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8",children:e.jsxs(H,{children:[e.jsx(I,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(P,{className:"text-2xl",children:["Edit Application - ",r.name]}),e.jsx(b,{href:route("applications.index"),children:e.jsx(v,{variant:"outline",children:"Back to List"})})]})}),e.jsx(R,{children:e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"city",children:"City *"}),e.jsxs(m,{onValueChange:U,value:n,children:[e.jsx(h,{children:e.jsx(u,{placeholder:"Select city"})}),e.jsx(j,{children:y.map(s=>e.jsx(l,{value:s,children:s},s))})]}),t.city&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.city})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"property",children:"Property *"}),e.jsxs(m,{onValueChange:k,value:d.property,disabled:!n,children:[e.jsx(h,{children:e.jsx(u,{placeholder:"Select property"})}),e.jsx(j,{children:F.map(s=>e.jsx(l,{value:s,children:s},s))})]}),t.property&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.property})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"unit",children:"Unit *"}),e.jsxs(m,{onValueChange:s=>a("unit",s),value:d.unit,disabled:!d.property,children:[e.jsx(h,{children:e.jsx(u,{placeholder:"Select unit"})}),e.jsx(j,{children:w.map(s=>e.jsx(l,{value:s,children:s},s))})]}),t.unit&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.unit})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"status",children:"Status *"}),e.jsxs(m,{value:d.status,onValueChange:s=>a("status",s),children:[e.jsx(h,{children:e.jsx(u,{placeholder:"Select status"})}),e.jsxs(j,{children:[e.jsx(l,{value:"New",children:"New"}),e.jsx(l,{value:"Approved",children:"Approved"}),e.jsx(l,{value:"Undecided",children:"Undecided"})]})]}),t.status&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.status})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"name",children:"Name *"}),e.jsx(x,{id:"name",value:d.name,onChange:s=>a("name",s.target.value),error:t.name}),t.name&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.name})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"co_signer",children:"Co-signer *"}),e.jsx(x,{id:"co_signer",value:d.co_signer,onChange:s=>a("co_signer",s.target.value),error:t.co_signer}),t.co_signer&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.co_signer})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"date",children:"Date"}),e.jsx(x,{id:"date",type:"date",value:d.date,onChange:s=>a("date",s.target.value),error:t.date}),t.date&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.date})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"stage_in_progress",children:"Stage in Progress"}),e.jsx(x,{id:"stage_in_progress",value:d.stage_in_progress,onChange:s=>a("stage_in_progress",s.target.value),placeholder:"e.g., Document Review, Background Check, etc.",error:t.stage_in_progress}),t.stage_in_progress&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.stage_in_progress})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"notes",children:"Notes"}),e.jsx("textarea",{id:"notes",value:d.notes,onChange:s=>a("notes",s.target.value),rows:4,placeholder:"Add any additional notes...",className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"}),t.notes&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.notes})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(b,{href:route("applications.index"),children:e.jsx(v,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(v,{type:"submit",disabled:f,children:f?"Updatingâ€¦":"Update Application"})]})]})})]})})})]})}export{X as default};
