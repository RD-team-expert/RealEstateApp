import{r as o,b as ie,j as e}from"./app-nUSYw4ai.js";import{B as _}from"./createLucideIcon-C5GD6QeA.js";import{P as f,a as x,p as d,b as h,C as p}from"./popover-CMnBhXYh.js";import{D as le,a as ne,b as de}from"./drawer-ikeMES7v.js";import{L as l}from"./label-DtPmPEai.js";import{R as g}from"./radioGroup-BdD1VW6H.js";import{S as I,a as R,b as O,c as E,d as Y}from"./select-PjIVfLW0.js";import{C as v}from"./calendar-C-0kt65W.js";import{f as r}from"./format-PYUiRpxY.js";import"./app-oDNfBSri.js";import"./chevron-right-uK37_yne.js";import"./chevron-up-BHOYq5G1.js";import"./index-nh9QAngE.js";import"./index-CedKduyQ.js";import"./index-5YpAK82Y.js";import"./index-UYkM-lg7.js";import"./index-DbaH1TRh.js";import"./index-DGbRjXgX.js";import"./index-BKS2-tOY.js";import"./index-mn3Hv6wy.js";function Pe({cities:H,properties:K,unitsByProperty:P,open:q,onOpenChange:F,onSuccess:B}){const N=o.useRef(null),M=o.useRef(null),C=o.useRef(null),[A,c]=o.useState(""),[z,S]=o.useState(""),[$,j]=o.useState(""),[J,w]=o.useState([]),[Q,D]=o.useState([]),[b,L]=o.useState(""),[y,k]=o.useState(""),[u,W]=o.useState({lease_signing_date:!1,move_in_date:!1,scheduled_paid_time:!1,move_in_form_sent_date:!1,date_of_move_in_form_filled:!1,date_of_insurance_expiration:!1}),n=(s,m)=>{W(V=>({...V,[s]:m}))},{data:t,setData:i,post:X,processing:U,errors:a,reset:Z}=ie({unit_id:"",signed_lease:"No",lease_signing_date:"",move_in_date:"",paid_security_deposit_first_month_rent:"No",scheduled_paid_time:"",handled_keys:"No",move_in_form_sent_date:"",filled_move_in_form:"No",date_of_move_in_form_filled:"",submitted_insurance:"No",date_of_insurance_expiration:""}),T=()=>{Z(),c(""),S(""),j(""),w([]),D([]),L(""),k("")},ee=s=>{if(L(s),k(""),i("unit_id",""),S(""),j(""),c(""),s){const m=K.filter(V=>V.city_id?.toString()===s);D(m)}else D([]);w([])},se=s=>{k(s),i("unit_id",""),j(""),c(""),s&&P&&P[s]?w(P[s]):w([])},te=s=>{i("unit_id",parseInt(s)),c("")},G=s=>{s.preventDefault(),c(""),S(""),j("");let m=!1;(!b||b.trim()==="")&&(S("Please select a city before submitting the form."),M.current&&(M.current.focus(),M.current.scrollIntoView({behavior:"smooth",block:"center"})),m=!0),(!y||y.trim()==="")&&(j("Please select a property before submitting the form."),C.current&&(C.current.focus(),C.current.scrollIntoView({behavior:"smooth",block:"center"})),m=!0),(!t.unit_id||typeof t.unit_id=="number"&&t.unit_id<=0)&&(c("Please select a unit before submitting the form."),N.current&&(N.current.focus(),N.current.scrollIntoView({behavior:"smooth",block:"center"})),m=!0),!m&&X(route("move-in.store"),{onSuccess:()=>{T(),F(!1),B?.()}})},ae=()=>{T(),F(!1)};return e.jsx(le,{open:q,onOpenChange:F,modal:!1,children:e.jsx(ne,{size:"half",title:"Create New Move-In Record",children:e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsx("div",{className:"flex-1 overflow-auto p-6",children:e.jsxs("form",{onSubmit:G,className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border-l-4 border-l-slate-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(l,{htmlFor:"city_id",className:"text-base font-semibold",children:"City *"})}),e.jsxs(I,{onValueChange:ee,value:b,children:[e.jsx(R,{ref:M,children:e.jsx(O,{placeholder:"Select city"})}),e.jsx(E,{children:H.map(s=>e.jsx(Y,{value:s.id.toString(),children:s.city},s.id))})]}),a.unit_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:"Please select a valid unit."}),z&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:z})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-gray-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(l,{htmlFor:"property_id",className:"text-base font-semibold",children:"Property *"})}),e.jsxs(I,{onValueChange:se,value:y,disabled:!b,children:[e.jsx(R,{ref:C,children:e.jsx(O,{placeholder:b?"Select property":"Select city first"})}),e.jsx(E,{children:Q.map(s=>e.jsx(Y,{value:s.id.toString(),children:s.property_name},s.id))})]}),$&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:$})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-blue-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(l,{htmlFor:"unit_id",className:"text-base font-semibold",children:"Unit Name *"})}),e.jsxs(I,{onValueChange:te,value:t.unit_id?t.unit_id.toString():"",disabled:!y,children:[e.jsx(R,{ref:N,children:e.jsx(O,{placeholder:y?"Select unit":"Select property first"})}),e.jsx(E,{children:J.map(s=>e.jsx(Y,{value:s.id.toString(),children:s.unit_name},s.id))})]}),a.unit_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.unit_id}),A&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:A})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-green-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(l,{htmlFor:"signed_lease",className:"text-base font-semibold",children:"Signed Lease *"})}),e.jsx(g,{value:t.signed_lease,onValueChange:s=>i("signed_lease",s),name:"signed_lease",options:[{value:"No",label:"No"},{value:"Yes",label:"Yes"}]}),a.signed_lease&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.signed_lease})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-purple-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(l,{htmlFor:"lease_signing_date",className:"text-base font-semibold",children:"Lease Signing Date"})}),e.jsxs(f,{open:u.lease_signing_date,onOpenChange:s=>n("lease_signing_date",s),modal:!1,children:[e.jsx(x,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:`w-full justify-start text-left font-normal ${!t.lease_signing_date&&"text-muted-foreground"}`,children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),t.lease_signing_date?r(d(t.lease_signing_date,"yyyy-MM-dd",new Date),"PPP"):"Pick a date"]})}),e.jsx(h,{className:"z-[60] w-auto p-0",onOpenAutoFocus:s=>s.preventDefault(),children:e.jsx(p,{mode:"single",selected:t.lease_signing_date?d(t.lease_signing_date,"yyyy-MM-dd",new Date):void 0,onSelect:s=>{s&&(i("lease_signing_date",r(s,"yyyy-MM-dd")),n("lease_signing_date",!1))},initialFocus:!0})})]}),a.lease_signing_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.lease_signing_date})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-orange-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(l,{htmlFor:"move_in_date",className:"text-base font-semibold",children:"Move-In Date"})}),e.jsxs(f,{open:u.move_in_date,onOpenChange:s=>n("move_in_date",s),modal:!1,children:[e.jsx(x,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:`w-full justify-start text-left font-normal ${!t.move_in_date&&"text-muted-foreground"}`,children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),t.move_in_date?r(d(t.move_in_date,"yyyy-MM-dd",new Date),"PPP"):"Pick a date"]})}),e.jsx(h,{className:"z-[60] w-auto p-0",onOpenAutoFocus:s=>s.preventDefault(),children:e.jsx(p,{mode:"single",selected:t.move_in_date?d(t.move_in_date,"yyyy-MM-dd",new Date):void 0,onSelect:s=>{s&&(i("move_in_date",r(s,"yyyy-MM-dd")),n("move_in_date",!1))},initialFocus:!0})})]}),a.move_in_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.move_in_date})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-emerald-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(l,{htmlFor:"paid_security_deposit_first_month_rent",className:"text-base font-semibold",children:"Paid Security Deposit & First Month Rent"})}),e.jsx(g,{value:t.paid_security_deposit_first_month_rent,onValueChange:s=>i("paid_security_deposit_first_month_rent",s),name:"paid_security_deposit_first_month_rent",options:[{value:"No",label:"No"},{value:"Yes",label:"Yes"}]}),a.paid_security_deposit_first_month_rent&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.paid_security_deposit_first_month_rent})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-teal-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(l,{htmlFor:"scheduled_paid_time",className:"text-base font-semibold",children:"Scheduled Paid Time"})}),e.jsxs(f,{open:u.scheduled_paid_time,onOpenChange:s=>n("scheduled_paid_time",s),modal:!1,children:[e.jsx(x,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:`w-full justify-start text-left font-normal ${!t.scheduled_paid_time&&"text-muted-foreground"}`,children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),t.scheduled_paid_time?r(d(t.scheduled_paid_time,"yyyy-MM-dd",new Date),"PPP"):"Pick a date"]})}),e.jsx(h,{className:"z-[60] w-auto p-0",onOpenAutoFocus:s=>s.preventDefault(),children:e.jsx(p,{mode:"single",selected:t.scheduled_paid_time?d(t.scheduled_paid_time,"yyyy-MM-dd",new Date):void 0,onSelect:s=>{s&&(i("scheduled_paid_time",r(s,"yyyy-MM-dd")),n("scheduled_paid_time",!1))},initialFocus:!0})})]}),a.scheduled_paid_time&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.scheduled_paid_time})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-indigo-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(l,{htmlFor:"handled_keys",className:"text-base font-semibold",children:"Handled Keys"})}),e.jsx(g,{value:t.handled_keys,onValueChange:s=>i("handled_keys",s),name:"handled_keys",options:[{value:"No",label:"No"},{value:"Yes",label:"Yes"}]}),a.handled_keys&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.handled_keys})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-pink-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(l,{htmlFor:"move_in_form_sent_date",className:"text-base font-semibold",children:"Move-In Form Sent Date"})}),e.jsxs(f,{open:u.move_in_form_sent_date,onOpenChange:s=>n("move_in_form_sent_date",s),modal:!1,children:[e.jsx(x,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:`w-full justify-start text-left font-normal ${!t.move_in_form_sent_date&&"text-muted-foreground"}`,children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),t.move_in_form_sent_date?r(d(t.move_in_form_sent_date,"yyyy-MM-dd",new Date),"PPP"):"Pick a date"]})}),e.jsx(h,{className:"z-[60] w-auto p-0",onOpenAutoFocus:s=>s.preventDefault(),children:e.jsx(p,{mode:"single",selected:t.move_in_form_sent_date?d(t.move_in_form_sent_date,"yyyy-MM-dd",new Date):void 0,onSelect:s=>{s&&(i("move_in_form_sent_date",r(s,"yyyy-MM-dd")),n("move_in_form_sent_date",!1))},initialFocus:!0})})]}),a.move_in_form_sent_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.move_in_form_sent_date})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-red-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(l,{htmlFor:"filled_move_in_form",className:"text-base font-semibold",children:"Filled Move-In Form"})}),e.jsx(g,{value:t.filled_move_in_form,onValueChange:s=>i("filled_move_in_form",s),name:"filled_move_in_form",options:[{value:"No",label:"No"},{value:"Yes",label:"Yes"}]}),a.filled_move_in_form&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.filled_move_in_form})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-yellow-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(l,{htmlFor:"date_of_move_in_form_filled",className:"text-base font-semibold",children:"Date of Move-In Form Filled"})}),e.jsxs(f,{open:u.date_of_move_in_form_filled,onOpenChange:s=>n("date_of_move_in_form_filled",s),modal:!1,children:[e.jsx(x,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:`w-full justify-start text-left font-normal ${!t.date_of_move_in_form_filled&&"text-muted-foreground"}`,children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),t.date_of_move_in_form_filled?r(d(t.date_of_move_in_form_filled,"yyyy-MM-dd",new Date),"PPP"):"Pick a date"]})}),e.jsx(h,{className:"z-[60] w-auto p-0",onOpenAutoFocus:s=>s.preventDefault(),children:e.jsx(p,{mode:"single",selected:t.date_of_move_in_form_filled?d(t.date_of_move_in_form_filled,"yyyy-MM-dd",new Date):void 0,onSelect:s=>{s&&(i("date_of_move_in_form_filled",r(s,"yyyy-MM-dd")),n("date_of_move_in_form_filled",!1))},initialFocus:!0})})]}),a.date_of_move_in_form_filled&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.date_of_move_in_form_filled})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-cyan-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(l,{htmlFor:"submitted_insurance",className:"text-base font-semibold",children:"Submitted Insurance"})}),e.jsx(g,{value:t.submitted_insurance,onValueChange:s=>i("submitted_insurance",s),name:"submitted_insurance",options:[{value:"No",label:"No"},{value:"Yes",label:"Yes"}]}),a.submitted_insurance&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.submitted_insurance})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-violet-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(l,{htmlFor:"date_of_insurance_expiration",className:"text-base font-semibold",children:"Date of Insurance Expiration"})}),e.jsxs(f,{open:u.date_of_insurance_expiration,onOpenChange:s=>n("date_of_insurance_expiration",s),modal:!1,children:[e.jsx(x,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:`w-full justify-start text-left font-normal ${!t.date_of_insurance_expiration&&"text-muted-foreground"}`,children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),t.date_of_insurance_expiration?r(d(t.date_of_insurance_expiration,"yyyy-MM-dd",new Date),"PPP"):"Pick a date"]})}),e.jsx(h,{className:"z-[60] w-auto p-0",onOpenAutoFocus:s=>s.preventDefault(),children:e.jsx(p,{mode:"single",selected:t.date_of_insurance_expiration?d(t.date_of_insurance_expiration,"yyyy-MM-dd",new Date):void 0,onSelect:s=>{s&&(i("date_of_insurance_expiration",r(s,"yyyy-MM-dd")),n("date_of_insurance_expiration",!1))},initialFocus:!0})})]}),a.date_of_insurance_expiration&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.date_of_insurance_expiration})]})]})}),e.jsx(de,{children:e.jsxs("div",{className:"flex w-full justify-end gap-2",children:[e.jsx(_,{type:"button",variant:"outline",onClick:ae,children:"Cancel"}),e.jsx(_,{type:"submit",disabled:U,onClick:G,children:U?"Creating...":"Create Move-In Record"})]})})]})})})}export{Pe as default};
