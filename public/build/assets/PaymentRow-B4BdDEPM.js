import{j as r}from"./app-IncGAUEB.js";import{b as f,e as o}from"./table-DyrYtZnv.js";import{f as N}from"./format-PYUiRpxY.js";import h from"./PaymentActions-BKx6UjrQ.js";import g from"./StatusBadge-8-oFYHOc.js";import j from"./PermanentBadge-BdX_X4NW.js";const m=(t,a="-")=>{if(!t)return a;const s=/^(\d{4})-(\d{2})-(\d{2})/.exec(t);if(!s)return a;const[,n,i,l]=s,x=new Date(Number(n),Number(i)-1,Number(l));return N(x,"P")},$=(t,a="payments.csv")=>{try{const s=e=>e==null||isNaN(e)?"0.00":Number(e).toFixed(2),n=e=>e==null?"":String(e).replace(/"/g,'""'),i=e=>{if(!e)return"";try{return m(e,"")}catch{return e||""}},x=[["ID","Date","City","Property Name","Unit Name","Owes","Paid","Left to Pay","Status","Notes","Reversed Payments","Permanent","Has Assistance","Assistance Amount","Assistance Company"].join(","),...t.map(e=>{try{return[e.id||"",`"${i(e.date)}"`,`"${n(e.city)}"`,`"${n(e.property_name)}"`,`"${n(e.unit_name)}"`,s(e.owes),s(e.paid),s(e.left_to_pay),`"${n(e.status)}"`,`"${n(e.notes)}"`,`"${n(e.reversed_payments)}"`,`"${n(e.permanent)}"`,e.has_assistance?"Yes":"No",s(e.assistance_amount),`"${n(e.assistance_company)}"`].join(",")}catch(u){return console.error("Error processing payment row:",e,u),""}}).filter(e=>e!=="")].join(`
`),b=new Blob([x],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),c=URL.createObjectURL(b);return d.setAttribute("href",c),d.setAttribute("download",a),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(c),!0}catch(s){throw console.error("CSV Export Error:",s),s}};function _({payment:t,onEdit:a,onDelete:s,onHide:n,onUnhide:i,showActions:l,hasPermission:x,hasAllPermissions:b,filters:d}){const c=e=>e==null||isNaN(e)?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e);return r.jsxs(f,{className:"border-border hover:bg-muted/50",children:[r.jsx(o,{className:"sticky left-0 z-10 min-w-[120px] border border-border bg-card text-center font-medium text-foreground",children:t.city}),r.jsx(o,{className:"sticky left-[120px] z-10 min-w-[120px] border border-border bg-card text-center font-medium text-foreground",children:t.property_name||"N/A"}),r.jsx(o,{className:"sticky left-[240px] z-10 min-w-[120px] border border-border bg-card text-center font-medium text-foreground",children:t.unit_name}),r.jsx(o,{className:"border border-border text-center text-foreground",children:m(t.date)}),r.jsx(o,{className:"border border-border text-center font-medium text-red-600 dark:text-red-400",children:c(t.owes)}),r.jsx(o,{className:"border border-border text-center text-green-600 dark:text-green-400",children:c(t.paid)}),r.jsx(o,{className:"border border-border text-center font-medium text-blue-600 dark:text-blue-400",children:c(t.left_to_pay)}),r.jsx(o,{className:"border border-border text-center",children:r.jsx(g,{status:t.status})}),r.jsx(o,{className:"border border-border text-center text-foreground max-w-32 truncate",children:t.notes}),r.jsx(o,{className:"border border-border text-center text-foreground max-w-32 truncate",children:t.reversed_payments}),r.jsx(o,{className:"border border-border text-center",children:r.jsx(j,{permanent:t.permanent})}),r.jsx(o,{className:"border border-border text-center text-foreground",children:t.has_assistance?r.jsx("span",{className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300 px-2 py-1 rounded text-sm font-medium",children:"Yes"}):r.jsx("span",{className:"text-muted-foreground text-sm",children:"No"})}),r.jsx(o,{className:"border border-border text-center text-foreground",children:t.assistance_amount&&t.has_assistance?c(t.assistance_amount):r.jsx("span",{className:"text-muted-foreground",children:"-"})}),r.jsx(o,{className:"border border-border text-center text-foreground max-w-32 truncate",children:t.assistance_company||r.jsx("span",{className:"text-muted-foreground",children:"-"})}),l&&r.jsx(o,{className:"border border-border text-center",children:r.jsx(h,{payment:t,onEdit:a,onDelete:s,onHide:n,onUnhide:i,hasPermission:x,hasAllPermissions:b,filters:d})})]})}const A=Object.freeze(Object.defineProperty({__proto__:null,default:_},Symbol.toStringTag,{value:"Module"}));export{_ as P,A as a,$ as e};
