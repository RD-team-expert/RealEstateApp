import{r as o,b as ie,j as e}from"./app-CHDKARjb.js";import{B as _}from"./button-DVMLQ4Cf.js";import{P as f,a as x,p as r,b as h,C as p}from"./popover-CqkGk1d9.js";import{D as le,a as ne,b as re}from"./drawer-DBQSSrTa.js";import{L as l}from"./label-DcQ_-sMZ.js";import{R as g}from"./radioGroup-DeMlaPSu.js";import{S as I,a as R,b as O,c as E,d as Y}from"./select-DSkJK3rS.js";import{C as v}from"./calendar-DnRZTeuR.js";import{f as d}from"./format-PYUiRpxY.js";import"./app-BmbQfT0_.js";import"./index-DzrNkgKa.js";import"./utils-CBfrqCZ4.js";import"./createLucideIcon-C7c1hvIj.js";import"./chevron-right-CzDW8WF4.js";import"./chevron-down-qX4-vl1q.js";import"./index-BMM8wKPv.js";import"./index-DzT3tnb6.js";import"./index-q1apwmMP.js";import"./index-0tk3grE1.js";import"./index-DhGOy-yS.js";import"./index-CwBu8RV2.js";import"./index-qPHptkmt.js";import"./index-DH5c0sFq.js";import"./index-Dc_FVRD7.js";import"./index-Bc-3DsyS.js";import"./index-DfGTd3cq.js";import"./x-DzxxLS5y.js";import"./index-DiN52TcP.js";import"./index-vBQwvlXi.js";import"./index-DUM9UyY6.js";import"./check-Ck6Rqaxz.js";import"./chevron-up-DiltP7zF.js";function $e({cities:H,properties:K,unitsByProperty:P,open:q,onOpenChange:F,onSuccess:B}){const N=o.useRef(null),M=o.useRef(null),C=o.useRef(null),[A,c]=o.useState(""),[z,S]=o.useState(""),[$,j]=o.useState(""),[J,w]=o.useState([]),[Q,D]=o.useState([]),[b,L]=o.useState(""),[y,k]=o.useState(""),[u,W]=o.useState({lease_signing_date:!1,move_in_date:!1,scheduled_paid_time:!1,move_in_form_sent_date:!1,date_of_move_in_form_filled:!1,date_of_insurance_expiration:!1}),n=(t,m)=>{W(V=>({...V,[t]:m}))},{data:s,setData:i,post:X,processing:U,errors:a,reset:Z}=ie({unit_id:"",signed_lease:"No",lease_signing_date:"",move_in_date:"",paid_security_deposit_first_month_rent:"No",scheduled_paid_time:"",handled_keys:"No",move_in_form_sent_date:"",filled_move_in_form:"No",date_of_move_in_form_filled:"",submitted_insurance:"No",date_of_insurance_expiration:""}),T=()=>{Z(),c(""),S(""),j(""),w([]),D([]),L(""),k("")},ee=t=>{if(L(t),k(""),i("unit_id",""),S(""),j(""),c(""),t){const m=K.filter(V=>V.city_id?.toString()===t);D(m)}else D([]);w([])},te=t=>{k(t),i("unit_id",""),j(""),c(""),t&&P&&P[t]?w(P[t]):w([])},se=t=>{i("unit_id",parseInt(t)),c("")},G=t=>{t.preventDefault(),c(""),S(""),j("");let m=!1;(!b||b.trim()==="")&&(S("Please select a city before submitting the form."),M.current&&(M.current.focus(),M.current.scrollIntoView({behavior:"smooth",block:"center"})),m=!0),(!y||y.trim()==="")&&(j("Please select a property before submitting the form."),C.current&&(C.current.focus(),C.current.scrollIntoView({behavior:"smooth",block:"center"})),m=!0),(!s.unit_id||typeof s.unit_id=="number"&&s.unit_id<=0)&&(c("Please select a unit before submitting the form."),N.current&&(N.current.focus(),N.current.scrollIntoView({behavior:"smooth",block:"center"})),m=!0),!m&&X(route("move-in.store"),{onSuccess:()=>{T(),F(!1),B?.()}})},ae=()=>{T(),F(!1)};return e.jsx(le,{open:q,onOpenChange:F,modal:!1,children:e.jsx(ne,{size:"half",title:"Create New Move-In Record",children:e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsx("div",{className:"flex-1 overflow-auto p-6",children:e.jsxs("form",{onSubmit:G,className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border-l-4 border-l-slate-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(l,{htmlFor:"city_id",className:"text-base font-semibold",children:"City *"})}),e.jsxs(I,{onValueChange:ee,value:b,children:[e.jsx(R,{ref:M,children:e.jsx(O,{placeholder:"Select city"})}),e.jsx(E,{children:H.map(t=>e.jsx(Y,{value:t.id.toString(),children:t.city},t.id))})]}),a.unit_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:"Please select a valid unit."}),z&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:z})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-gray-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(l,{htmlFor:"property_id",className:"text-base font-semibold",children:"Property *"})}),e.jsxs(I,{onValueChange:te,value:y,disabled:!b,children:[e.jsx(R,{ref:C,children:e.jsx(O,{placeholder:b?"Select property":"Select city first"})}),e.jsx(E,{children:Q.map(t=>e.jsx(Y,{value:t.id.toString(),children:t.property_name},t.id))})]}),$&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:$})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-blue-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(l,{htmlFor:"unit_id",className:"text-base font-semibold",children:"Unit Name *"})}),e.jsxs(I,{onValueChange:se,value:s.unit_id?s.unit_id.toString():"",disabled:!y,children:[e.jsx(R,{ref:N,children:e.jsx(O,{placeholder:y?"Select unit":"Select property first"})}),e.jsx(E,{children:J.map(t=>e.jsx(Y,{value:t.id.toString(),children:t.unit_name},t.id))})]}),a.unit_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.unit_id}),A&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:A})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-green-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(l,{htmlFor:"signed_lease",className:"text-base font-semibold",children:"Signed Lease *"})}),e.jsx(g,{value:s.signed_lease,onValueChange:t=>i("signed_lease",t),name:"signed_lease",options:[{value:"No",label:"No"},{value:"Yes",label:"Yes"}]}),a.signed_lease&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.signed_lease})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-purple-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(l,{htmlFor:"lease_signing_date",className:"text-base font-semibold",children:"Lease Signing Date"})}),e.jsxs(f,{open:u.lease_signing_date,onOpenChange:t=>n("lease_signing_date",t),modal:!1,children:[e.jsx(x,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:`w-full justify-start text-left font-normal ${!s.lease_signing_date&&"text-muted-foreground"}`,children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),s.lease_signing_date?d(r(s.lease_signing_date,"yyyy-MM-dd",new Date),"PPP"):"Pick a date"]})}),e.jsx(h,{className:"z-[60] w-auto p-0",onOpenAutoFocus:t=>t.preventDefault(),children:e.jsx(p,{mode:"single",selected:s.lease_signing_date?r(s.lease_signing_date,"yyyy-MM-dd",new Date):void 0,onSelect:t=>{t&&(i("lease_signing_date",d(t,"yyyy-MM-dd")),n("lease_signing_date",!1))},initialFocus:!0})})]}),a.lease_signing_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.lease_signing_date})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-orange-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(l,{htmlFor:"move_in_date",className:"text-base font-semibold",children:"Move-In Date"})}),e.jsxs(f,{open:u.move_in_date,onOpenChange:t=>n("move_in_date",t),modal:!1,children:[e.jsx(x,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:`w-full justify-start text-left font-normal ${!s.move_in_date&&"text-muted-foreground"}`,children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),s.move_in_date?d(r(s.move_in_date,"yyyy-MM-dd",new Date),"PPP"):"Pick a date"]})}),e.jsx(h,{className:"z-[60] w-auto p-0",onOpenAutoFocus:t=>t.preventDefault(),children:e.jsx(p,{mode:"single",selected:s.move_in_date?r(s.move_in_date,"yyyy-MM-dd",new Date):void 0,onSelect:t=>{t&&(i("move_in_date",d(t,"yyyy-MM-dd")),n("move_in_date",!1))},initialFocus:!0})})]}),a.move_in_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.move_in_date})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-emerald-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(l,{htmlFor:"paid_security_deposit_first_month_rent",className:"text-base font-semibold",children:"Paid Security Deposit & First Month Rent"})}),e.jsx(g,{value:s.paid_security_deposit_first_month_rent,onValueChange:t=>i("paid_security_deposit_first_month_rent",t),name:"paid_security_deposit_first_month_rent",options:[{value:"No",label:"No"},{value:"Yes",label:"Yes"}]}),a.paid_security_deposit_first_month_rent&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.paid_security_deposit_first_month_rent})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-teal-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(l,{htmlFor:"scheduled_paid_time",className:"text-base font-semibold",children:"Scheduled Paid Time"})}),e.jsxs(f,{open:u.scheduled_paid_time,onOpenChange:t=>n("scheduled_paid_time",t),modal:!1,children:[e.jsx(x,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:`w-full justify-start text-left font-normal ${!s.scheduled_paid_time&&"text-muted-foreground"}`,children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),s.scheduled_paid_time?d(r(s.scheduled_paid_time,"yyyy-MM-dd",new Date),"PPP"):"Pick a date"]})}),e.jsx(h,{className:"z-[60] w-auto p-0",onOpenAutoFocus:t=>t.preventDefault(),children:e.jsx(p,{mode:"single",selected:s.scheduled_paid_time?r(s.scheduled_paid_time,"yyyy-MM-dd",new Date):void 0,onSelect:t=>{t&&(i("scheduled_paid_time",d(t,"yyyy-MM-dd")),n("scheduled_paid_time",!1))},initialFocus:!0})})]}),a.scheduled_paid_time&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.scheduled_paid_time})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-indigo-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(l,{htmlFor:"handled_keys",className:"text-base font-semibold",children:"Handled Keys"})}),e.jsx(g,{value:s.handled_keys,onValueChange:t=>i("handled_keys",t),name:"handled_keys",options:[{value:"No",label:"No"},{value:"Yes",label:"Yes"}]}),a.handled_keys&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.handled_keys})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-pink-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(l,{htmlFor:"move_in_form_sent_date",className:"text-base font-semibold",children:"Move-In Form Sent Date"})}),e.jsxs(f,{open:u.move_in_form_sent_date,onOpenChange:t=>n("move_in_form_sent_date",t),modal:!1,children:[e.jsx(x,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:`w-full justify-start text-left font-normal ${!s.move_in_form_sent_date&&"text-muted-foreground"}`,children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),s.move_in_form_sent_date?d(r(s.move_in_form_sent_date,"yyyy-MM-dd",new Date),"PPP"):"Pick a date"]})}),e.jsx(h,{className:"z-[60] w-auto p-0",onOpenAutoFocus:t=>t.preventDefault(),children:e.jsx(p,{mode:"single",selected:s.move_in_form_sent_date?r(s.move_in_form_sent_date,"yyyy-MM-dd",new Date):void 0,onSelect:t=>{t&&(i("move_in_form_sent_date",d(t,"yyyy-MM-dd")),n("move_in_form_sent_date",!1))},initialFocus:!0})})]}),a.move_in_form_sent_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.move_in_form_sent_date})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-red-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(l,{htmlFor:"filled_move_in_form",className:"text-base font-semibold",children:"Filled Move-In Form"})}),e.jsx(g,{value:s.filled_move_in_form,onValueChange:t=>i("filled_move_in_form",t),name:"filled_move_in_form",options:[{value:"No",label:"No"},{value:"Yes",label:"Yes"}]}),a.filled_move_in_form&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.filled_move_in_form})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-yellow-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(l,{htmlFor:"date_of_move_in_form_filled",className:"text-base font-semibold",children:"Date of Move-In Form Filled"})}),e.jsxs(f,{open:u.date_of_move_in_form_filled,onOpenChange:t=>n("date_of_move_in_form_filled",t),modal:!1,children:[e.jsx(x,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:`w-full justify-start text-left font-normal ${!s.date_of_move_in_form_filled&&"text-muted-foreground"}`,children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),s.date_of_move_in_form_filled?d(r(s.date_of_move_in_form_filled,"yyyy-MM-dd",new Date),"PPP"):"Pick a date"]})}),e.jsx(h,{className:"z-[60] w-auto p-0",onOpenAutoFocus:t=>t.preventDefault(),children:e.jsx(p,{mode:"single",selected:s.date_of_move_in_form_filled?r(s.date_of_move_in_form_filled,"yyyy-MM-dd",new Date):void 0,onSelect:t=>{t&&(i("date_of_move_in_form_filled",d(t,"yyyy-MM-dd")),n("date_of_move_in_form_filled",!1))},initialFocus:!0})})]}),a.date_of_move_in_form_filled&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.date_of_move_in_form_filled})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-cyan-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(l,{htmlFor:"submitted_insurance",className:"text-base font-semibold",children:"Submitted Insurance"})}),e.jsx(g,{value:s.submitted_insurance,onValueChange:t=>i("submitted_insurance",t),name:"submitted_insurance",options:[{value:"No",label:"No"},{value:"Yes",label:"Yes"}]}),a.submitted_insurance&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.submitted_insurance})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-violet-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(l,{htmlFor:"date_of_insurance_expiration",className:"text-base font-semibold",children:"Date of Insurance Expiration"})}),e.jsxs(f,{open:u.date_of_insurance_expiration,onOpenChange:t=>n("date_of_insurance_expiration",t),modal:!1,children:[e.jsx(x,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:`w-full justify-start text-left font-normal ${!s.date_of_insurance_expiration&&"text-muted-foreground"}`,children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),s.date_of_insurance_expiration?d(r(s.date_of_insurance_expiration,"yyyy-MM-dd",new Date),"PPP"):"Pick a date"]})}),e.jsx(h,{className:"z-[60] w-auto p-0",onOpenAutoFocus:t=>t.preventDefault(),children:e.jsx(p,{mode:"single",selected:s.date_of_insurance_expiration?r(s.date_of_insurance_expiration,"yyyy-MM-dd",new Date):void 0,onSelect:t=>{t&&(i("date_of_insurance_expiration",d(t,"yyyy-MM-dd")),n("date_of_insurance_expiration",!1))},initialFocus:!0})})]}),a.date_of_insurance_expiration&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.date_of_insurance_expiration})]})]})}),e.jsx(re,{children:e.jsxs("div",{className:"flex w-full justify-end gap-2",children:[e.jsx(_,{type:"button",variant:"outline",onClick:ae,children:"Cancel"}),e.jsx(_,{type:"submit",disabled:U,onClick:G,children:U?"Creating...":"Create Move-In Record"})]})})]})})})}export{$e as default};
