import{r as n,j as t}from"./app-Dn1r5IbR.js";import{I as N}from"./input-DJHjvjS7.js";import S from"./FormSection-CETT0LUc.js";import{C as y}from"./chevron-down-Bfpn-qjr.js";import"./app-BmbQfT0_.js";import"./utils-CBfrqCZ4.js";import"./label-CyLYjr_a.js";import"./index-C5yiDUFi.js";import"./index-DF1-xgR-.js";import"./createLucideIcon-ezkluWMI.js";function z({vendors:s,selectedVendorId:u,onVendorChange:d,vendorRef:x,disabled:a,error:g,validationError:v}){const[r,i]=n.useState(""),[h,l]=n.useState(!1),[m,f]=n.useState([]),p=n.useRef(null),c=n.useRef(null);n.useEffect(()=>{if(u){const e=s.find(o=>o.id.toString()===u);e&&i(e.vendor_name)}else i("")},[u,s]),n.useEffect(()=>{if(!s){f([]);return}if(r.trim()==="")f(s);else{const e=s.filter(o=>o.vendor_name.toLowerCase().includes(r.toLowerCase()));f(e)}},[r,s]),n.useEffect(()=>{const e=o=>{c.current&&!c.current.contains(o.target)&&p.current&&!p.current.contains(o.target)&&l(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const w=e=>{i(e.vendor_name),d(e.id.toString()),l(!1)},b=e=>{i(e),l(!0),u&&d("")},j=()=>{!s.find(o=>o.vendor_name.toLowerCase()===r.toLowerCase())&&r.trim()!==""&&(i(""),d("")),l(!1)};return t.jsxs(S,{label:"Vendor Name",required:!0,borderColor:"border-l-purple-500",error:g,validationError:v,children:[t.jsxs("div",{className:"relative",children:[t.jsx(N,{ref:p,type:"text",placeholder:a?"Select a city first":"Type to search vendors...",value:r,onChange:e=>b(e.target.value),onFocus:()=>!a&&l(!0),onBlur:j,disabled:a,className:"text-input-foreground bg-input pr-8"}),t.jsx(y,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),h&&m.length>0&&!a&&t.jsx("div",{ref:c,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:m.map(e=>t.jsxs("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>w(e),children:[e.vendor_name,e.city&&t.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",e.city,")"]})]},e.id))}),h&&m.length===0&&r.trim()!==""&&!a&&t.jsx("div",{ref:c,className:"absolute top-full right-0 left-0 z-50 mt-1 rounded-md border border-input bg-popover shadow-lg",children:t.jsxs("div",{className:"px-3 py-2 text-sm text-red-500",children:['No vendors found matching "',r,'". Please select from the available options.']})})]}),t.jsx("button",{ref:x,type:"button",className:"hidden"})]})}export{z as default};
