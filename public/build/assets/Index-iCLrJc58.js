import{r as y,j as e,H as w,L as j,b}from"./app-DnZTfT0_.js";import{u as S,A as E}from"./app-layout-NpEgK4_T.js";import{B as x}from"./app-logo-icon-Bc2eyx79.js";import{I as D}from"./input-DQ_wq_vv.js";import{C as A,a as k,b as T,c as $}from"./card-C4RmjogZ.js";import{P as C,T as L,a as P,b as _,c as n,d as H,e as a,f as I}from"./table-7_H-LZJM.js";import{B as l}from"./badge-CCSbDhbi.js";import{D as B}from"./download-DrHPYDYz.js";import{S as R}from"./search-D1fLgR4z.js";import{E as U}from"./eye-Cf9la-Va.js";import{S as z}from"./square-pen-qd8CnHV4.js";import"./app-8ZSuAH30.js";import"./index-CToc1y-v.js";import"./index-D6oF8zzd.js";const V=(i,h="notice-evictions.csv")=>{try{const o=s=>{if(!s)return"";try{return new Date(s).toLocaleDateString()}catch{return s||""}},r=s=>s==null?"":String(s).replace(/"/g,'""'),m=[["ID","Unit Name","Tenants Name","Status","Date","Type of Notice","Have An Exception","Note","Evictions","Sent to Attorney","Hearing Dates","Evicted/Payment Plan","If Left","Writ Date"].join(","),...i.map(s=>{try{return[s.id||"",`"${r(s.unit_name)}"`,`"${r(s.tenants_name)}"`,`"${r(s.status)}"`,`"${o(s.date)}"`,`"${r(s.type_of_notice)}"`,`"${r(s.have_an_exception)}"`,`"${r(s.note)}"`,`"${r(s.evictions)}"`,`"${r(s.sent_to_atorney)}"`,`"${o(s.hearing_dates)}"`,`"${r(s.evected_or_payment_plan)}"`,`"${r(s.if_left)}"`,`"${o(s.writ_date)}"`].join(",")}catch(d){return console.error("Error processing record row:",s,d),""}}).filter(s=>s!=="")].join(`
`),f=new Blob([m],{type:"text/csv;charset=utf-8;"}),c=document.createElement("a"),u=URL.createObjectURL(f);return c.setAttribute("href",u),c.setAttribute("download",h),c.style.visibility="hidden",document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(u),!0}catch(o){throw console.error("CSV Export Error:",o),o}},se=({records:i,search:h})=>{const[o,r]=y.useState(h||""),[g,m]=y.useState(!1),f=t=>{t.preventDefault(),b.get(route("notice-and-evictions.index"),{search:o},{preserveState:!0})},c=t=>{window.confirm("Delete this record? This cannot be undone.")&&b.delete(`/notice_and_evictions/${t.id}`)},u=()=>{if(!i||i.length===0){alert("No data to export");return}m(!0);try{console.log("Exporting notice and evictions data:",i);const t=`notice-evictions-${new Date().toISOString().split("T")[0]}.csv`;V(i,t),console.log("Export completed successfully")}catch(t){console.error("Export failed:",t),alert(`Export failed: ${t.message||"Unknown error"}. Please check the console for details.`)}finally{m(!1)}},s=t=>{if(!t)return e.jsx(l,{variant:"outline",children:"N/A"});switch(t.toLowerCase()){case"active":return e.jsx(l,{variant:"default",className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",children:t});case"pending":return e.jsx(l,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",children:t});case"closed":return e.jsx(l,{variant:"outline",className:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300",children:t});default:return e.jsx(l,{variant:"default",children:t})}},d=t=>!t||t==="-"?e.jsx(l,{variant:"outline",children:"N/A"}):e.jsx(l,{variant:t==="Yes"?"default":"secondary",className:t==="Yes"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300",children:t}),{hasPermission:N,hasAnyPermission:p,hasAllPermissions:v}=S();return e.jsxs(E,{children:[e.jsx(w,{title:"Notice & Evictions"}),e.jsx("div",{className:"py-12 bg-background text-foreground transition-colors min-h-screen",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs(A,{className:"bg-card text-card-foreground shadow-lg",children:[e.jsxs(k,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(T,{className:"text-2xl",children:"Notice & Evictions"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:u,disabled:g||!i||i.length===0,className:"flex items-center",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),g?"Exporting...":"Export CSV"]}),v(["notice-and-evictions.create","notice-and-evictions.store"])&&e.jsx(j,{href:"/notice_and_evictions/create",children:e.jsxs(x,{children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Add Record"]})})]})]}),e.jsxs("form",{onSubmit:f,className:"flex gap-2 mt-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(D,{type:"text",placeholder:"Search by unit name, tenant name, or status...",value:o,onChange:t=>r(t.target.value),className:"bg-input text-input-foreground"})}),e.jsx(x,{type:"submit",children:e.jsx(R,{className:"h-4 w-4"})})]})]}),e.jsxs($,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(L,{children:[e.jsx(P,{children:e.jsxs(_,{className:"border-border",children:[e.jsx(n,{className:"text-muted-foreground",children:"ID"}),e.jsx(n,{className:"text-muted-foreground",children:"Unit Name"}),e.jsx(n,{className:"text-muted-foreground",children:"Tenants Name"}),e.jsx(n,{className:"text-muted-foreground",children:"Status"}),e.jsx(n,{className:"text-muted-foreground",children:"Date"}),e.jsx(n,{className:"text-muted-foreground",children:"Type of Notice"}),e.jsx(n,{className:"text-muted-foreground",children:"Have An Exception?"}),e.jsx(n,{className:"text-muted-foreground",children:"Note"}),e.jsx(n,{className:"text-muted-foreground",children:"Evictions"}),e.jsx(n,{className:"text-muted-foreground",children:"Sent to Attorney"}),e.jsx(n,{className:"text-muted-foreground",children:"Hearing Dates"}),e.jsx(n,{className:"text-muted-foreground",children:"Evicted/Payment Plan"}),e.jsx(n,{className:"text-muted-foreground",children:"If Left?"}),e.jsx(n,{className:"text-muted-foreground",children:"Writ Date"}),p(["notice-and-evictions.show","notice-and-evictions.edit","notice-and-evictions.update","notice-and-evictions.destroy"])&&e.jsx(n,{className:"text-muted-foreground",children:"Actions"})]})}),e.jsx(H,{children:i.map(t=>e.jsxs(_,{className:"hover:bg-muted/50 border-border",children:[e.jsx(a,{className:"font-medium text-foreground",children:t.id}),e.jsx(a,{className:"text-foreground",children:t.unit_name}),e.jsx(a,{className:"text-foreground",children:t.tenants_name}),e.jsx(a,{children:s(t.status)}),e.jsx(a,{className:"text-foreground",children:t.date?new Date(t.date).toLocaleDateString():e.jsx("span",{className:"text-muted-foreground",children:"N/A"})}),e.jsx(a,{className:"text-foreground",children:t.type_of_notice||e.jsx("span",{className:"text-muted-foreground",children:"N/A"})}),e.jsx(a,{children:d(t.have_an_exception)}),e.jsx(a,{className:"text-foreground",children:t.note||e.jsx("span",{className:"text-muted-foreground",children:"N/A"})}),e.jsx(a,{className:"text-foreground",children:t.evictions||e.jsx("span",{className:"text-muted-foreground",children:"N/A"})}),e.jsx(a,{children:d(t.sent_to_atorney)}),e.jsx(a,{className:"text-foreground",children:t.hearing_dates?new Date(t.hearing_dates).toLocaleDateString():e.jsx("span",{className:"text-muted-foreground",children:"N/A"})}),e.jsx(a,{className:"text-foreground",children:t.evected_or_payment_plan||e.jsx("span",{className:"text-muted-foreground",children:"N/A"})}),e.jsx(a,{children:d(t.if_left)}),e.jsx(a,{className:"text-foreground",children:t.writ_date?new Date(t.writ_date).toLocaleDateString():e.jsx("span",{className:"text-muted-foreground",children:"N/A"})}),p(["notice-and-evictions.show","notice-and-evictions.edit","notice-and-evictions.update","notice-and-evictions.destroy"])&&e.jsx(a,{children:e.jsxs("div",{className:"flex gap-1",children:[N("notice-and-evictions.show")&&e.jsx(j,{href:`/notice_and_evictions/${t.id}`,children:e.jsx(x,{variant:"outline",size:"sm",children:e.jsx(U,{className:"h-4 w-4"})})}),v(["notice-and-evictions.edit","notice-and-evictions.update"])&&e.jsx(j,{href:`/notice_and_evictions/${t.id}/edit`,children:e.jsx(x,{variant:"outline",size:"sm",children:e.jsx(z,{className:"h-4 w-4"})})}),N("notice-and-evictions.destroy")&&e.jsx(x,{variant:"outline",size:"sm",onClick:()=>c(t),className:"text-destructive hover:text-destructive hover:bg-destructive/10 border-destructive/20",children:e.jsx(I,{className:"h-4 w-4"})})]})})]},t.id))})]})}),i.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx("p",{className:"text-lg",children:"No records found."}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search criteria."})]}),e.jsx("div",{className:"mt-6 flex justify-between items-center border-t border-border pt-4",children:e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",i.length," records"]})})]})]})})})]})};export{se as default};
