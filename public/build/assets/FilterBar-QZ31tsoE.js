import{r as n,j as t}from"./app-Y5k3mklr.js";import{B as D}from"./button-CQfb3JBO.js";import{I as i}from"./input-C9nWuHON.js";import{C as b}from"./chevron-down-DPdXkLmR.js";import{S as Q}from"./search-DjaWC1MF.js";import{X as W}from"./x-Nz9yRxvI.js";import"./app-BZFxL5VY.js";import"./index-DeKsjAJz.js";import"./index-CdJFUDDL.js";import"./utils-CBfrqCZ4.js";import"./createLucideIcon-BOWbKjUa.js";const Y=[{value:"exclude_completed",label:"Exclude Completed"},{value:"all",label:"Show All"},{value:"Completed",label:"Completed"},{value:"In Progress",label:"In Progress"},{value:"Pending",label:"Pending"}];function ce({filters:s,cities:c,properties:L,vendors:k,onSearch:E,onClear:V}){const[p,j]=n.useState(s),[d,m]=n.useState(s.city||""),[T,a]=n.useState(!1),[N,S]=n.useState([]),h=n.useRef(null),f=n.useRef(null),[I,g]=n.useState(s.property||""),[z,l]=n.useState(!1),x=n.useRef(null),v=n.useRef(null),[_,y]=n.useState(s.vendor_name||""),[B,u]=n.useState(!1),C=n.useRef(null),w=n.useRef(null),[O,F]=n.useState(s.status||"exclude_completed");n.useEffect(()=>{if(c)if(d.trim()==="")S(c);else{const e=c.filter(r=>r.city.toLowerCase().includes(d.toLowerCase()));S(e)}},[d,c]);const R=L?.filter(e=>e.property_name.toLowerCase().includes(I.toLowerCase()))||[],P=k?.filter(e=>e.vendor_name.toLowerCase().includes(_.toLowerCase()))||[];n.useEffect(()=>{const e=r=>{f.current&&!f.current.contains(r.target)&&h.current&&!h.current.contains(r.target)&&a(!1),v.current&&!v.current.contains(r.target)&&x.current&&!x.current.contains(r.target)&&l(!1),w.current&&!w.current.contains(r.target)&&C.current&&!C.current.contains(r.target)&&u(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const o=(e,r)=>{j({...p,[e]:r})},A=e=>{m(e),o("city",e),a(!1)},U=e=>{m(e),o("city",e),a(!0)},X=e=>{const r=e.target.value;g(r),o("property",r),l(r.length>0)},q=e=>{g(e.property_name),o("property",e.property_name),l(!1)},G=e=>{const r=e.target.value;y(r),o("vendor_name",r),u(r.length>0)},H=e=>{y(e.vendor_name),o("vendor_name",e.vendor_name),u(!1)},J=e=>{const r=e.target.value;F(r),o("status",r)},K=()=>{E(p)},M=()=>{j({}),m(""),g(""),y(""),F("exclude_completed"),a(!1),l(!1),u(!1),V()};return t.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-7",children:[t.jsxs("div",{className:"relative",children:[t.jsx(i,{ref:h,type:"text",placeholder:"Filter by City",value:d,onChange:e=>U(e.target.value),onFocus:()=>a(!0),className:"text-input-foreground bg-input pr-8"}),t.jsx(b,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),T&&N.length>0&&t.jsx("div",{ref:f,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:N.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>A(e.city),children:e.city},e.id))})]}),t.jsxs("div",{className:"relative",children:[t.jsx(i,{ref:x,type:"text",placeholder:"Filter by Property",value:I,onChange:X,onFocus:()=>l(!0),className:"text-input-foreground bg-input pr-8"}),t.jsx(b,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),z&&R.length>0&&t.jsx("div",{ref:v,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:R.map(e=>t.jsxs("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>q(e),children:[e.property_name,e.city&&t.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",e.city,")"]})]},e.id))})]}),t.jsx(i,{type:"text",placeholder:"Filter by Unit",value:p.unit_name||"",onChange:e=>o("unit_name",e.target.value),className:"text-input-foreground bg-input"}),t.jsxs("div",{className:"relative",children:[t.jsx(i,{ref:C,type:"text",placeholder:"Filter by Vendor",value:_,onChange:G,onFocus:()=>u(!0),className:"text-input-foreground bg-input pr-8"}),t.jsx(b,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),B&&P.length>0&&t.jsx("div",{ref:w,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:P.map(e=>t.jsxs("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>H(e),children:[e.vendor_name,e.city&&t.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",e.city,")"]})]},e.id))})]}),t.jsx("select",{value:O,onChange:J,className:"rounded-md border border-input bg-input px-3 py-2 text-sm text-input-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:Y.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))}),t.jsxs(D,{onClick:K,variant:"default",className:"flex items-center",children:[t.jsx(Q,{className:"mr-2 h-4 w-4"}),"Search"]}),t.jsxs(D,{onClick:M,variant:"outline",className:"flex items-center",children:[t.jsx(W,{className:"mr-2 h-4 w-4"}),"Clear"]})]})}export{ce as default};
