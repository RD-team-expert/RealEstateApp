import{r as i,b as T,j as r}from"./app-p7g_f0wo.js";import{B as j}from"./button-CgWb-OwV.js";import{D as F,a as A,b as O}from"./drawer-BG8f08dK.js";import z from"./CitySelection-BUeaw-3P.js";import M from"./PropertySelection-cuIulBsm.js";import q from"./UnitDetails-BwCVTOAT.js";import G from"./TenantDetails-C_nzJvR5.js";import H from"./LeaseDates-BjRAhEKg.js";import J from"./UnitSpecifications-DutMhtIa.js";import K from"./LeaseStatus-BQhBYst0.js";import Q from"./FinancialInformation-oRGWWre0.js";import W from"./UtilityInformation-Cd7CLYmI.js";import X from"./InsuranceInformation-CjPjyQ1R.js";import"./app-D9ss4c-j.js";import"./index-6lgmZUbB.js";import"./index-CdJFUDDL.js";import"./utils-CBfrqCZ4.js";import"./index-C9RY0Fne.js";import"./index-H5dANVBP.js";import"./index-DkhO7hde.js";import"./index-soOnB7Xl.js";import"./index-CiElmmUH.js";import"./index-DqXNBRMy.js";import"./x-CLgUf5rt.js";import"./createLucideIcon-DCkjgf37.js";import"./label-DYy2JzQ2.js";import"./select-CfH1ySLB.js";import"./index-Dc_FVRD7.js";import"./index-BxQHv4UU.js";import"./index-DBAs5r5h.js";import"./index-DbQ0MNsB.js";import"./index-BFObTlUk.js";import"./index-BAfRhOcu.js";import"./chevron-down-QjJMMFQo.js";import"./check-Cfkty5Qk.js";import"./chevron-up-DNYJO-3s.js";import"./input-DiaYLKYe.js";import"./calendar-BbyHMKLt.js";import"./format-PYUiRpxY.js";import"./chevron-left-DEQB7mOe.js";import"./chevron-right-DVrPLLPg.js";import"./popover-B4-HGuiv.js";import"./calendar-C5PdxC03.js";import"./radioGroup-Dy3ozKpR.js";function ze({cities:E,properties:f,open:N,onOpenChange:_,onSuccess:v}){const u=i.useRef(null),m=i.useRef(null),[D,p]=i.useState(""),[I,s]=i.useState(""),[U,l]=i.useState(""),[w,d]=i.useState([]),[c,h]=i.useState(""),[y,x]=i.useState({lease_start:!1,lease_end:!1,insurance_expiration_date:!1}),C=(e,o)=>{x(k=>({...k,[e]:o}))},{data:t,setData:a,post:P,processing:g,errors:n,reset:b}=T({property_id:"",unit_name:"",tenants:"",lease_start:"",lease_end:"",count_beds:"",count_baths:"",lease_status:"",monthly_rent:"",recurring_transaction:"",utility_status:"",account_number:"",insurance:"",insurance_expiration_date:""});i.useEffect(()=>{if(c&&f){const e=f.filter(o=>o.city_id?.toString()===c);d(e),t.property_id&&!e.find(o=>o.id.toString()===t.property_id)&&a("property_id","")}else d([]),a("property_id","")},[c,f]);const R=e=>{h(e),p(""),s("")},V=e=>{a("property_id",e),s("")},B=e=>{a("unit_name",e.target.value),l("")},S=e=>{e.preventDefault(),p(""),s(""),l("");let o=!1;(!t.property_id||t.property_id.trim()==="")&&(s("Please select a property before submitting the form."),u.current&&(u.current.focus(),u.current.scrollIntoView({behavior:"smooth",block:"center"})),o=!0),(!t.unit_name||t.unit_name.trim()==="")&&(l("Please enter a unit name before submitting the form."),m.current&&(m.current.focus(),m.current.scrollIntoView({behavior:"smooth",block:"center"})),o=!0),!o&&P(route("units.store"),{onSuccess:()=>{b(),p(""),s(""),l(""),d([]),h(""),x({lease_start:!1,lease_end:!1,insurance_expiration_date:!1}),_(!1),v?.()}})},L=()=>{b(),p(""),s(""),l(""),d([]),h(""),x({lease_start:!1,lease_end:!1,insurance_expiration_date:!1}),_(!1)};return r.jsx(F,{open:N,onOpenChange:_,modal:!1,children:r.jsx(A,{size:"half",title:"Create New Unit",children:r.jsxs("div",{className:"flex h-full flex-col",children:[r.jsx("div",{className:"flex-1 overflow-auto p-6",children:r.jsxs("form",{onSubmit:S,className:"space-y-4",children:[r.jsx(z,{cities:E,selectedCityId:c,onCityChange:R,validationError:D}),r.jsx(M,{ref:u,availableProperties:w,selectedCityId:c,propertyId:t.property_id,onPropertyChange:V,error:n.property_id,validationError:I}),r.jsx(q,{ref:m,unitName:t.unit_name,onUnitNameChange:B,error:n.unit_name,validationError:U}),r.jsx(G,{tenants:t.tenants,onTenantsChange:e=>a("tenants",e),error:n.tenants}),r.jsx(H,{leaseStart:t.lease_start,leaseEnd:t.lease_end,calendarStates:y,onLeaseStartChange:e=>a("lease_start",e),onLeaseEndChange:e=>a("lease_end",e),onCalendarOpenChange:C,errors:n}),r.jsx(J,{countBeds:t.count_beds,countBaths:t.count_baths,onCountBedsChange:e=>a("count_beds",e),onCountBathsChange:e=>a("count_baths",e),errors:n}),r.jsx(K,{leaseStatus:t.lease_status,onLeaseStatusChange:e=>a("lease_status",e),error:n.lease_status}),r.jsx(Q,{monthlyRent:t.monthly_rent,recurringTransaction:t.recurring_transaction,onMonthlyRentChange:e=>a("monthly_rent",e),onRecurringTransactionChange:e=>a("recurring_transaction",e),errors:n}),r.jsx(W,{utilityStatus:t.utility_status,accountNumber:t.account_number,onUtilityStatusChange:e=>a("utility_status",e),onAccountNumberChange:e=>a("account_number",e),errors:n}),r.jsx(X,{insurance:t.insurance,insuranceExpirationDate:t.insurance_expiration_date,calendarOpen:y.insurance_expiration_date,onInsuranceChange:e=>a("insurance",e),onInsuranceExpirationDateChange:e=>a("insurance_expiration_date",e),onCalendarOpenChange:e=>C("insurance_expiration_date",e),errors:n})]})}),r.jsx(O,{children:r.jsxs("div",{className:"flex gap-2 w-full",children:[r.jsx(j,{type:"button",variant:"outline",onClick:L,className:"flex-1",children:"Cancel"}),r.jsx(j,{type:"submit",onClick:S,disabled:g,className:"flex-1",children:g?"Creating...":"Create Unit"})]})})]})})})}export{ze as default};
