import{r as o,b as me,j as e}from"./app-nUSYw4ai.js";import{B as h}from"./createLucideIcon-C5GD6QeA.js";import{P as U,a as O,p as u,b as L,C as A}from"./popover-CMnBhXYh.js";import{D as _e,a as he,b as xe}from"./drawer-ikeMES7v.js";import{I as g}from"./input-OhVo65AQ.js";import{L as r}from"./label-DtPmPEai.js";import{S as N,a as y,b as C,c as S,d as k}from"./select-PjIVfLW0.js";import{T as Y}from"./textarea-CS9Q9qGG.js";import{R as z}from"./radioGroup-BdD1VW6H.js";import{C as B}from"./calendar-C-0kt65W.js";import{f as w}from"./format-PYUiRpxY.js";import"./app-oDNfBSri.js";import"./chevron-right-uK37_yne.js";import"./chevron-up-BHOYq5G1.js";import"./index-nh9QAngE.js";import"./index-CedKduyQ.js";import"./index-5YpAK82Y.js";import"./index-UYkM-lg7.js";import"./index-DbaH1TRh.js";import"./index-DGbRjXgX.js";import"./index-BKS2-tOY.js";import"./index-mn3Hv6wy.js";function Oe({cities:te,propertiesByCityId:G,unitsByPropertyId:K,tenantsByUnitId:W,open:se,onOpenChange:$,onSuccess:le}){const x=o.useRef(null),p=o.useRef(null),b=o.useRef(null),j=o.useRef(null),[c,d]=o.useState({city:"",property:"",unit:"",tenant:""}),[P,q]=o.useState(null),[F,M]=o.useState(null),[D,v]=o.useState(null),[H,m]=o.useState(null),[ae,R]=o.useState([]),[ne,f]=o.useState([]),[J,_]=o.useState([]),[V,Q]=o.useState({move_out_date:!1,date_lease_ending_on_buildium:!1,date_utility_put_under_our_name:!1}),{data:a,setData:i,post:re,processing:X,errors:l,reset:ie}=me({tenant_id:null,move_out_date:"",lease_status:"",date_lease_ending_on_buildium:"",keys_location:"",utilities_under_our_name:"",date_utility_put_under_our_name:"",walkthrough:"",repairs:"",send_back_security_deposit:"",notes:"",cleaning:"",list_the_unit:"",move_out_form:""}),oe=t=>{const s=parseInt(t);q(s),M(null),v(null),m(null),i("tenant_id",null),d(n=>({...n,city:"",property:"",unit:"",tenant:""})),s&&G[s]?R(G[s]):R([]),f([]),_([])},de=t=>{const s=parseInt(t);M(s),v(null),m(null),i("tenant_id",null),d(n=>({...n,property:"",unit:"",tenant:""})),s&&K[s]?f(K[s]):f([]),_([])},ce=t=>{const s=parseInt(t);v(s),m(null),i("tenant_id",null),d(n=>({...n,unit:"",tenant:""})),s&&W[s]?_(W[s]):_([])},ue=t=>{const s=parseInt(t),n=J.find(T=>T.id===s);n&&(m(s),i("tenant_id",n.id),d(T=>({...T,tenant:""})))},E=t=>{Q(s=>({...s,[t]:!s[t]}))},I=(t,s)=>{t&&(i(s,w(t,"yyyy-MM-dd")),Q(n=>({...n,[s]:!1})))},Z=t=>{t.preventDefault(),d({city:"",property:"",unit:"",tenant:""});let s=!1;P||(d(n=>({...n,city:"Please select a city before submitting the form."})),x.current&&(x.current.focus(),x.current.scrollIntoView({behavior:"smooth",block:"center"})),s=!0),F||(d(n=>({...n,property:"Please select a property before submitting the form."})),p.current&&(p.current.focus(),p.current.scrollIntoView({behavior:"smooth",block:"center"})),s=!0),D||(d(n=>({...n,unit:"Please select a unit before submitting the form."})),b.current&&(b.current.focus(),b.current.scrollIntoView({behavior:"smooth",block:"center"})),s=!0),(!H||!a.tenant_id)&&(d(n=>({...n,tenant:"Please select a tenant before submitting the form."})),j.current&&(j.current.focus(),j.current.scrollIntoView({behavior:"smooth",block:"center"})),s=!0),!s&&re(route("move-out.store"),{onSuccess:()=>{ee(),le?.()}})},ee=()=>{ie(),q(null),M(null),v(null),m(null),d({city:"",property:"",unit:"",tenant:""}),R([]),f([]),_([]),$(!1)};return e.jsx(_e,{open:se,onOpenChange:$,modal:!1,children:e.jsx(he,{size:"half",title:"Create New Move-Out Record",children:e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsx("div",{className:"flex-1 overflow-auto p-6",children:e.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border-l-4 border-l-blue-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"city_name",className:"text-base font-semibold",children:"City *"})}),e.jsxs(N,{onValueChange:oe,value:P?.toString()||"",children:[e.jsx(y,{ref:x,children:e.jsx(C,{placeholder:"Select city"})}),e.jsx(S,{children:te?.map(t=>e.jsx(k,{value:t.id.toString(),children:t.city},t.id))||[]})]}),c.city&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.city})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-green-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"property_name",className:"text-base font-semibold",children:"Property Name *"})}),e.jsxs(N,{onValueChange:de,value:F?.toString()||"",disabled:!P,children:[e.jsx(y,{ref:p,children:e.jsx(C,{placeholder:"Select property"})}),e.jsx(S,{children:ae?.map(t=>e.jsx(k,{value:t.id.toString(),children:t.property_name},t.id))||[]})]}),c.property&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.property})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-purple-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"units_name",className:"text-base font-semibold",children:"Unit Name *"})}),e.jsxs(N,{onValueChange:ce,value:D?.toString()||"",disabled:!F,children:[e.jsx(y,{ref:b,children:e.jsx(C,{placeholder:"Select unit"})}),e.jsx(S,{children:ne?.map(t=>e.jsx(k,{value:t.id.toString(),children:t.unit_name},t.id))||[]})]}),c.unit&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.unit})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-orange-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"tenants_name",className:"text-base font-semibold",children:"Tenant Name *"})}),e.jsxs(N,{onValueChange:ue,value:H?.toString()||"",disabled:!D,children:[e.jsx(y,{ref:j,children:e.jsx(C,{placeholder:"Select tenant"})}),e.jsx(S,{children:J?.map(t=>e.jsx(k,{value:t.id.toString(),children:t.full_name},t.id))||[]})]}),c.tenant&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.tenant})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-red-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"move_out_date",className:"text-base font-semibold",children:"Move Out Date"})}),e.jsxs(U,{open:V.move_out_date,onOpenChange:()=>E("move_out_date"),children:[e.jsx(O,{asChild:!0,children:e.jsxs(h,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),a.move_out_date?w(u(a.move_out_date,"yyyy-MM-dd",new Date),"PPP"):e.jsx("span",{children:"Pick a date"})]})}),e.jsx(L,{className:"w-auto p-0",children:e.jsx(A,{mode:"single",selected:a.move_out_date?u(a.move_out_date,"yyyy-MM-dd",new Date):void 0,onSelect:t=>I(t,"move_out_date"),initialFocus:!0})})]}),l.move_out_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.move_out_date})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-yellow-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"lease_status",className:"text-base font-semibold",children:"Lease Status"})}),e.jsx(g,{id:"lease_status",value:a.lease_status,onChange:t=>i("lease_status",t.target.value),placeholder:"Enter lease status"}),l.lease_status&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.lease_status})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-teal-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"date_lease_ending_on_buildium",className:"text-base font-semibold",children:"Date Lease Ending on Buildium"})}),e.jsxs(U,{open:V.date_lease_ending_on_buildium,onOpenChange:()=>E("date_lease_ending_on_buildium"),children:[e.jsx(O,{asChild:!0,children:e.jsxs(h,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),a.date_lease_ending_on_buildium?w(u(a.date_lease_ending_on_buildium,"yyyy-MM-dd",new Date),"PPP"):e.jsx("span",{children:"Pick a date"})]})}),e.jsx(L,{className:"w-auto p-0",children:e.jsx(A,{mode:"single",selected:a.date_lease_ending_on_buildium?u(a.date_lease_ending_on_buildium,"yyyy-MM-dd",new Date):void 0,onSelect:t=>I(t,"date_lease_ending_on_buildium"),initialFocus:!0})})]}),l.date_lease_ending_on_buildium&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.date_lease_ending_on_buildium})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-cyan-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"keys_location",className:"text-base font-semibold",children:"Keys Location"})}),e.jsx(g,{id:"keys_location",value:a.keys_location,onChange:t=>i("keys_location",t.target.value),placeholder:"Enter keys location"}),l.keys_location&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.keys_location})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-indigo-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"utilities_under_our_name",className:"text-base font-semibold",children:"Utilities Under Our Name"})}),e.jsx(z,{value:a.utilities_under_our_name,onValueChange:t=>i("utilities_under_our_name",t),name:"utilities_under_our_name",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}]}),l.utilities_under_our_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.utilities_under_our_name})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-pink-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"date_utility_put_under_our_name",className:"text-base font-semibold",children:"Date Utility Put Under Our Name"})}),e.jsxs(U,{open:V.date_utility_put_under_our_name,onOpenChange:()=>E("date_utility_put_under_our_name"),children:[e.jsx(O,{asChild:!0,children:e.jsxs(h,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),a.date_utility_put_under_our_name?w(u(a.date_utility_put_under_our_name,"yyyy-MM-dd",new Date),"PPP"):e.jsx("span",{children:"Pick a date"})]})}),e.jsx(L,{className:"w-auto p-0",children:e.jsx(A,{mode:"single",selected:a.date_utility_put_under_our_name?u(a.date_utility_put_under_our_name,"yyyy-MM-dd",new Date):void 0,onSelect:t=>I(t,"date_utility_put_under_our_name"),initialFocus:!0})})]}),l.date_utility_put_under_our_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.date_utility_put_under_our_name})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-emerald-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"walkthrough",className:"text-base font-semibold",children:"Walkthrough"})}),e.jsx(Y,{id:"walkthrough",value:a.walkthrough,onChange:t=>i("walkthrough",t.target.value),placeholder:"Enter walkthrough details",className:"min-h-[100px]"}),l.walkthrough&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.walkthrough})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-lime-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"repairs",className:"text-base font-semibold",children:"Repairs"})}),e.jsx(Y,{id:"repairs",value:a.repairs,onChange:t=>i("repairs",t.target.value),placeholder:"Enter repair details",className:"min-h-[80px]"}),l.repairs&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.repairs})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-amber-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"send_back_security_deposit",className:"text-base font-semibold",children:"Send Back Security Deposit"})}),e.jsx(g,{id:"send_back_security_deposit",value:a.send_back_security_deposit,onChange:t=>i("send_back_security_deposit",t.target.value),placeholder:"Enter security deposit details"}),l.send_back_security_deposit&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.send_back_security_deposit})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-slate-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"notes",className:"text-base font-semibold",children:"Notes"})}),e.jsx(Y,{id:"notes",value:a.notes,onChange:t=>i("notes",t.target.value),placeholder:"Enter additional notes",className:"min-h-[100px]"}),l.notes&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.notes})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-violet-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"cleaning",className:"text-base font-semibold",children:"Cleaning"})}),e.jsx(z,{value:a.cleaning,onValueChange:t=>i("cleaning",t),name:"cleaning",options:[{value:"cleaned",label:"Cleaned"},{value:"uncleaned",label:"Uncleaned"}]}),l.cleaning&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.cleaning})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-rose-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"list_the_unit",className:"text-base font-semibold",children:"List the Unit"})}),e.jsx(g,{id:"list_the_unit",value:a.list_the_unit,onChange:t=>i("list_the_unit",t.target.value),placeholder:"Enter unit listing details"}),l.list_the_unit&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.list_the_unit})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-fuchsia-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"move_out_form",className:"text-base font-semibold",children:"Move Out Form"})}),e.jsx(z,{value:a.move_out_form,onValueChange:t=>i("move_out_form",t),name:"move_out_form",options:[{value:"filled",label:"Filled"},{value:"not filled",label:"Not Filled"}]}),l.move_out_form&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.move_out_form})]})]})}),e.jsx(xe,{children:e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsx(h,{type:"button",variant:"outline",onClick:ee,className:"flex-1",children:"Cancel"}),e.jsx(h,{type:"submit",onClick:Z,disabled:X,className:"flex-1",children:X?"Creating...":"Create Move-Out Record"})]})})]})})})}export{Oe as default};
