import{r as A,a as D,j as e,H as E,L as g,b as p}from"./app-BeBll9N2.js";import{u as S,A as I}from"./app-layout-BGkTWyBp.js";import{B as m}from"./app-logo-icon-ChDn-po9.js";import{I as f}from"./input-pGboiffo.js";import{C as d,c as n,a as B,b as H}from"./card-CsOYtxUe.js";import{P as F,T as L,a as z,b as v,c as s,d as M,e as t,f as R}from"./table-5I5IhXjo.js";import{B as i}from"./badge-DPlL8fW2.js";import{E as q}from"./eye-BrfsCLjy.js";import{S as $}from"./square-pen-RCIz_Pkp.js";import"./app-DSIzZYCB.js";import"./index-DRR4QPqT.js";import"./index-DleRhxLJ.js";function te({auth:G,properties:a,statistics:u,filters:y}){const{hasPermission:j,hasAnyPermission:b,hasAllPermissions:N}=S(),[o,w]=A.useState(y),{flash:c}=D().props,x=(r,l)=>{const h={...o,[r]:l};w(h),p.get(route("properties-info.index"),h,{preserveState:!0,preserveScroll:!0})},_=r=>{confirm("Are you sure you want to delete this property?")&&p.delete(route("properties-info.destroy",r.id))},C=r=>r.status==="Expired"?e.jsx(i,{variant:"destructive",children:"Expired"}):e.jsx(i,{variant:"default",className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",children:"Active"}),P=r=>r<0?e.jsxs(i,{variant:"destructive",children:[Math.abs(r)," days overdue"]}):r<=30?e.jsxs(i,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",children:[r," days left"]}):e.jsxs(i,{variant:"default",className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",children:[r," days left"]}),T=r=>{const l=new Date,k=new Date(r).getTime()-l.getTime();return Math.ceil(k/(1e3*60*60*24))};return e.jsxs(I,{children:[e.jsx(E,{title:"Properties Insurance"}),e.jsx("div",{className:"py-12 bg-background text-foreground transition-colors min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[c?.success&&e.jsx(d,{className:"mb-4 border-green-200 bg-green-50 dark:bg-green-950 dark:border-green-800",children:e.jsx(n,{className:"p-4",children:e.jsx("div",{className:"text-green-700 dark:text-green-300",children:c.success})})}),c?.error&&e.jsx(d,{className:"mb-4 border-red-200 bg-red-50 dark:bg-red-950 dark:border-red-800",children:e.jsx(n,{className:"p-4",children:e.jsx("div",{className:"text-red-700 dark:text-red-300",children:c.error})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx(d,{className:"bg-card text-card-foreground",children:e.jsxs(n,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Total Properties"}),e.jsx("p",{className:"text-3xl font-bold text-primary",children:u.total})]})}),e.jsx(d,{className:"bg-card text-card-foreground",children:e.jsxs(n,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Active"}),e.jsx("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:u.active})]})}),e.jsx(d,{className:"bg-card text-card-foreground",children:e.jsxs(n,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Expired"}),e.jsx("p",{className:"text-3xl font-bold text-destructive",children:u.expired})]})})]}),e.jsxs(d,{className:"bg-card text-card-foreground shadow-lg",children:[e.jsxs(B,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(H,{className:"text-2xl",children:"Property Insurance List"}),N(["properties.create","properties.store"])&&e.jsx(g,{href:route("properties-info.create"),children:e.jsxs(m,{children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Add Property"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-4",children:[e.jsx(f,{type:"text",placeholder:"Property Name",value:o.property_name||"",onChange:r=>x("property_name",r.target.value),className:"bg-input text-input-foreground"}),e.jsx(f,{type:"text",placeholder:"Insurance Company",value:o.insurance_company_name||"",onChange:r=>x("insurance_company_name",r.target.value),className:"bg-input text-input-foreground"}),e.jsx(f,{type:"text",placeholder:"Policy Number",value:o.policy_number||"",onChange:r=>x("policy_number",r.target.value),className:"bg-input text-input-foreground"}),e.jsxs("select",{value:o.status||"",onChange:r=>x("status",r.target.value),className:"flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Expired",children:"Expired"})]})]})]}),e.jsxs(n,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(L,{children:[e.jsx(z,{children:e.jsxs(v,{className:"border-border",children:[e.jsx(s,{className:"text-muted-foreground",children:"Property Name"}),e.jsx(s,{className:"text-muted-foreground",children:"Insurance Company"}),e.jsx(s,{className:"text-muted-foreground",children:"Amount"}),e.jsx(s,{className:"text-muted-foreground",children:"Effective Date"}),e.jsx(s,{className:"text-muted-foreground",children:"Policy Number"}),e.jsx(s,{className:"text-muted-foreground",children:"Expiration Date"}),e.jsx(s,{className:"text-muted-foreground",children:"Days Left"}),e.jsx(s,{className:"text-muted-foreground",children:"Status"}),b(["properties.destroy","properties.update","properties.edit","properties.show"])&&e.jsx(s,{className:"text-muted-foreground",children:"Actions"})]})}),e.jsx(M,{children:a.data.map(r=>e.jsxs(v,{className:"hover:bg-muted/50 border-border",children:[e.jsx(t,{className:"font-medium text-foreground",children:r.property_name}),e.jsx(t,{className:"text-foreground",children:r.insurance_company_name}),e.jsx(t,{className:"text-foreground",children:r.formatted_amount}),e.jsx(t,{className:"text-foreground",children:r.effective_date}),e.jsx(t,{className:"text-foreground",children:r.policy_number}),e.jsx(t,{className:"text-foreground",children:r.expiration_date}),e.jsx(t,{children:P(T(r.expiration_date))}),e.jsx(t,{children:C(r)}),b(["properties.destroy","properties.update","properties.edit","properties.show"])&&e.jsx(t,{children:e.jsxs("div",{className:"flex gap-1",children:[j("properties.show")&&e.jsx(g,{href:route("properties-info.show",r.id),children:e.jsx(m,{variant:"outline",size:"sm",children:e.jsx(q,{className:"h-4 w-4"})})}),N(["properties.update","properties.edit"])&&e.jsx(g,{href:route("properties-info.edit",r.id),children:e.jsx(m,{variant:"outline",size:"sm",children:e.jsx($,{className:"h-4 w-4"})})}),j("properties.destroy")&&e.jsx(m,{variant:"outline",size:"sm",onClick:()=>_(r),className:"text-destructive hover:text-destructive hover:bg-destructive/10 border-destructive/20",children:e.jsx(R,{className:"h-4 w-4"})})]})})]},r.id))})]})}),a.data.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx("p",{className:"text-lg",children:"No properties found."}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search criteria."})]}),a.last_page>1&&e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx("nav",{className:"flex space-x-2",children:a.links.map((r,l)=>e.jsx("button",{onClick:()=>r.url&&p.get(r.url),disabled:!r.url,className:`px-3 py-2 text-sm rounded transition-colors ${r.active?"bg-primary text-primary-foreground":r.url?"bg-secondary text-secondary-foreground hover:bg-secondary/80":"bg-muted text-muted-foreground cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:r.label}},l))})}),a.meta&&e.jsx("div",{className:"mt-6 flex justify-between items-center border-t border-border pt-4",children:e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",a.meta.from||0," to ",a.meta.to||0," of ",a.meta.total||0," results"]})})]})]})]})})]})}export{te as default};
