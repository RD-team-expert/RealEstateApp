import{r as n,b as w,j as e}from"./app-BkyZySAt.js";import{B as _}from"./button-DOkiOPMq.js";import{D,a as F,b as P}from"./drawer-BQHCt03g.js";import{I as x}from"./input-nS05NghJ.js";import{L as c}from"./label-BCoYkVMj.js";import{S as k,a as I,b as L,c as A,d as G}from"./select-RK3poDcU.js";import{R as B}from"./radioGroup-DeV4OTT4.js";import"./app-oDNfBSri.js";import"./index-DJP-tLWC.js";import"./utils-CBfrqCZ4.js";import"./index-B_abII33.js";import"./index-Dc_FVRD7.js";import"./index-D86DOQfL.js";import"./index-Zsm6T9Ra.js";import"./index-DBw3aPE3.js";import"./index-CSRjvr9u.js";import"./index-CEATnq5y.js";import"./index-m091_WFs.js";import"./index-DzIcFn8W.js";import"./x-B9Nlqjs5.js";import"./createLucideIcon-D3eUMA-Y.js";import"./index-DvetPajZ.js";import"./index-DEy3YO5y.js";import"./index-B2wSjM2m.js";import"./index-DCBTnY57.js";import"./index-DsMWzC3p.js";import"./chevron-down-BKwinLVR.js";import"./check-MTPBeqEd.js";import"./chevron-up-CJrmsHZ1.js";function be({vendor:t,cities:h,open:g,onOpenChange:u,onSuccess:N}){const d=n.useRef(null),p=n.useRef(null),[f,m]=n.useState(""),[v,o]=n.useState(""),[,b]=n.useState(""),{data:s,setData:l,put:S,processing:y,errors:a}=w({city_id:t?.city_id?.toString()||"",vendor_name:t?.vendor_name||"",number:t?.number||"",email:t?.email||"",service_type:t?.service_type||""});n.useEffect(()=>{if(t){const r=t.city_id?.toString()||"",i=t.city?.city||"";l({city_id:r,vendor_name:t.vendor_name,number:t.number||"",email:t.email||"",service_type:t.service_type||""}),b(i)}},[t]);const C=r=>{l("city_id",r);const i=h.find(R=>R.id.toString()===r);b(i?i.city:""),m("")},V=r=>{l("vendor_name",r.target.value),o("")},j=r=>{if(r.preventDefault(),!t)return;m(""),o("");let i=!1;(!s.city_id||s.city_id.trim()==="")&&(m("Please select a city before submitting the form."),d.current&&(d.current.focus(),d.current.scrollIntoView({behavior:"smooth",block:"center"})),i=!0),(!s.vendor_name||s.vendor_name.trim()==="")&&(o("Please enter a vendor name before submitting the form."),p.current&&(p.current.focus(),p.current.scrollIntoView({behavior:"smooth",block:"center"})),i=!0),!i&&S(route("vendors.update",t.id),{onSuccess:()=>{m(""),o(""),u(!1),N?.()}})},E=()=>{if(t){const r=t.city_id?.toString()||"",i=t.city?.city||"";l({city_id:r,vendor_name:t.vendor_name,number:t.number||"",email:t.email||"",service_type:t.service_type||""}),b(i)}m(""),o(""),u(!1)};return t?e.jsx(D,{open:g,onOpenChange:u,modal:!1,children:e.jsx(F,{size:"half",title:`Edit Vendor - ${t.vendor_name}`,children:e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsx("div",{className:"flex-1 overflow-auto p-6",children:e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border-l-4 border-l-blue-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(c,{htmlFor:"city_id",className:"text-base font-semibold",children:"City *"})}),e.jsxs(k,{onValueChange:C,value:s.city_id,children:[e.jsx(I,{ref:d,children:e.jsx(L,{placeholder:"Select a city"})}),e.jsx(A,{children:h?.map(r=>e.jsx(G,{value:r.id.toString(),children:r.city},r.id))||[]})]}),a.city_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.city_id}),f&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:f})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-green-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(c,{htmlFor:"vendor_name",className:"text-base font-semibold",children:"Vendor Name *"})}),e.jsx(x,{ref:p,id:"vendor_name",value:s.vendor_name,onChange:V,placeholder:"Enter vendor name"}),a.vendor_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.vendor_name}),v&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:v})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-purple-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(c,{htmlFor:"number",className:"text-base font-semibold",children:"Phone Number"})}),e.jsx(x,{id:"number",value:s.number,onChange:r=>l("number",r.target.value),placeholder:"Enter phone number"}),a.number&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.number})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-orange-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(c,{htmlFor:"email",className:"text-base font-semibold",children:"Email Address"})}),e.jsx(x,{id:"email",type:"email",value:s.email,onChange:r=>l("email",r.target.value),placeholder:"vendor@example.com"}),a.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.email})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-emerald-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(c,{htmlFor:"service_type",className:"text-base font-semibold",children:"Service Type"})}),e.jsx(B,{value:s.service_type,onValueChange:r=>l("service_type",r),name:"service_type",className:"grid grid-cols-2 gap-4",options:[{value:"Maintenance",label:"Maintenance"},{value:"Appliances",label:"Appliances"},{value:"Pest control",label:"Pest control"},{value:"HVAC Repairs",label:"HVAC Repairs"},{value:"Plumbing",label:"Plumbing"},{value:"Landscaping",label:"Landscaping"},{value:"Lock Smith",label:"Lock Smith"},{value:"Garage door",label:"Garage door"}]}),a.service_type&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.service_type})]})]})}),e.jsxs(P,{className:"flex-row justify-end gap-2 border-t bg-muted/50 p-4",children:[e.jsx(_,{type:"button",variant:"outline",onClick:E,children:"Cancel"}),e.jsx(_,{type:"submit",onClick:j,disabled:y,children:y?"Updating...":"Update Vendor"})]})]})})}):null}export{be as default};
