import{r as n,b as J,j as e}from"./app-CHDKARjb.js";import{B as k}from"./button-DVMLQ4Cf.js";import{I as x}from"./input-CESuFFYh.js";import{L as l}from"./label-DcQ_-sMZ.js";import{D as K,a as M,b as Q}from"./drawer-DBQSSrTa.js";import{B as W}from"./building-2-DomSuNJ6.js";import{S as X}from"./shield-DZk6mm_U.js";import{D as Y}from"./dollar-sign-C6zNmobC.js";import{F as Z}from"./file-text-Ia3zVVV6.js";import{C as P}from"./calendar-DnRZTeuR.js";import"./app-BmbQfT0_.js";import"./index-DzrNkgKa.js";import"./utils-CBfrqCZ4.js";import"./index-DzT3tnb6.js";import"./index-DH5c0sFq.js";import"./index-Dc_FVRD7.js";import"./index-BMM8wKPv.js";import"./index-DhGOy-yS.js";import"./index-Bc-3DsyS.js";import"./index-q1apwmMP.js";import"./index-0tk3grE1.js";import"./index-DfGTd3cq.js";import"./x-DzxxLS5y.js";import"./createLucideIcon-C7c1hvIj.js";function Ne({open:F,onOpenChange:g,property:t,availableProperties:B=[],onSuccess:E}){const[C,c]=n.useState(""),[w,m]=n.useState(""),[D,d]=n.useState(""),[V,u]=n.useState(""),[I,p]=n.useState(""),[S,f]=n.useState(""),h=n.useRef(null),b=n.useRef(null),_=n.useRef(null),v=n.useRef(null),j=n.useRef(null),y=n.useRef(null),{data:a,setData:o,put:A,processing:N,errors:i,clearErrors:U}=J({property_id:t.property_id,insurance_company_name:t.insurance_company_name,amount:t.amount.toString(),policy_number:t.policy_number,effective_date:t.effective_date,expiration_date:t.expiration_date});n.useEffect(()=>{t&&o({property_id:t.property_id,insurance_company_name:t.insurance_company_name,amount:t.amount.toString(),policy_number:t.policy_number,effective_date:t.effective_date,expiration_date:t.expiration_date})},[t]);const L=r=>{o("property_id",parseInt(r.target.value)),c("")},$=r=>{o("insurance_company_name",r.target.value),m("")},z=r=>{o("amount",r.target.value),d("")},T=r=>{o("policy_number",r.target.value),u("")},q=r=>{o("effective_date",r.target.value),p("")},G=r=>{o("expiration_date",r.target.value),f("")},R=r=>{r.preventDefault(),c(""),m(""),d(""),u(""),p(""),f("");let s=!1;(!a.property_id||a.property_id===0)&&(c("Please select a property before submitting the form."),h.current&&(h.current.focus(),h.current.scrollIntoView({behavior:"smooth",block:"center"})),s=!0),(!a.insurance_company_name||a.insurance_company_name.trim()==="")&&(m("Please enter an insurance company name before submitting the form."),b.current&&!s&&(b.current.focus(),b.current.scrollIntoView({behavior:"smooth",block:"center"})),s=!0),(!a.amount||a.amount.trim()==="")&&(d("Please enter an amount before submitting the form."),_.current&&!s&&(_.current.focus(),_.current.scrollIntoView({behavior:"smooth",block:"center"})),s=!0),(!a.policy_number||a.policy_number.trim()==="")&&(u("Please enter a policy number before submitting the form."),v.current&&!s&&(v.current.focus(),v.current.scrollIntoView({behavior:"smooth",block:"center"})),s=!0),(!a.effective_date||a.effective_date.trim()==="")&&(p("Please select an effective date before submitting the form."),j.current&&!s&&(j.current.focus(),j.current.scrollIntoView({behavior:"smooth",block:"center"})),s=!0),(!a.expiration_date||a.expiration_date.trim()==="")&&(f("Please select an expiration date before submitting the form."),y.current&&!s&&(y.current.focus(),y.current.scrollIntoView({behavior:"smooth",block:"center"})),s=!0),!s&&A(route("properties-info.update",t.id),{onSuccess:()=>{c(""),m(""),d(""),u(""),p(""),f(""),g(!1),E&&E()},onError:()=>{}})},H=()=>{o({property_id:t.property_id,insurance_company_name:t.insurance_company_name,amount:t.amount.toString(),policy_number:t.policy_number,effective_date:t.effective_date,expiration_date:t.expiration_date}),U(),c(""),m(""),d(""),u(""),p(""),f(""),g(!1)};return e.jsx(K,{open:F,onOpenChange:g,modal:!1,children:e.jsx(M,{size:"half",title:`Edit Property - ${t.property?.property_name||"Unknown"}`,children:e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsx("div",{className:"flex-1 overflow-auto p-6",children:e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border-l-4 border-l-blue-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsxs(l,{htmlFor:"property_id",className:"text-base font-semibold",children:[e.jsx(W,{className:"h-4 w-4 inline mr-1"}),"Property *"]})}),e.jsxs("select",{ref:h,id:"property_id",value:a.property_id||"",onChange:L,className:"flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Select a property..."}),B.map(r=>e.jsxs("option",{value:r.id,children:[r.property_name,r.city_id&&` (${r.city_id})`]},r.id))]}),i.property_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.property_id}),C&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:C})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-green-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsxs(l,{htmlFor:"insurance_company_name",className:"text-base font-semibold",children:[e.jsx(X,{className:"h-4 w-4 inline mr-1"}),"Insurance Company *"]})}),e.jsx(x,{ref:b,id:"insurance_company_name",value:a.insurance_company_name,onChange:$,placeholder:"Enter insurance company name"}),i.insurance_company_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.insurance_company_name}),w&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:w})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"rounded-lg border-l-4 border-l-emerald-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsxs(l,{htmlFor:"amount",className:"text-base font-semibold",children:[e.jsx(Y,{className:"h-4 w-4 inline mr-1"}),"Amount *"]})}),e.jsx(x,{ref:_,id:"amount",type:"number",step:"0.01",min:"0",value:a.amount,onChange:z,placeholder:"0.00"}),i.amount&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.amount}),D&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:D})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-pink-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsxs(l,{htmlFor:"policy_number",className:"text-base font-semibold",children:[e.jsx(Z,{className:"h-4 w-4 inline mr-1"}),"Policy Number *"]})}),e.jsx(x,{ref:v,id:"policy_number",value:a.policy_number,onChange:T,placeholder:"Enter policy number"}),i.policy_number&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.policy_number}),V&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:V})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"rounded-lg border-l-4 border-l-indigo-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsxs(l,{htmlFor:"effective_date",className:"text-base font-semibold",children:[e.jsx(P,{className:"h-4 w-4 inline mr-1"}),"Effective Date *"]})}),e.jsx(x,{ref:j,id:"effective_date",type:"date",value:a.effective_date,onChange:q}),i.effective_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.effective_date}),I&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:I})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-teal-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsxs(l,{htmlFor:"expiration_date",className:"text-base font-semibold",children:[e.jsx(P,{className:"h-4 w-4 inline mr-1"}),"Expiration Date *"]})}),e.jsx(x,{ref:y,id:"expiration_date",type:"date",value:a.expiration_date,onChange:G}),i.expiration_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.expiration_date}),S&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:S})]})]})]})}),e.jsx(Q,{children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(k,{type:"button",variant:"outline",onClick:H,disabled:N,children:"Cancel"}),e.jsx(k,{type:"submit",onClick:R,disabled:N,children:N?"Updating...":"Update Property"})]})})]})})})}export{Ne as default};
