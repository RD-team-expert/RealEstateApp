import{r as l,j as t}from"./app-B8FMPvUf.js";import{B as h}from"./button-DIZZiQM7.js";import{a as z}from"./card-EXxUjTX3.js";import{I as u}from"./input-DGLwPUn8.js";import{S as B}from"./search-CLz9Z_Gu.js";import{X as T}from"./x-krc9GB28.js";import"./app-BrEbHAEe.js";import"./index-C_zQ9kkn.js";import"./index-CdJFUDDL.js";import"./utils-CBfrqCZ4.js";import"./createLucideIcon-C8-5KvOO.js";function G({cities:x,properties:v,units:g,initialFilters:y,onSearch:b,onClear:w,hasActiveFilters:j}){const[o,p]=l.useState(y),[C,a]=l.useState(!1),[N,i]=l.useState(!1),[S,c]=l.useState(!1),F=l.useRef(null),D=l.useRef(null),R=l.useRef(null),d=x.map(e=>e.city).filter((e,r,s)=>s.indexOf(e)===r).filter(e=>e.toLowerCase().includes(o.city.toLowerCase())),m=v.map(e=>e.property_name).filter((e,r,s)=>s.indexOf(e)===r).filter(e=>e.toLowerCase().includes(o.property.toLowerCase())),f=Array.from(new Set(g.map(e=>e.unit_name))).filter(e=>e.toLowerCase().includes(o.unit.toLowerCase())),n=(e,r)=>{p(s=>({...s,[e]:r}))},I=e=>{e.preventDefault();const{city:r,property:s,unit:L}=o;b({city:r,property:s,unit:L})};return t.jsx(z,{children:t.jsx("form",{onSubmit:I,children:t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-5",children:[t.jsxs("div",{className:"relative",children:[t.jsx(u,{ref:F,type:"text",placeholder:"Filter by city...",value:o.city,onChange:e=>{const r=e.target.value;n("city",r),a(!0)},onFocus:()=>a(!0),onBlur:()=>setTimeout(()=>a(!1),200),className:"text-input-foreground bg-input"}),C&&d.length>0&&t.jsx("div",{className:"absolute top-full right-0 left-0 z-50 mb-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:d.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>{n("city",e),a(!1)},children:e},e))})]}),t.jsxs("div",{className:"relative",children:[t.jsx(u,{ref:D,type:"text",placeholder:"Filter by property...",value:o.property,onChange:e=>{const r=e.target.value;n("property",r),i(!0)},onFocus:()=>i(!0),onBlur:()=>setTimeout(()=>i(!1),200),className:"text-input-foreground bg-input"}),N&&m.length>0&&t.jsx("div",{className:"absolute top-full right-0 left-0 z-50 mb-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:m.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>{n("property",e),i(!1)},children:e},e))})]}),t.jsxs("div",{className:"relative",children:[t.jsx(u,{ref:R,type:"text",placeholder:"Filter by unit...",value:o.unit,onChange:e=>{const r=e.target.value;n("unit",r),c(!0)},onFocus:()=>c(!0),onBlur:()=>setTimeout(()=>c(!1),200),className:"text-input-foreground bg-input"}),S&&f.length>0&&t.jsx("div",{className:"absolute top-full right-0 left-0 z-50 mb-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:f.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>{n("unit",e),c(!1)},children:e},e))})]}),t.jsx("div",{className:"flex gap-2 md:col-span-2",children:t.jsx(h,{type:"submit",size:"sm",children:t.jsx(B,{className:"h-4 w-4"})})}),t.jsx("div",{className:"flex justify-end",children:t.jsxs(h,{type:"button",variant:"outline",onClick:()=>{p({city:"",property:"",unit:""}),a(!1),i(!1),c(!1),w()},size:"sm",className:"flex items-center",disabled:!j,children:[t.jsx(T,{className:"mr-2 h-4 w-4"}),"Clear"]})})]})})})}export{G as default};
