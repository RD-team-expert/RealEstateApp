import{r as n,j as e}from"./app-XlMZG7vD.js";import{L as h}from"./label-BKN3erGN.js";import{B as f}from"./button-D56PIbu9.js";import{P as b,a as g,b as N}from"./popover-DR8Y8CsW.js";import{C as S,a as w,b as v,c as C,d as y,e as O}from"./command-DGwO2Uw9.js";import{I as ne}from"./input-nhBJFe9F.js";import{c as L}from"./utils-CBfrqCZ4.js";import{C as T}from"./chevrons-up-down-CmSv9Nzf.js";import{C as _}from"./check-ZO7ekD6P.js";import"./app-D9zByHv3.js";import"./index-pZGqFUGS.js";import"./index-D09_T-bu.js";import"./index-CdJFUDDL.js";import"./index-C_K36Fy_.js";import"./index-DqP218B8.js";import"./index-D2DcuX69.js";import"./index-BoN4SSkO.js";import"./index-CTF06pqo.js";import"./index-CUT4GDty.js";import"./search-BKBHV1D6.js";import"./createLucideIcon-BneQKrth.js";function ye({hierarchicalData:x,cityId:o,propertyId:i,unitId:l,tenantId:P,otherTenants:A,onCityChange:H,onPropertyChange:J,onUnitChange:K,onTenantChange:Q,onOtherTenantsChange:F,errors:c,validationErrors:d,cityRef:V,propertyRef:W,unitRef:X,tenantRef:Z}){const m=n.useMemo(()=>{if(!o)return[];const t=x.find(s=>s.id.toString()===o);return t?t.properties:[]},[x,o]),p=n.useMemo(()=>{if(!i)return[];const t=m.find(s=>s.id.toString()===i);return t?t.units:[]},[m,i]),a=n.useMemo(()=>{if(!l)return[];const t=p.find(s=>s.id.toString()===l);return t?t.tenants:[]},[p,l]),[M,U]=n.useState(!1),[k,B]=n.useState(!1),[z,G]=n.useState(!1),[R,Y]=n.useState(!1),$=n.useMemo(()=>{const t=x.find(s=>s.id.toString()===o);return t?t.name:""},[x,o]),D=n.useMemo(()=>{const t=m.find(s=>s.id.toString()===i);return t?t.name:""},[m,i]),E=n.useMemo(()=>{const t=p.find(s=>s.id.toString()===l);return t?t.name:""},[p,l]),I=n.useMemo(()=>{const t=a.find(s=>s.id.toString()===P);return t?t.name:""},[a,P]),[ee,u]=n.useState(!1),[q,j]=n.useState(a);n.useMemo(()=>{j(a)},[a]);const te=t=>{if(F(t),t.trim()==="")j(a);else{const s=a.filter(r=>r.name.toLowerCase().includes(t.toLowerCase())||r.first_name.toLowerCase().includes(t.toLowerCase())||r.last_name.toLowerCase().includes(t.toLowerCase()));j(s)}u(!0)},se=t=>{F(t.name),u(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"rounded-lg border-l-4 border-l-indigo-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(h,{htmlFor:"city",className:"text-base font-semibold",children:"City *"})}),e.jsxs(b,{open:M,onOpenChange:U,children:[e.jsx(g,{asChild:!0,children:e.jsxs(f,{ref:V,role:"combobox","aria-expanded":M,variant:"outline",className:"w-full justify-between text-left font-normal",children:[$||"Select city",e.jsx(T,{className:"ml-2 h-4 w-4 opacity-50"})]})}),e.jsx(N,{className:"w-[var(--radix-popover-trigger-width)] p-0",align:"start",children:e.jsxs(S,{children:[e.jsx(w,{placeholder:"Search city..."}),e.jsxs(v,{children:[e.jsx(C,{children:"No city found."}),e.jsx(y,{children:x.map(t=>{const s=t.id.toString(),r=o===s;return e.jsxs(O,{value:t.name,onSelect:()=>{H(s),U(!1)},children:[e.jsx(_,{className:L("mr-2 h-4 w-4",r?"opacity-100":"opacity-0")}),t.name]},t.id)})})]})]})})]}),c.city_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.city_id}),d.city&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.city})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-blue-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(h,{htmlFor:"property",className:"text-base font-semibold",children:"Property *"})}),e.jsxs(b,{open:k,onOpenChange:B,children:[e.jsx(g,{asChild:!0,children:e.jsxs(f,{ref:W,role:"combobox","aria-expanded":k,variant:"outline",className:"w-full justify-between text-left font-normal",disabled:!o||m.length===0,children:[D||(o?m.length===0?"No properties available":"Select property":"Select city first"),e.jsx(T,{className:"ml-2 h-4 w-4 opacity-50"})]})}),e.jsx(N,{className:"w-[var(--radix-popover-trigger-width)] p-0",align:"start",children:e.jsxs(S,{children:[e.jsx(w,{placeholder:"Search property..."}),e.jsxs(v,{children:[e.jsx(C,{children:"No property found."}),e.jsx(y,{children:m.map(t=>{const s=t.id.toString(),r=i===s;return e.jsxs(O,{value:t.name,onSelect:()=>{J(s),B(!1)},children:[e.jsx(_,{className:L("mr-2 h-4 w-4",r?"opacity-100":"opacity-0")}),t.name]},t.id)})})]})]})})]}),c.property_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.property_id}),d.property&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.property})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-green-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(h,{htmlFor:"unit",className:"text-base font-semibold",children:"Unit *"})}),e.jsxs(b,{open:z,onOpenChange:G,children:[e.jsx(g,{asChild:!0,children:e.jsxs(f,{ref:X,role:"combobox","aria-expanded":z,variant:"outline",className:"w-full justify-between text-left font-normal",disabled:!i||p.length===0,children:[E||(i?p.length===0?"No units available":"Select unit":"Select property first"),e.jsx(T,{className:"ml-2 h-4 w-4 opacity-50"})]})}),e.jsx(N,{className:"w-[var(--radix-popover-trigger-width)] p-0",align:"start",children:e.jsxs(S,{children:[e.jsx(w,{placeholder:"Search unit..."}),e.jsxs(v,{children:[e.jsx(C,{children:"No unit found."}),e.jsx(y,{children:p.map(t=>{const s=t.id.toString(),r=l===s;return e.jsxs(O,{value:t.name,onSelect:()=>{K(s),G(!1)},children:[e.jsx(_,{className:L("mr-2 h-4 w-4",r?"opacity-100":"opacity-0")}),t.name]},t.id)})})]})]})})]}),c.unit_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.unit_id}),d.unit&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.unit})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-purple-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(h,{htmlFor:"tenant",className:"text-base font-semibold",children:"Tenant *"})}),e.jsxs(b,{open:R,onOpenChange:Y,children:[e.jsx(g,{asChild:!0,children:e.jsxs(f,{ref:Z,role:"combobox","aria-expanded":R,variant:"outline",className:"w-full justify-between text-left font-normal",disabled:!l||a.length===0,children:[I||(l?a.length===0?"No tenants available":"Select tenant":"Select unit first"),e.jsx(T,{className:"ml-2 h-4 w-4 opacity-50"})]})}),e.jsx(N,{className:"w-[var(--radix-popover-trigger-width)] p-0",align:"start",children:e.jsxs(S,{children:[e.jsx(w,{placeholder:"Search tenant..."}),e.jsxs(v,{children:[e.jsx(C,{children:"No tenant found."}),e.jsx(y,{children:a.map(t=>{const s=t.id.toString(),r=P===s;return e.jsxs(O,{value:t.name,onSelect:()=>{Q(s),Y(!1)},children:[e.jsx(_,{className:L("mr-2 h-4 w-4",r?"opacity-100":"opacity-0")}),t.name]},t.id)})})]})]})})]}),c.tenant_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.tenant_id}),d.tenant&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.tenant})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-pink-500 p-4",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx(h,{htmlFor:"other_tenants",className:"text-base font-semibold",children:"Other Tenant Names"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"You can select from the dropdown or type custom names"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ne,{id:"other_tenants",type:"text",placeholder:"Type tenant names or select from dropdown",value:A,onChange:t=>te(t.target.value),onFocus:()=>{j(a),u(a.length>0)},onBlur:()=>{setTimeout(()=>u(!1),200)},disabled:!l||a.length===0,className:"w-full"}),ee&&q.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:q.map(t=>e.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>se(t),children:t.name},t.id))})]})]})]})}export{ye as default};
