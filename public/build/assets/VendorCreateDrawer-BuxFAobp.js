import{r as d,b as A,j as r}from"./app-IncGAUEB.js";import{B as E}from"./button-BZreYh_c.js";import{D as I,a as L,b as Q}from"./drawer-BabOL_dj.js";import U from"./CityField-Dlat-XxC.js";import W from"./VendorNameField-B_yddmSO.js";import $ from"./PhoneNumberField-BOMTJ2iA.js";import G from"./EmailField-2ItKoUme.js";import H from"./ServiceTypeField-Cn5zfcdU.js";import"./app-DgqXL21p.js";import"./index-bCzQdt7o.js";import"./index-CdJFUDDL.js";import"./utils-CBfrqCZ4.js";import"./index-CfKQ6yNG.js";import"./index-BWcAjI1y.js";import"./index-D0fQOWIr.js";import"./index-yZxLUvKN.js";import"./index-iNsZkCT-.js";import"./index-6KC1G_4u.js";import"./x-B_qSqN6z.js";import"./createLucideIcon-Ci0S1m_Z.js";import"./label-BhALl-XJ.js";import"./popover-D0q3r5CP.js";import"./index-DfBxMdWp.js";import"./command-AnX11QHu.js";import"./search-CFDkSiim.js";import"./input-BKi6rfRv.js";import"./plus-BVjqVSDl.js";import"./trash-2-DcRRmtsX.js";import"./select-BqJlafxu.js";import"./index-Dc_FVRD7.js";import"./index-X0Rqfk2m.js";import"./index-DfV2_jol.js";import"./index-DizBXXCV.js";import"./chevron-down-uas8HWR-.js";import"./check-gd2_wZBq.js";import"./chevron-up-DtKhYrlV.js";function Fe({cities:g,open:w,onOpenChange:h,onSuccess:S}){const p=d.useRef(null),u=d.useRef(null),[V,n]=d.useState(""),[N,a]=d.useState(""),[,v]=d.useState(""),{data:t,setData:s,post:F,processing:x,errors:i,reset:C,transform:D}=A({city_id:"",vendor_name:"",number:[],email:[],service_type:[]}),y=e=>{if(i[e])return i[e];const o=Object.keys(i).find(m=>m.startsWith(`${e}.`));if(o)return i[o]},R=e=>{s("city_id",e);const o=g.find(m=>m.id.toString()===e);v(o?o.city:""),n("")},k=e=>{s("vendor_name",e.target.value),a("")},P=e=>{s("number",e)},B=e=>{s("email",e)},T=e=>{s("service_type",e)},j=e=>{e.preventDefault(),n(""),a("");let o=!1;if((!t.city_id||t.city_id.trim()==="")&&(n("Please select a city before submitting the form."),p.current&&(p.current.focus(),p.current.scrollIntoView({behavior:"smooth",block:"center"})),o=!0),(!t.vendor_name||t.vendor_name.trim()==="")&&(a("Please enter a vendor name before submitting the form."),u.current&&(u.current.focus(),u.current.scrollIntoView({behavior:"smooth",block:"center"})),o=!0),o)return;const m=()=>{try{const _=new URLSearchParams(window.location.search),f=["city","city_id","vendor_name","number","email","per_page","page"],l={};return f.forEach(b=>{const c=_.get(b);c!==null&&(l[b]=c)}),l}catch{return{}}};D(_=>{const f=m(),l={};return[["city","filter_city"],["city_id","filter_city_id"],["vendor_name","filter_vendor_name"],["number","filter_number"],["email","filter_email"],["per_page","filter_per_page"],["page","filter_page"]].forEach(([c,z])=>{f[c]!==void 0&&(l[z]=f[c])}),{..._,...l}}),F(route("vendors.store"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{C(),v(""),n(""),a(""),h(!1),S?.()}})},q=()=>{C(),v(""),n(""),a(""),h(!1)};return r.jsx(I,{open:w,onOpenChange:h,modal:!1,children:r.jsx(L,{size:"half",title:"Create New Vendor",children:r.jsxs("div",{className:"flex h-full flex-col",children:[r.jsx("div",{className:"flex-1 overflow-auto p-6",children:r.jsxs("form",{onSubmit:j,className:"space-y-4",children:[r.jsx(U,{cities:g,value:t.city_id,onChange:R,error:i.city_id,validationError:V,ref:p}),r.jsx(W,{value:t.vendor_name,onChange:k,error:i.vendor_name,validationError:N,ref:u}),r.jsx($,{value:t.number,onChange:P,error:y("number")}),r.jsx(G,{value:t.email,onChange:B,error:y("email")}),r.jsx(H,{value:t.service_type,onChange:T,error:y("service_type")})]})}),r.jsxs(Q,{className:"flex-row justify-end gap-2 border-t bg-muted/50 p-4",children:[r.jsx(E,{type:"button",variant:"outline",onClick:q,children:"Cancel"}),r.jsx(E,{type:"submit",onClick:j,disabled:x,children:x?"Creating...":"Create Vendor"})]})]})})})}export{Fe as default};
