import{r as n,b as K,a as f,j as e,H as O}from"./app-CHDKARjb.js";import{u as Q,A as V}from"./app-layout-Cz-niD8H.js";import{B as x}from"./button-DVMLQ4Cf.js";import{I as y}from"./input-CESuFFYh.js";import{L as S}from"./label-DcQ_-sMZ.js";import{C as E,a as T,c as B,b as $}from"./card-C7nNTwWV.js";import{T as W,a as Y,b as _,c as b,d as Z,e as v}from"./table-OH-MIgN2.js";import{B as g}from"./badge-eUHoACpP.js";import{B as N}from"./bell-DGEfdnEl.js";import{X as C}from"./x-DzxxLS5y.js";import{P as A}from"./plus-C_kG8f__.js";import{S as w}from"./search-m1-QTzWz.js";import{S as P}from"./square-pen-FIXyxp3A.js";import{C as ee}from"./calendar-DnRZTeuR.js";import{T as se}from"./trash-2-BG_L6yri.js";import{C as F}from"./circle-alert-CGCoDwFe.js";import{C as te}from"./circle-x-D_9wKIwn.js";import{C as re}from"./circle-check-big-CclstKLD.js";import"./app-BmbQfT0_.js";import"./index-DzrNkgKa.js";import"./utils-CBfrqCZ4.js";import"./index-DH5c0sFq.js";import"./index-Dc_FVRD7.js";import"./index-BMM8wKPv.js";import"./index-DhGOy-yS.js";import"./index-Bc-3DsyS.js";import"./index-DzT3tnb6.js";import"./index-q1apwmMP.js";import"./index-0tk3grE1.js";import"./index-DfGTd3cq.js";import"./index-DUM9UyY6.js";import"./index-CwBu8RV2.js";import"./index-qPHptkmt.js";import"./createLucideIcon-C7c1hvIj.js";import"./collapsible-CBxE2yZh.js";import"./chevron-right-CzDW8WF4.js";import"./index-DiN52TcP.js";import"./log-out-Ckm4m212.js";import"./app-logo-icon--P_-c3yX.js";import"./house-R0vSJ-MQ.js";import"./building-mIkOh_fr.js";import"./users-BelIezuD.js";import"./wrench-CSdkG0qX.js";import"./credit-card-3sFCGHNT.js";import"./dollar-sign-C6zNmobC.js";import"./file-text-Ia3zVVV6.js";import"./triangle-alert-DtVQmrkD.js";const ae=({type:t,message:d,onClose:i,duration:o=4e3})=>{n.useEffect(()=>{const c=setTimeout(()=>{i()},o);return()=>clearTimeout(c)},[i,o]);const a=()=>{switch(t){case"success":return e.jsx(re,{className:"h-5 w-5 text-green-500"});case"error":return e.jsx(te,{className:"h-5 w-5 text-red-500"});case"info":return e.jsx(F,{className:"h-5 w-5 text-blue-500"});default:return e.jsx(F,{className:"h-5 w-5 text-blue-500"})}},r=()=>{switch(t){case"success":return"bg-green-50 border-green-200 dark:bg-green-950 dark:border-green-800";case"error":return"bg-red-50 border-red-200 dark:bg-red-950 dark:border-red-800";case"info":return"bg-blue-50 border-blue-200 dark:bg-blue-950 dark:border-blue-800";default:return"bg-blue-50 border-blue-200 dark:bg-blue-950 dark:border-blue-800"}};return e.jsx("div",{className:`fixed top-4 right-4 z-50 min-w-80 max-w-md p-4 rounded-lg border shadow-lg transform transition-all duration-300 ease-in-out ${r()}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[a(),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-medium text-foreground",children:d})}),e.jsx(x,{variant:"ghost",size:"sm",onClick:i,className:"h-6 w-6 p-0 text-muted-foreground hover:text-foreground",children:e.jsx(C,{className:"h-4 w-4"})})]})})},oe=()=>{const[t,d]=n.useState(null),i=n.useCallback((a,r)=>{d({type:a,message:r})},[]),o=n.useCallback(()=>{d(null)},[]);return{notification:t,showNotification:i,hideNotification:o}},ie=({notice:t,onSubmit:d,onCancel:i,isLoading:o,errors:a})=>{const[r,c]=n.useState(t?.notice_name||""),[m,u]=n.useState(t?.days?.toString()||""),s=h=>{h.preventDefault(),r.trim()&&m.trim()&&d({notice_name:r.trim(),days:Number(m)})},p=!!t;return e.jsxs(E,{className:"bg-card text-card-foreground shadow-lg border-primary/10",children:[e.jsx(T,{className:"pb-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5 text-primary"}),e.jsx(B,{className:"text-xl font-semibold",children:p?`Edit Notice - ${t.notice_name}`:"Add New Notice"})]}),e.jsx(x,{onClick:i,variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground",children:e.jsx(C,{className:"h-4 w-4"})})]})}),e.jsx($,{children:e.jsxs("form",{onSubmit:s,className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(S,{htmlFor:"notice_name",className:"text-sm font-medium",children:["Notice Name ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(y,{id:"notice_name",type:"text",value:r,onChange:h=>c(h.target.value),placeholder:"Enter notice name",className:"transition-colors focus:border-primary",disabled:o,autoComplete:"off"}),a?.notice_name&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:a.notice_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(S,{htmlFor:"days",className:"text-sm font-medium",children:["Days ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(y,{id:"days",type:"number",min:"0",value:m,onChange:h=>u(h.target.value),placeholder:"Enter number of days",className:"transition-colors focus:border-primary",disabled:o,autoComplete:"off"}),a?.days&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:a.days})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(x,{type:"submit",disabled:o||!r.trim()||!m.trim(),className:"flex-1",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-background border-t-transparent"}),p?"Updating...":"Creating..."]}):e.jsx(e.Fragment,{children:p?e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Update Notice"]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Create Notice"]})})}),e.jsx(x,{type:"button",variant:"outline",onClick:i,disabled:o,children:"Cancel"})]})]})})]})},ne=({notices:t,onEdit:d,onDelete:i,canEdit:o,canDelete:a,searchTerm:r})=>{const c=n.useMemo(()=>r?t.filter(s=>s.notice_name.toLowerCase().includes(r.toLowerCase())):t,[t,r]),m=n.useCallback(s=>{window.confirm(`Are you sure you want to archive "${s.notice_name}"? This will hide it from the active notices list but it can be restored later.`)&&i(s.id)},[i]),u=s=>s<=3?e.jsxs(g,{variant:"destructive",children:[s," days"]}):s<=7?e.jsxs(g,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",children:[s," days"]}):e.jsxs(g,{variant:"default",className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",children:[s," days"]});return c.length===0&&r?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(w,{className:"mx-auto h-12 w-12 text-muted-foreground/50"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold text-foreground",children:"No notices found"}),e.jsxs("p",{className:"text-muted-foreground",children:['No notices match your search for "',r,'"']})]}):t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(N,{className:"mx-auto h-12 w-12 text-muted-foreground/50"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold text-foreground",children:"No notices yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Get started by adding your first notice"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-hidden rounded-lg border border-border",children:e.jsxs(W,{children:[e.jsx(Y,{children:e.jsxs(_,{className:"bg-muted/50 hover:bg-muted/50",children:[e.jsx(b,{className:"font-semibold text-foreground",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-4 w-4"}),"Notice Name"]})}),e.jsx(b,{className:"font-semibold text-foreground",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),"Days"]})}),(o||a)&&e.jsx(b,{className:"font-semibold text-foreground w-32",children:"Actions"})]})}),e.jsx(Z,{children:c.map(s=>e.jsxs(_,{className:"hover:bg-muted/30 transition-colors group",children:[e.jsx(v,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-primary/60"}),e.jsx("span",{className:"text-foreground",children:s.notice_name})]})}),e.jsx(v,{children:u(s.days)}),(o||a)&&e.jsx(v,{children:e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[o&&e.jsxs(x,{variant:"ghost",size:"sm",onClick:()=>d(s),className:"text-muted-foreground hover:text-primary hover:bg-primary/10",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsxs("span",{className:"sr-only",children:["Edit ",s.notice_name]})]}),a&&e.jsxs(x,{variant:"ghost",size:"sm",onClick:()=>m(s),className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10",children:[e.jsx(se,{className:"h-4 w-4"}),e.jsxs("span",{className:"sr-only",children:["Archive ",s.notice_name]})]})]})})]},s.id))})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 text-sm text-muted-foreground border-t border-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{variant:"secondary",className:"font-mono",children:c.length}),e.jsxs("span",{children:[c.length===1?"notice":"notices",r&&` matching "${r}"`]})]}),t.length!==c.length&&e.jsxs("span",{className:"text-xs",children:[t.length," total"]})]})]})},ts=({notices:t,search:d})=>{const[i,o]=n.useState(!1),[a,r]=n.useState(null),[c,m]=n.useState(d||""),{notification:u,showNotification:s,hideNotification:p}=oe(),{processing:h,errors:D}=K({notice_name:"",days:""}),{hasPermission:z,hasAllPermissions:k}=Q(),j=k(["notices.create","notices.store"]),H=k(["notices.edit","notices.update"]),I=z("notices.destroy"),U=l=>{l.preventDefault(),f.get(route("notices.index"),{search:c},{preserveState:!0})},M=n.useCallback(l=>{f.post("/notices",l,{onSuccess:()=>{o(!1),s("success",`Notice "${l.notice_name}" has been created successfully!`)},onError:()=>{s("error","Failed to create notice. Please try again.")}})},[s]),L=n.useCallback(l=>{a&&f.put(`/notices/${a.id}`,l,{onSuccess:()=>{r(null),s("success",`Notice "${l.notice_name}" has been updated successfully!`)},onError:()=>{s("error","Failed to update notice. Please try again.")}})},[a,s]),R=n.useCallback(l=>{r(l),o(!1)},[]),X=n.useCallback(l=>{const G=t.find(J=>J.id===l)?.notice_name||"Unknown";f.delete(`/notices/${l}`,{onSuccess:()=>{s("success",`Notice "${G}" has been archived successfully!`)},onError:()=>{s("error","Failed to archive notice. Please try again.")}})},[t,s]),q=n.useCallback(()=>{o(!1),r(null)},[]);return e.jsxs(V,{children:[e.jsx(O,{title:"Notices"}),u&&e.jsx(ae,{type:u.type,message:u.message,onClose:p}),e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[e.jsx(N,{className:"h-8 w-8 text-primary"}),"Notices Management"]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage your notices with different day periods"})]}),j&&e.jsx(x,{onClick:()=>{o(!i),r(null)},variant:i?"outline":"default",size:"lg",className:"shadow-lg",children:i?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Cancel"]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Add Notice"]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[(i||a)&&j&&e.jsx("div",{className:"lg:col-span-4",children:e.jsx(ie,{notice:a||void 0,onSubmit:a?L:M,onCancel:q,isLoading:h,errors:D})}),e.jsx("div",{className:`${(i||a)&&j?"lg:col-span-8":"lg:col-span-12"}`,children:e.jsxs(E,{className:"bg-card text-card-foreground shadow-lg",children:[e.jsx(T,{className:"pb-4",children:e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(B,{className:"text-xl font-semibold",children:"Notices Directory"}),t.length>0&&e.jsxs("form",{onSubmit:U,className:"flex gap-2",children:[e.jsxs("div",{className:"relative max-w-sm",children:[e.jsx(w,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(y,{placeholder:"Search notices...",value:c,onChange:l=>m(l.target.value),className:"pl-10 bg-background"})]}),e.jsx(x,{type:"submit",children:e.jsx(w,{className:"h-4 w-4"})})]})]})}),e.jsx($,{children:e.jsx(ne,{notices:t,onEdit:R,onDelete:X,canEdit:H,canDelete:I,searchTerm:c})})]})})]})]})})]})};export{ts as default};
