import{r as o,j as t}from"./app-CHDKARjb.js";import{B as R}from"./button-DVMLQ4Cf.js";import{I as x}from"./input-CESuFFYh.js";import{C as y}from"./chevron-down-qX4-vl1q.js";import{S as M}from"./search-m1-QTzWz.js";import{X}from"./x-DzxxLS5y.js";import"./app-BmbQfT0_.js";import"./index-DzrNkgKa.js";import"./utils-CBfrqCZ4.js";import"./createLucideIcon-C7c1hvIj.js";function Z({cities:v,properties:w,allUnits:C,onSearch:_,onClear:D}){const[n,j]=o.useState({city:"",property:"",unit:""}),[F,l]=o.useState(!1),[I,i]=o.useState(!1),[L,c]=o.useState(!1),u=o.useRef(null),d=o.useRef(null),p=o.useRef(null),m=o.useRef(null),h=o.useRef(null),f=o.useRef(null);o.useEffect(()=>{const e=r=>{u.current&&!u.current.contains(r.target)&&m.current&&!m.current.contains(r.target)&&l(!1),d.current&&!d.current.contains(r.target)&&h.current&&!h.current.contains(r.target)&&i(!1),p.current&&!p.current.contains(r.target)&&f.current&&!f.current.contains(r.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const s=(e,r)=>{j(g=>({...g,[e]:r}))},k=e=>{s("city",e.city),l(!1)},P=e=>{const r=e.target.value;s("city",r),l(r.length>0)},U=e=>{const r=e.target.value;s("property",r),i(r.length>0)},E=e=>{s("property",e.property_name),i(!1)},z=e=>{const r=e.target.value;s("unit",r),c(r.length>0)},B=e=>{s("unit",e.unit_name),c(!1)},O=()=>{const e=v.find(a=>a.city===n.city),r=w.find(a=>a.property_name===n.property),g=C.find(a=>a.unit_name===n.unit);_({city_id:e?.id||null,property_id:r?.id||null,unit_id:g?.id||null})},T=()=>{j({city:"",property:"",unit:""}),D()},b=v.filter(e=>e.city.toLowerCase().includes(n.city.toLowerCase())),N=w.filter(e=>e.property_name.toLowerCase().includes(n.property.toLowerCase())),S=C.filter(e=>e.unit_name.toLowerCase().includes(n.unit.toLowerCase()));return t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(x,{ref:m,type:"text",placeholder:"City",value:n.city,onChange:P,onFocus:()=>l(!0),className:"text-input-foreground bg-input pr-8"}),t.jsx(y,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),F&&b.length>0&&t.jsx("div",{ref:u,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:b.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>k(e),children:e.city},e.id))})]}),t.jsxs("div",{className:"relative",children:[t.jsx(x,{ref:h,type:"text",placeholder:"Property",value:n.property,onChange:U,onFocus:()=>i(!0),className:"text-input-foreground bg-input pr-8"}),t.jsx(y,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),I&&N.length>0&&t.jsx("div",{ref:d,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:N.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>E(e),children:e.property_name},e.id))})]}),t.jsxs("div",{className:"relative",children:[t.jsx(x,{ref:f,type:"text",placeholder:"Unit",value:n.unit,onChange:z,onFocus:()=>c(!0),className:"text-input-foreground bg-input pr-8"}),t.jsx(y,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),L&&S.length>0&&t.jsx("div",{ref:p,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:S.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>B(e),children:e.unit_name},e.id))})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(R,{onClick:O,variant:"default",className:"flex items-center",children:[t.jsx(M,{className:"mr-2 h-4 w-4"}),"Search"]}),t.jsxs(R,{onClick:T,variant:"outline",className:"flex items-center",children:[t.jsx(X,{className:"mr-2 h-4 w-4"}),"Clear"]})]})]})}export{Z as default};
