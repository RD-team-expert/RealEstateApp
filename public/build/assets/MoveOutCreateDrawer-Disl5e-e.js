import{r as n,b as L,j as e}from"./app-p7g_f0wo.js";import{D as q,a as B,b as G}from"./drawer-BG8f08dK.js";import{B as w}from"./button-CgWb-OwV.js";import H from"./LocationSection-BZaD3RY_.js";import J from"./DateFieldsSection-Cc7Efaoq.js";import K from"./PropertyDetailsSection-ByIUjz-4.js";import Q from"./StatusFieldsSection-oKwU2QH1.js";import"./app-D9ss4c-j.js";import"./index-C9RY0Fne.js";import"./index-6lgmZUbB.js";import"./index-H5dANVBP.js";import"./index-DkhO7hde.js";import"./index-soOnB7Xl.js";import"./index-CiElmmUH.js";import"./index-DqXNBRMy.js";import"./index-CdJFUDDL.js";import"./utils-CBfrqCZ4.js";import"./x-CLgUf5rt.js";import"./createLucideIcon-DCkjgf37.js";import"./FormField-C5chkpcy.js";import"./label-DYy2JzQ2.js";import"./SelectField-C_xBmSQA.js";import"./select-CfH1ySLB.js";import"./index-Dc_FVRD7.js";import"./index-BxQHv4UU.js";import"./index-DBAs5r5h.js";import"./index-DbQ0MNsB.js";import"./index-BFObTlUk.js";import"./index-BAfRhOcu.js";import"./chevron-down-QjJMMFQo.js";import"./check-Cfkty5Qk.js";import"./chevron-up-DNYJO-3s.js";import"./TextInputField-n9kCjf_y.js";import"./input-DiaYLKYe.js";import"./DatePickerField-DNZJoeTI.js";import"./calendar-BbyHMKLt.js";import"./format-PYUiRpxY.js";import"./chevron-left-DEQB7mOe.js";import"./chevron-right-DVrPLLPg.js";import"./popover-B4-HGuiv.js";import"./calendar-C5PdxC03.js";import"./TextAreaField-DBJ2gA1C.js";import"./textarea-uGnQwSiz.js";import"./RadioGroupField-Cc_l_uBs.js";import"./radioGroup-Dy3ozKpR.js";function zt({cities:N,propertiesByCityId:h,unitsByPropertyId:y,open:P,onOpenChange:b,onSuccess:R}){const l=n.useRef(null),u=n.useRef(null),c=n.useRef(null),[k,i]=n.useState({city:"",property:"",unit:""}),[C,g]=n.useState(null),[x,f]=n.useState(null),[v,m]=n.useState(null),[I,_]=n.useState([]),[E,p]=n.useState([]),[U,V]=n.useState({move_out_date:!1,date_lease_ending_on_buildium:!1,date_utility_put_under_our_name:!1}),{data:a,setData:s,post:F,processing:S,errors:d,reset:M}=L({unit_id:null,tenants:"",move_out_date:"",lease_status:"",date_lease_ending_on_buildium:"",keys_location:"",utilities_under_our_name:"",date_utility_put_under_our_name:"",walkthrough:"",repairs:"",send_back_security_deposit:"",notes:"",cleaning:"",list_the_unit:"",move_out_form:"",utility_type:""}),T=r=>{const t=parseInt(r);g(t),f(null),m(null),s("unit_id",null),i(o=>({...o,city:"",property:"",unit:""})),t&&h[t]?_(h[t]):_([]),p([])},A=r=>{const t=parseInt(r);f(t),m(null),s("unit_id",null),i(o=>({...o,property:"",unit:""})),t&&y[t]?p(y[t]):p([])},O=r=>{const t=parseInt(r);m(t),s("unit_id",t),i(o=>({...o,unit:""}))},z=r=>{V(t=>({...t,[r]:!t[r]}))},j=r=>{r.preventDefault(),i({city:"",property:"",unit:""});let t=!1;C||(i(o=>({...o,city:"Please select a city before submitting the form."})),l.current&&(l.current.focus(),l.current.scrollIntoView({behavior:"smooth",block:"center"})),t=!0),x||(i(o=>({...o,property:"Please select a property before submitting the form."})),u.current&&(u.current.focus(),u.current.scrollIntoView({behavior:"smooth",block:"center"})),t=!0),(!v||!a.unit_id)&&(i(o=>({...o,unit:"Please select a unit before submitting the form."})),c.current&&(c.current.focus(),c.current.scrollIntoView({behavior:"smooth",block:"center"})),t=!0),!t&&F(route("move-out.store"),{onSuccess:()=>{D(),R?.()}})},D=()=>{M(),g(null),f(null),m(null),i({city:"",property:"",unit:""}),_([]),p([]),b(!1)};return e.jsx(q,{open:P,onOpenChange:b,modal:!1,children:e.jsx(B,{size:"half",title:"Create New Move-Out Record",children:e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsx("div",{className:"flex-1 overflow-auto p-6",children:e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsx(H,{cities:N,availableProperties:I,availableUnits:E,selectedCity:C,selectedProperty:x,selectedUnit:v,validationErrors:k,cityRef:l,propertyRef:u,unitRef:c,onCityChange:T,onPropertyChange:A,onUnitChange:O,tenants:a.tenants,tenantsError:d.tenants,onTenantsChange:r=>s("tenants",r)}),e.jsx(J,{data:a,errors:d,calendarStates:U,onCalendarToggle:z,onDataChange:s}),e.jsx(K,{data:a,errors:d,onDataChange:s}),e.jsx(Q,{data:a,errors:d,onDataChange:s})]})}),e.jsx(G,{children:e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsx(w,{type:"button",variant:"outline",onClick:D,className:"flex-1",children:"Cancel"}),e.jsx(w,{type:"submit",onClick:j,disabled:S,className:"flex-1",children:S?"Creating...":"Create Move-Out Record"})]})})]})})})}export{zt as default};
