import{U as N,j as e}from"./app-B8ebXpyL.js";import{I as v}from"./input-C70n0jI8.js";import{L as k}from"./label-nhRupGpP.js";import{B as d}from"./button-CPgLtvIU.js";import{F as c}from"./file-text-CFwiw5Hy.js";import{X as x}from"./x-DoFGuxfS.js";import{R as w}from"./rotate-ccw-ggOSKmL4.js";import"./app-DzAncQ8Z.js";import"./utils-CBfrqCZ4.js";import"./index-D14oVES4.js";import"./index-BvTxALZe.js";import"./index-CdJFUDDL.js";import"./createLucideIcon-B4WReUhf.js";function K({currentAttachments:r=[],allAttachments:h=[],removedAttachmentIndices:m,newAttachments:a,onRemoveAttachment:f,onUndoRemoveAttachment:p,onAddAttachments:u,onRemoveNewAttachment:b,errors:i}){const l=N.useRef(null),j=s=>{const t=s.target.files;if(t){const n=Array.from(t);u(n),l.current&&(l.current.value="")}},g=s=>{if(s===0)return"0 Bytes";const t=1024,n=["Bytes","KB","MB","GB"],o=Math.floor(Math.log(s)/Math.log(t));return Math.round(s/Math.pow(t,o)*100)/100+" "+n[o]};return e.jsxs("div",{className:"rounded-lg border-l-4 border-l-yellow-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(k,{htmlFor:"attachments",className:"text-base font-semibold",children:"Attachments"})}),r&&r.length>0&&e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsxs("p",{className:"text-sm font-medium",children:["Current attachments (",r.length,"):"]}),e.jsx("div",{className:"space-y-2",children:r.map(s=>e.jsxs("div",{className:"flex items-center justify-between rounded-md border border-border bg-muted/50 p-2",children:[e.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[e.jsx(c,{className:"h-4 w-4 flex-shrink-0 text-muted-foreground"}),e.jsx("div",{className:"min-w-0 flex-1",children:e.jsx("p",{className:"truncate text-sm font-medium",children:s.name})})]}),e.jsx(d,{type:"button",variant:"ghost",size:"sm",onClick:()=>f(s.index),className:"flex-shrink-0 text-destructive hover:bg-destructive/10 hover:text-destructive",children:e.jsx(x,{className:"h-4 w-4"})})]},s.index))})]}),m.length>0&&e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsxs("p",{className:"text-sm font-medium text-amber-600",children:["Removed attachments (",m.length,") - will be deleted:"]}),e.jsx("div",{className:"space-y-2",children:h?.map(s=>m.includes(s.index)?e.jsxs("div",{className:"flex items-center justify-between rounded-md border border-amber-200 bg-amber-50 p-2 dark:border-amber-800 dark:bg-amber-950/30",children:[e.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[e.jsx(c,{className:"h-4 w-4 flex-shrink-0 text-amber-600"}),e.jsx("div",{className:"min-w-0 flex-1",children:e.jsx("p",{className:"truncate text-sm font-medium text-amber-900 dark:text-amber-100",children:s.name})})]}),e.jsx(d,{type:"button",variant:"ghost",size:"sm",onClick:()=>p(s.index),className:"flex-shrink-0 text-amber-600 hover:bg-amber-100 hover:text-amber-700 dark:hover:bg-amber-900/50",children:e.jsx(w,{className:"h-4 w-4"})})]},s.index):null)})]}),a&&a.length>0&&e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsxs("p",{className:"text-sm font-medium text-green-600",children:["New attachments to add (",a.length,"):"]}),e.jsx("div",{className:"space-y-2",children:a.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between rounded-md border border-green-200 bg-green-50 p-2 dark:border-green-800 dark:bg-green-950/30",children:[e.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[e.jsx(c,{className:"h-4 w-4 flex-shrink-0 text-green-600"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"truncate text-sm font-medium text-green-900 dark:text-green-100",children:s.name}),e.jsx("p",{className:"text-xs text-green-700 dark:text-green-200",children:g(s.size)})]})]}),e.jsx(d,{type:"button",variant:"ghost",size:"sm",onClick:()=>b(t),className:"flex-shrink-0 text-destructive hover:bg-destructive/10 hover:text-destructive",children:e.jsx(x,{className:"h-4 w-4"})})]},`${s.name}-${t}`))})]}),e.jsxs("div",{className:"mb-3 space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Add new attachments:"}),e.jsx(v,{id:"attachments",ref:l,type:"file",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",multiple:!0,onChange:j,className:"cursor-pointer file:cursor-pointer file:border-0 file:bg-transparent file:text-sm file:font-medium"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Accepted formats: PDF, Word documents, and images (max 10MB per file, up to 10 files)"}),i.attachments&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.attachments}),i["attachments.*"]&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i["attachments.*"]})]})}export{K as AttachmentField};
