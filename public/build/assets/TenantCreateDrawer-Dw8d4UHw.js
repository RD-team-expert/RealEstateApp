import{r as n,b as O,j as s}from"./app-DfhMz46N.js";import{B as y}from"./button-D70ZdTAE.js";import{D as Y,a as q,b as B}from"./drawer-DfcxSr7r.js";import{CitySelectionSection as G}from"./CitySelectionSection-4qe4cVTm.js";import{PropertySelectionSection as J}from"./PropertySelectionSection-CuylXpqT.js";import{UnitSelectionSection as K}from"./UnitSelectionSection-CYm0qXY0.js";import{PersonalInformationSection as Q}from"./PersonalInformationSection-DHl9aYNt.js";import{ContactInformationSection as W}from"./ContactInformationSection-D0fQRqnq.js";import{PaymentAndPreferencesSection as X}from"./PaymentAndPreferencesSection-_wbpSR8V.js";import{AssistanceSection as Z}from"./AssistanceSection-CmvUf3Ty.js";import"./app-B7C1jyr3.js";import"./index-DCi-Xv1e.js";import"./index-CdJFUDDL.js";import"./utils-CBfrqCZ4.js";import"./index-BQKCx-PJ.js";import"./index-CBYZjZBF.js";import"./index-Be_qgOKl.js";import"./index-Bd9tPrb_.js";import"./index-DV6UInPh.js";import"./index-BTxfuEuk.js";import"./x-DZ3FO5Wj.js";import"./createLucideIcon-DgVEEFYv.js";import"./label-DcH_3_W8.js";import"./select-CjXVIajk.js";import"./index-Dc_FVRD7.js";import"./index-PkKgVJHn.js";import"./index-Ct5EcCoK.js";import"./index-CubYnoId.js";import"./index-DbgZyH5A.js";import"./chevron-down-VWfm6OW2.js";import"./check-CordmqsZ.js";import"./chevron-up-dLBEGKat.js";import"./FormField-B-rnDBvT.js";import"./input-BxpY_ptm.js";import"./RadioGroupField-SD_iSw8i.js";import"./radioGroup-D6vUyOHk.js";function Fe({cities:N,properties:j,unitsByProperty:d,open:A,onOpenChange:p,onSuccess:P}){const m=n.useRef(null),l=n.useRef(null),u=n.useRef(null),h=n.useRef(null),[k,c]=n.useState(""),[V,o]=n.useState(""),[w,g]=n.useState(""),[R,C]=n.useState(""),[D,f]=n.useState([]),[I,b]=n.useState([]),[_,E]=n.useState(""),{data:t,setData:r,post:F,processing:v,errors:a,reset:U}=O({unit_id:"",first_name:"",last_name:"",street_address_line:"",login_email:"",alternate_email:"",mobile:"",emergency_phone:"",cash_or_check:"",has_insurance:"",sensitive_communication:"",has_assistance:"",assistance_amount:"",assistance_company:"",city_id:""}),x=()=>{U(),c(""),o(""),g(""),C(""),f([]),b([]),E("")},L=e=>{if(r("city_id",e),r("unit_id",""),E(""),c(""),o(""),e){const i=j.filter(M=>M.city_id?.toString()===e);b(i)}else b([]);f([])},T=e=>{E(e),r("unit_id",""),c(""),o(""),e&&d&&d[e]?f(d[e]):f([])},H=e=>{r("unit_id",e),o("")},S=e=>{e.preventDefault(),c(""),o(""),g(""),C("");let i=!1;(!_||_.trim()==="")&&(c("Please select a property before submitting the form."),m.current&&(m.current.focus(),m.current.scrollIntoView({behavior:"smooth",block:"center"})),i=!0),(!t.unit_id||t.unit_id.trim()==="")&&(o("Please select a unit before submitting the form."),l.current&&(l.current.focus(),l.current.scrollIntoView({behavior:"smooth",block:"center"})),i=!0),(!t.first_name||t.first_name.trim()==="")&&(g("Please enter a first name before submitting the form."),u.current&&(u.current.focus(),u.current.scrollIntoView({behavior:"smooth",block:"center"})),i=!0),(!t.last_name||t.last_name.trim()==="")&&(C("Please enter a last name before submitting the form."),h.current&&(h.current.focus(),h.current.scrollIntoView({behavior:"smooth",block:"center"})),i=!0),!i&&F(route("tenants.store"),{onSuccess:()=>{x(),p(!1),P?.()}})},z=()=>{x(),p(!1)};return s.jsx(Y,{open:A,onOpenChange:p,modal:!1,children:s.jsx(q,{size:"half",title:"Create New Tenant",children:s.jsxs("div",{className:"flex h-full flex-col",children:[s.jsx("div",{className:"flex-1 overflow-auto p-6",children:s.jsxs("form",{onSubmit:S,className:"space-y-4",children:[s.jsx(G,{cities:N,value:t.city_id,onChange:L,error:a.city_id}),s.jsx(J,{ref:m,properties:I,value:_,onChange:T,disabled:!t.city_id,validationError:k}),s.jsx(K,{ref:l,units:D,value:t.unit_id,onChange:H,disabled:!_,error:a.unit_id,validationError:V}),s.jsx(Q,{firstNameRef:u,lastNameRef:h,firstName:t.first_name,lastName:t.last_name,streetAddress:t.street_address_line,onFirstNameChange:e=>r("first_name",e),onLastNameChange:e=>r("last_name",e),onStreetAddressChange:e=>r("street_address_line",e),firstNameError:a.first_name,lastNameError:a.last_name,streetAddressError:a.street_address_line,firstNameValidationError:w,lastNameValidationError:R}),s.jsx(W,{loginEmail:t.login_email,alternateEmail:t.alternate_email,mobile:t.mobile,emergencyPhone:t.emergency_phone,onLoginEmailChange:e=>r("login_email",e),onAlternateEmailChange:e=>r("alternate_email",e),onMobileChange:e=>r("mobile",e),onEmergencyPhoneChange:e=>r("emergency_phone",e),loginEmailError:a.login_email,alternateEmailError:a.alternate_email,mobileError:a.mobile,emergencyPhoneError:a.emergency_phone}),s.jsx(X,{cashOrCheck:t.cash_or_check,hasInsurance:t.has_insurance,sensitiveCommunication:t.sensitive_communication,hasAssistance:t.has_assistance,onCashOrCheckChange:e=>r("cash_or_check",e),onHasInsuranceChange:e=>r("has_insurance",e),onSensitiveCommunicationChange:e=>r("sensitive_communication",e),onHasAssistanceChange:e=>r("has_assistance",e),cashOrCheckError:a.cash_or_check,hasInsuranceError:a.has_insurance,sensitiveCommunicationError:a.sensitive_communication,hasAssistanceError:a.has_assistance}),t.has_assistance==="Yes"&&s.jsx(Z,{assistanceAmount:t.assistance_amount,assistanceCompany:t.assistance_company,onAssistanceAmountChange:e=>r("assistance_amount",e),onAssistanceCompanyChange:e=>r("assistance_company",e),assistanceAmountError:a.assistance_amount,assistanceCompanyError:a.assistance_company})]})}),s.jsx(B,{children:s.jsxs("div",{className:"flex gap-2 w-full",children:[s.jsx(y,{type:"button",variant:"outline",onClick:z,className:"flex-1",children:"Cancel"}),s.jsx(y,{type:"submit",onClick:S,disabled:v,className:"flex-1",children:v?"Creating...":"Create Tenant"})]})})]})})})}export{Fe as default};
