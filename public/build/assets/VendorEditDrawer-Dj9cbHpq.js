import{r as n,b as w,j as e}from"./app-C79wt3tX.js";import{B as _}from"./createLucideIcon-C1z_f29J.js";import{D,a as F,b as P}from"./drawer-wgoO6h1K.js";import{I as x}from"./input-BS89LrTW.js";import{L as o}from"./label-CArU7ATR.js";import{S as k,a as I,b as L,c as A,d as G}from"./select-4_arDXlR.js";import{R as B}from"./radioGroup-4V0hsG5D.js";import"./app-Do7cDRzv.js";import"./index-DkjncacZ.js";import"./index-DMpLQi-Z.js";import"./index-ChhieIKn.js";import"./index-CkXl1I8e.js";import"./index-DLJGb8q0.js";import"./index-BUbw163t.js";function O({vendor:t,cities:h,open:g,onOpenChange:p,onSuccess:N}){const d=n.useRef(null),u=n.useRef(null),[f,c]=n.useState(""),[v,m]=n.useState(""),[,b]=n.useState(""),{data:l,setData:i,put:S,processing:y,errors:a}=w({city_id:t?.city_id?.toString()||"",vendor_name:t?.vendor_name||"",number:t?.number||"",email:t?.email||"",service_type:t?.service_type||""});n.useEffect(()=>{if(t){const r=t.city_id?.toString()||"",s=t.city?.city||"";i({city_id:r,vendor_name:t.vendor_name,number:t.number||"",email:t.email||"",service_type:t.service_type||""}),b(s)}},[t]);const C=r=>{i("city_id",r);const s=h.find(R=>R.id.toString()===r);b(s?s.city:""),c("")},V=r=>{i("vendor_name",r.target.value),m("")},j=r=>{if(r.preventDefault(),!t)return;c(""),m("");let s=!1;(!l.city_id||l.city_id.trim()==="")&&(c("Please select a city before submitting the form."),d.current&&(d.current.focus(),d.current.scrollIntoView({behavior:"smooth",block:"center"})),s=!0),(!l.vendor_name||l.vendor_name.trim()==="")&&(m("Please enter a vendor name before submitting the form."),u.current&&(u.current.focus(),u.current.scrollIntoView({behavior:"smooth",block:"center"})),s=!0),!s&&S(route("vendors.update",t.id),{onSuccess:()=>{c(""),m(""),p(!1),N?.()}})},E=()=>{if(t){const r=t.city_id?.toString()||"",s=t.city?.city||"";i({city_id:r,vendor_name:t.vendor_name,number:t.number||"",email:t.email||"",service_type:t.service_type||""}),b(s)}c(""),m(""),p(!1)};return t?e.jsx(D,{open:g,onOpenChange:p,modal:!1,children:e.jsx(F,{size:"half",title:`Edit Vendor - ${t.vendor_name}`,children:e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsx("div",{className:"flex-1 overflow-auto p-6",children:e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border-l-4 border-l-blue-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(o,{htmlFor:"city_id",className:"text-base font-semibold",children:"City *"})}),e.jsxs(k,{onValueChange:C,value:l.city_id,children:[e.jsx(I,{ref:d,children:e.jsx(L,{placeholder:"Select a city"})}),e.jsx(A,{children:h?.map(r=>e.jsx(G,{value:r.id.toString(),children:r.city},r.id))||[]})]}),a.city_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.city_id}),f&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:f})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-green-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(o,{htmlFor:"vendor_name",className:"text-base font-semibold",children:"Vendor Name *"})}),e.jsx(x,{ref:u,id:"vendor_name",value:l.vendor_name,onChange:V,placeholder:"Enter vendor name"}),a.vendor_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.vendor_name}),v&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:v})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-purple-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(o,{htmlFor:"number",className:"text-base font-semibold",children:"Phone Number"})}),e.jsx(x,{id:"number",value:l.number,onChange:r=>i("number",r.target.value),placeholder:"Enter phone number"}),a.number&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.number})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-orange-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(o,{htmlFor:"email",className:"text-base font-semibold",children:"Email Address"})}),e.jsx(x,{id:"email",type:"email",value:l.email,onChange:r=>i("email",r.target.value),placeholder:"vendor@example.com"}),a.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.email})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-emerald-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(o,{htmlFor:"service_type",className:"text-base font-semibold",children:"Service Type"})}),e.jsx(B,{value:l.service_type,onValueChange:r=>i("service_type",r),name:"service_type",className:"grid grid-cols-2 gap-4",options:[{value:"Maintenance",label:"Maintenance"},{value:"Appliances",label:"Appliances"},{value:"Pest control",label:"Pest control"},{value:"HVAC Repairs",label:"HVAC Repairs"},{value:"Plumbing",label:"Plumbing"},{value:"Landscaping",label:"Landscaping"},{value:"Lock Smith",label:"Lock Smith"},{value:"Garage door",label:"Garage door"}]}),a.service_type&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.service_type})]})]})}),e.jsxs(P,{className:"flex-row justify-end gap-2 border-t bg-muted/50 p-4",children:[e.jsx(_,{type:"button",variant:"outline",onClick:E,children:"Cancel"}),e.jsx(_,{type:"submit",onClick:j,disabled:y,children:y?"Updating...":"Update Vendor"})]})]})})}):null}export{O as default};
