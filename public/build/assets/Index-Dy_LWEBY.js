import{r as y,j as e,H as N,L as d,b as x}from"./app-Bg9A1iBs.js";import{u as w,A as T}from"./app-layout-B2xxsflK.js";import{B as n}from"./app-logo-icon-CqfSrEUH.js";import{I as b}from"./input-DQavsSaP.js";import{C as S,a as _,b as C,c as A}from"./card-Dokyzjaq.js";import{P as D,T as L,a as B,b as h,c as r,d as P,e as a,f as E}from"./table-BqtaTJkR.js";import{B as m}from"./badge-DpG1ETnn.js";import{S as H}from"./search-DFP5YysW.js";import{E as V}from"./eye-Dqg2wTxN.js";import{S as z}from"./square-pen-BCtUUpJV.js";import"./app-Duuwx8Ln.js";import"./index-DVjcrV7E.js";import"./index-DL1ex2iG.js";function X({tasks:t,search:j}){const{hasPermission:i,hasAnyPermission:c,hasAllPermissions:l}=w(),[o,u]=y.useState(j||""),v=s=>{s.preventDefault(),x.get(route("vendor-task-tracker.index"),{search:o},{preserveState:!0})},p=s=>{confirm("Are you sure you want to delete this task?")&&x.delete(route("vendor-task-tracker.destroy",s.id))},f=s=>e.jsx(m,{variant:s==="Yes"?"destructive":"secondary",children:s}),k=s=>{if(!s)return null;const g=s.toLowerCase().includes("completed")?"default":s.toLowerCase().includes("pending")?"secondary":"outline";return e.jsx(m,{variant:g,children:s})};return e.jsxs(T,{children:[e.jsx(N,{title:"Vendor Task Tracker"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs(S,{children:[e.jsxs(_,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(C,{className:"text-2xl",children:"Vendor Task Tracker"}),l(["vendor-task-tracker.create","vendor-task-tracker.store"])&&e.jsx(d,{href:route("vendor-task-tracker.create"),children:e.jsxs(n,{children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Add Task"]})})]}),e.jsxs("form",{onSubmit:v,className:"flex gap-2 mt-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(b,{type:"text",placeholder:"Search tasks by city, vendor, unit, or status...",value:o,onChange:s=>u(s.target.value)})}),e.jsx(n,{type:"submit",children:e.jsx(H,{className:"h-4 w-4"})})]})]}),e.jsxs(A,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(L,{children:[e.jsx(B,{children:e.jsxs(h,{children:[e.jsx(r,{children:"City"}),e.jsx(r,{children:"Submission Date"}),e.jsx(r,{children:"Vendor Name"}),e.jsx(r,{children:"Unit Name"}),e.jsx(r,{children:"Assigned Tasks"}),e.jsx(r,{children:"Scheduled Visits"}),e.jsx(r,{children:"Task End Date"}),e.jsx(r,{children:"Note"}),e.jsx(r,{children:"Status"}),e.jsx(r,{children:"Urgent"}),c(["vendor-task-tracker.show","vendor-task-tracker.edit","vendor-task-tracker.update","vendor-task-tracker.destroy"])&&e.jsx(r,{children:"Actions"})]})}),e.jsx(P,{children:t.data.map(s=>e.jsxs(h,{className:"hover:bg-gray-50",children:[e.jsx(a,{className:"font-medium",children:s.city}),e.jsx(a,{children:new Date(s.task_submission_date).toLocaleDateString()}),e.jsx(a,{children:s.vendor_name}),e.jsx(a,{children:s.unit_name}),e.jsx(a,{className:"max-w-xs truncate",children:s.assigned_tasks}),e.jsx(a,{children:s.any_scheduled_visits?new Date(s.any_scheduled_visits).toLocaleDateString():"N/A"}),e.jsx(a,{children:s.task_ending_date?new Date(s.task_ending_date).toLocaleDateString():"N/A"}),e.jsx(a,{className:"font-medium",children:s.notes}),e.jsx(a,{children:k(s.status)}),e.jsx(a,{children:f(s.urgent)}),c(["vendor-task-tracker.show","vendor-task-tracker.edit","vendor-task-tracker.update","vendor-task-tracker.destroy"])&&e.jsx(a,{children:e.jsxs("div",{className:"flex gap-1",children:[i("vendor-task-tracker.show")&&e.jsx(d,{href:route("vendor-task-tracker.show",s.id),children:e.jsx(n,{variant:"outline",size:"sm",children:e.jsx(V,{className:"h-4 w-4"})})}),l(["vendor-task-tracker.edit","vendor-task-tracker.update"])&&e.jsx(d,{href:route("vendor-task-tracker.edit",s.id),children:e.jsx(n,{variant:"outline",size:"sm",children:e.jsx(z,{className:"h-4 w-4"})})}),i("vendor-task-tracker.destroy")&&e.jsx(n,{variant:"outline",size:"sm",onClick:()=>p(s),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(E,{className:"h-4 w-4"})})]})})]},s.id))})]})}),t.data.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("p",{className:"text-lg",children:"No tasks found."}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search criteria."})]}),t.meta&&e.jsx("div",{className:"mt-6 flex justify-between items-center",children:e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",t.meta.from||0," to ",t.meta.to||0," of ",t.meta.total||0," results"]})})]})]})})})]})}export{X as default};
