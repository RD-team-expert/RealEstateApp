import{r as n,b as X,j as e}from"./app-BkyZySAt.js";import{B as I}from"./button-DOkiOPMq.js";import{D as Z,a as $,b as O}from"./drawer-BQHCt03g.js";import{I as i}from"./input-nS05NghJ.js";import{L as r}from"./label-BCoYkVMj.js";import{S as C,a as S,b as E,c as F,d as V}from"./select-RK3poDcU.js";import{R as _}from"./radioGroup-DeV4OTT4.js";import"./app-oDNfBSri.js";import"./index-DJP-tLWC.js";import"./utils-CBfrqCZ4.js";import"./index-B_abII33.js";import"./index-Dc_FVRD7.js";import"./index-D86DOQfL.js";import"./index-Zsm6T9Ra.js";import"./index-DBw3aPE3.js";import"./index-CSRjvr9u.js";import"./index-CEATnq5y.js";import"./index-m091_WFs.js";import"./index-DzIcFn8W.js";import"./x-B9Nlqjs5.js";import"./createLucideIcon-D3eUMA-Y.js";import"./index-DvetPajZ.js";import"./index-DEy3YO5y.js";import"./index-B2wSjM2m.js";import"./index-DCBTnY57.js";import"./index-DsMWzC3p.js";import"./chevron-down-BKwinLVR.js";import"./check-MTPBeqEd.js";import"./chevron-up-CJrmsHZ1.js";function ke({cities:U,properties:L,unitsByProperty:j,open:T,onOpenChange:v,onSuccess:H}){const d=n.useRef(null),h=n.useRef(null),x=n.useRef(null),u=n.useRef(null),[k,m]=n.useState(""),[w,c]=n.useState(""),[P,f]=n.useState(""),[R,N]=n.useState(""),[M,b]=n.useState([]),[z,g]=n.useState([]),[p,y]=n.useState(""),{data:t,setData:l,post:G,processing:A,errors:a,reset:q}=X({unit_id:"",first_name:"",last_name:"",street_address_line:"",login_email:"",alternate_email:"",mobile:"",emergency_phone:"",cash_or_check:"",has_insurance:"",sensitive_communication:"",has_assistance:"",assistance_amount:"",assistance_company:"",city_id:""}),D=()=>{q(),m(""),c(""),f(""),N(""),b([]),g([]),y("")},B=s=>{if(l("city_id",s),l("unit_id",""),y(""),m(""),c(""),s){const o=L.filter(W=>W.city_id?.toString()===s);g(o)}else g([]);b([])},J=s=>{y(s),l("unit_id",""),m(""),c(""),s&&j&&j[s]?b(j[s]):b([])},K=s=>{l("unit_id",s),c("")},Y=s=>{s.preventDefault(),m(""),c(""),f(""),N("");let o=!1;(!p||p.trim()==="")&&(m("Please select a property before submitting the form."),d.current&&(d.current.focus(),d.current.scrollIntoView({behavior:"smooth",block:"center"})),o=!0),(!t.unit_id||t.unit_id.trim()==="")&&(c("Please select a unit before submitting the form."),h.current&&(h.current.focus(),h.current.scrollIntoView({behavior:"smooth",block:"center"})),o=!0),(!t.first_name||t.first_name.trim()==="")&&(f("Please enter a first name before submitting the form."),x.current&&(x.current.focus(),x.current.scrollIntoView({behavior:"smooth",block:"center"})),o=!0),(!t.last_name||t.last_name.trim()==="")&&(N("Please enter a last name before submitting the form."),u.current&&(u.current.focus(),u.current.scrollIntoView({behavior:"smooth",block:"center"})),o=!0),!o&&G(route("tenants.store"),{onSuccess:()=>{D(),v(!1),H?.()}})},Q=()=>{D(),v(!1)};return e.jsx(Z,{open:T,onOpenChange:v,modal:!1,children:e.jsx($,{size:"half",title:"Create New Tenant",children:e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsx("div",{className:"flex-1 overflow-auto p-6",children:e.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border-l-4 border-l-blue-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"city_id",className:"text-base font-semibold",children:"City *"})}),e.jsxs(C,{onValueChange:B,value:t.city_id,children:[e.jsx(S,{children:e.jsx(E,{placeholder:"Select city"})}),e.jsx(F,{children:U?.map(s=>e.jsx(V,{value:s.id.toString(),children:s.city},s.id))||[]})]}),a.city_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.city_id})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-green-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"property_name",className:"text-base font-semibold",children:"Property Name *"})}),e.jsxs(C,{onValueChange:J,value:p,disabled:!t.city_id,children:[e.jsx(S,{ref:d,children:e.jsx(E,{placeholder:"Select property"})}),e.jsx(F,{children:z?.map(s=>e.jsx(V,{value:s.property_name,children:s.property_name},s.id))||[]})]}),k&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:k})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-purple-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"unit_id",className:"text-base font-semibold",children:"Unit *"})}),e.jsxs(C,{onValueChange:K,value:t.unit_id,disabled:!p,children:[e.jsx(S,{ref:h,children:e.jsx(E,{placeholder:"Select unit"})}),e.jsx(F,{children:M?.map(s=>e.jsx(V,{value:s.id.toString(),children:s.unit_name},s.id))||[]})]}),a.unit_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.unit_id}),w&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:w})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-orange-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"first_name",className:"text-base font-semibold",children:"First Name *"})}),e.jsx(i,{id:"first_name",ref:x,value:t.first_name,onChange:s=>l("first_name",s.target.value),placeholder:"Enter first name"}),a.first_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.first_name}),P&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:P})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-emerald-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"last_name",className:"text-base font-semibold",children:"Last Name *"})}),e.jsx(i,{id:"last_name",ref:u,value:t.last_name,onChange:s=>l("last_name",s.target.value),placeholder:"Enter last name"}),a.last_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.last_name}),R&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:R})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-slate-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"street_address_line",className:"text-base font-semibold",children:"Street Address"})}),e.jsx(i,{id:"street_address_line",value:t.street_address_line,onChange:s=>l("street_address_line",s.target.value),placeholder:"Enter street address"}),a.street_address_line&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.street_address_line})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-teal-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"login_email",className:"text-base font-semibold",children:"Email"})}),e.jsx(i,{id:"login_email",type:"email",value:t.login_email,onChange:s=>l("login_email",s.target.value),placeholder:"Enter email address"}),a.login_email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.login_email})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-sky-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"alternate_email",className:"text-base font-semibold",children:"Alternate Email"})}),e.jsx(i,{id:"alternate_email",type:"email",value:t.alternate_email,onChange:s=>l("alternate_email",s.target.value),placeholder:"Enter alternate email address"}),a.alternate_email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.alternate_email})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-indigo-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"mobile",className:"text-base font-semibold",children:"Mobile Phone"})}),e.jsx(i,{id:"mobile",value:t.mobile,onChange:s=>l("mobile",s.target.value),placeholder:"Enter mobile phone number"}),a.mobile&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.mobile})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-pink-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"emergency_phone",className:"text-base font-semibold",children:"Emergency Phone"})}),e.jsx(i,{id:"emergency_phone",value:t.emergency_phone,onChange:s=>l("emergency_phone",s.target.value),placeholder:"Enter emergency phone number"}),a.emergency_phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.emergency_phone})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-red-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"cash_or_check",className:"text-base font-semibold",children:"Payment Method"})}),e.jsx(_,{value:t.cash_or_check,onValueChange:s=>l("cash_or_check",s),name:"cash_or_check",options:[{value:"Cash",label:"Cash"},{value:"Check",label:"Check"}]}),a.cash_or_check&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.cash_or_check})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-yellow-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"has_insurance",className:"text-base font-semibold",children:"Has Insurance"})}),e.jsx(_,{value:t.has_insurance,onValueChange:s=>l("has_insurance",s),name:"has_insurance",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}]}),a.has_insurance&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.has_insurance})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-cyan-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"sensitive_communication",className:"text-base font-semibold",children:"Sensitive Communication"})}),e.jsx(_,{value:t.sensitive_communication,onValueChange:s=>l("sensitive_communication",s),name:"sensitive_communication",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}]}),a.sensitive_communication&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.sensitive_communication})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-violet-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"has_assistance",className:"text-base font-semibold",children:"Has Assistance"})}),e.jsx(_,{value:t.has_assistance,onValueChange:s=>l("has_assistance",s),name:"has_assistance",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}]}),a.has_assistance&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.has_assistance})]}),t.has_assistance==="Yes"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"rounded-lg border-l-4 border-l-rose-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"assistance_amount",className:"text-base font-semibold",children:"Assistance Amount"})}),e.jsx(i,{id:"assistance_amount",type:"number",step:"0.01",value:t.assistance_amount,onChange:s=>l("assistance_amount",s.target.value),placeholder:"Enter assistance amount"}),a.assistance_amount&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.assistance_amount})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-amber-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{htmlFor:"assistance_company",className:"text-base font-semibold",children:"Assistance Company"})}),e.jsx(i,{id:"assistance_company",value:t.assistance_company,onChange:s=>l("assistance_company",s.target.value),placeholder:"Enter assistance company name"}),a.assistance_company&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.assistance_company})]})]})]})}),e.jsx(O,{children:e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsx(I,{type:"button",variant:"outline",onClick:Q,className:"flex-1",children:"Cancel"}),e.jsx(I,{type:"submit",onClick:Y,disabled:A,className:"flex-1",children:A?"Creating...":"Create Tenant"})]})})]})})})}export{ke as default};
