import{r as m,b as k,j as r}from"./app-DIEWn7Ix.js";import{B as x}from"./button-C0qpziZb.js";import{D as R,a as P,b as B}from"./drawer-fqLIckn8.js";import T from"./CityField-CwQ0dC4q.js";import z from"./VendorNameField-CR_NgJ97.js";import A from"./PhoneNumberField-5kH7NHgB.js";import I from"./EmailField-jnK4irjv.js";import W from"./ServiceTypeField-CpxHVQTs.js";import"./app-ChTVGdbA.js";import"./index-Bt0zfGgm.js";import"./index-CdJFUDDL.js";import"./utils-CBfrqCZ4.js";import"./index-DKA-WKms.js";import"./index-VPuXs-fY.js";import"./index-C4fRG95q.js";import"./index-BtB4-ACe.js";import"./index-BBSsUOtm.js";import"./index-BWA9V35X.js";import"./x-imATtpBe.js";import"./createLucideIcon-lZMskSwP.js";import"./label-BIgMUqDa.js";import"./select-DaMc0ZYU.js";import"./index-Dc_FVRD7.js";import"./index-Bp33PYYw.js";import"./index-DwaLeO51.js";import"./index-DWHJnJ6z.js";import"./index-B14YlqPx.js";import"./index-OmisV_7g.js";import"./chevron-down-DABifuem.js";import"./check-CBvn5g3p.js";import"./chevron-up-DPOsvpyl.js";import"./input-Dp80VBC1.js";import"./plus-DhhAwnw0.js";import"./trash-2-BbHlzFlW.js";function Ce({cities:h,open:C,onOpenChange:d,onSuccess:g}){const l=m.useRef(null),c=m.useRef(null),[j,n]=m.useState(""),[_,a]=m.useState(""),[,u]=m.useState(""),{data:t,setData:s,post:E,processing:v,errors:i,reset:b}=k({city_id:"",vendor_name:"",number:[],email:[],service_type:[]}),p=e=>{if(i[e])return i[e];const o=Object.keys(i).find(f=>f.startsWith(`${e}.`));if(o)return i[o]},V=e=>{s("city_id",e);const o=h.find(f=>f.id.toString()===e);u(o?o.city:""),n("")},N=e=>{s("vendor_name",e.target.value),a("")},w=e=>{s("number",e)},S=e=>{s("email",e)},F=e=>{s("service_type",e)},y=e=>{e.preventDefault(),n(""),a("");let o=!1;(!t.city_id||t.city_id.trim()==="")&&(n("Please select a city before submitting the form."),l.current&&(l.current.focus(),l.current.scrollIntoView({behavior:"smooth",block:"center"})),o=!0),(!t.vendor_name||t.vendor_name.trim()==="")&&(a("Please enter a vendor name before submitting the form."),c.current&&(c.current.focus(),c.current.scrollIntoView({behavior:"smooth",block:"center"})),o=!0),!o&&E(route("vendors.store"),{onSuccess:()=>{b(),u(""),n(""),a(""),d(!1),g?.()}})},D=()=>{b(),u(""),n(""),a(""),d(!1)};return r.jsx(R,{open:C,onOpenChange:d,modal:!1,children:r.jsx(P,{size:"half",title:"Create New Vendor",children:r.jsxs("div",{className:"flex h-full flex-col",children:[r.jsx("div",{className:"flex-1 overflow-auto p-6",children:r.jsxs("form",{onSubmit:y,className:"space-y-4",children:[r.jsx(T,{cities:h,value:t.city_id,onChange:V,error:i.city_id,validationError:j,ref:l}),r.jsx(z,{value:t.vendor_name,onChange:N,error:i.vendor_name,validationError:_,ref:c}),r.jsx(A,{value:t.number,onChange:w,error:p("number")}),r.jsx(I,{value:t.email,onChange:S,error:p("email")}),r.jsx(W,{value:t.service_type,onChange:F,error:p("service_type")})]})}),r.jsxs(B,{className:"flex-row justify-end gap-2 border-t bg-muted/50 p-4",children:[r.jsx(x,{type:"button",variant:"outline",onClick:D,children:"Cancel"}),r.jsx(x,{type:"submit",onClick:y,disabled:v,children:v?"Creating...":"Create Vendor"})]})]})})})}export{Ce as default};
