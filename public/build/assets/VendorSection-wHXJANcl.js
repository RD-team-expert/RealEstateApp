import{r,j as t}from"./app-Dn1r5IbR.js";import{L as b}from"./label-CyLYjr_a.js";import{I as S}from"./input-DJHjvjS7.js";import{C as L}from"./chevron-down-Bfpn-qjr.js";import"./app-BmbQfT0_.js";import"./index-C5yiDUFi.js";import"./index-DF1-xgR-.js";import"./utils-CBfrqCZ4.js";import"./createLucideIcon-ezkluWMI.js";function k({availableVendors:o,selectedCity:d,vendorId:a,onVendorChange:f,vendorRef:j,errors:x,validationError:h}){const[n,c]=r.useState(""),[g,i]=r.useState(!1),[u,l]=r.useState([]),p=r.useRef(null),m=r.useRef(null);r.useEffect(()=>{if(a){const e=o.find(s=>s.id.toString()===a);e&&c(e.vendor_name)}else c("")},[a,o]),r.useEffect(()=>{if(!o){l([]);return}if(n.trim()==="")l(o);else{const e=o.filter(s=>s.vendor_name.toLowerCase().includes(n.toLowerCase()));l(e)}},[n,o]),r.useEffect(()=>{const e=s=>{m.current&&!m.current.contains(s.target)&&p.current&&!p.current.contains(s.target)&&i(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const w=e=>{c(e.vendor_name),f(e.id.toString()),i(!1)},N=e=>{c(e),i(!0),!o.find(v=>v.vendor_name.toLowerCase()===e.toLowerCase())&&a&&f("")};return t.jsxs("div",{className:"rounded-lg border-l-4 border-l-purple-500 p-4",children:[t.jsx("div",{className:"mb-2",children:t.jsx(b,{htmlFor:"vendor_name",className:"text-base font-semibold",children:"Vendor Name *"})}),t.jsxs("div",{className:"relative",children:[t.jsx(S,{ref:p,type:"text",placeholder:d?"Type to search vendors...":"Select a city first",value:n,onChange:e=>N(e.target.value),onFocus:()=>d&&i(!0),disabled:!d,className:"text-input-foreground bg-input pr-8"}),t.jsx(L,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),g&&u.length>0&&d&&t.jsx("div",{ref:m,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:u.map(e=>t.jsxs("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>w(e),children:[e.vendor_name,e.city&&t.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",e.city,")"]})]},e.id))}),g&&u.length===0&&n.trim()!==""&&d&&t.jsx("div",{ref:m,className:"absolute top-full right-0 left-0 z-50 mt-1 rounded-md border border-input bg-popover shadow-lg",children:t.jsxs("div",{className:"px-3 py-2 text-sm text-muted-foreground",children:['No vendors found matching "',n,'"']})})]}),t.jsx("button",{ref:j,type:"button",className:"hidden"}),x.vendor_id&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.vendor_id}),h&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:h})]})}export{k as default};
