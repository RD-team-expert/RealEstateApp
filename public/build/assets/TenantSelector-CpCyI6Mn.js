import{r,j as e}from"./app-BSOlzI_M.js";import{L as j}from"./label-ku6Bo0xE.js";import{B as L}from"./button-D2rKFPK1.js";import{P as y,a as I,b as O}from"./popover-CKsI89_0.js";import{C as D,a as F,b as P,c as _,d as B,e as M}from"./command-CBR154ui.js";import{I as E}from"./input-DWv8_Yxn.js";import{c as k}from"./utils-CBfrqCZ4.js";import{C as z}from"./chevrons-up-down-D-iRWSMZ.js";import{C as G}from"./check-BE4k6INO.js";import"./app-D9zByHv3.js";import"./index-DIXGfQsU.js";import"./index-ByB7CnZO.js";import"./index-CdJFUDDL.js";import"./index-BK07_5Wa.js";import"./index-BLt4aHaa.js";import"./index-Eh5rTZKr.js";import"./index-C5g_kYK6.js";import"./index-C4PIvpnm.js";import"./index-09CEhTtY.js";import"./search-BcNZ_u8M.js";import"./createLucideIcon-BGWKpKjb.js";function ne({tenants:o,value:n,onChange:b,disabled:w,error:c,validationError:p,tenantRef:g,unitSelected:m,otherTenants:C="",onOtherTenantsChange:h}){const[v,a]=r.useState(!1),[u,l]=r.useState(o),[x,f]=r.useState(!1),N=r.useMemo(()=>{const s=o.find(t=>t.id.toString()===n);return s?s.name:""},[o,n]);r.useMemo(()=>{l(o)},[o]);const S=s=>{const t=s.target.value;if(h?.(t),t.trim()==="")l(o);else{const i=o.filter(d=>d.name.toLowerCase().includes(t.toLowerCase())||d.first_name.toLowerCase().includes(t.toLowerCase())||d.last_name.toLowerCase().includes(t.toLowerCase()));l(i)}a(!0)},T=s=>{h?.(s.name),a(!1)};return e.jsxs("div",{className:"rounded-lg border-l-4 border-l-purple-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(j,{htmlFor:"tenant",className:"text-base font-semibold",children:"Tenant *"})}),e.jsxs(y,{open:x,onOpenChange:f,children:[e.jsx(I,{asChild:!0,children:e.jsxs(L,{ref:g,role:"combobox","aria-expanded":x,variant:"outline",className:"w-full justify-between text-left font-normal",disabled:w||!m||o.length===0,children:[N||(m?o.length===0?"No tenants available":"Select tenant":"Select unit first"),e.jsx(z,{className:"ml-2 h-4 w-4 opacity-50"})]})}),e.jsx(O,{className:"w-[var(--radix-popover-trigger-width)] p-0",align:"start",children:e.jsxs(D,{children:[e.jsx(F,{placeholder:"Search tenant..."}),e.jsxs(P,{children:[e.jsx(_,{children:"No tenant found."}),e.jsx(B,{children:o.map(s=>{const t=s.id.toString(),i=n===t;return e.jsxs(M,{value:s.name,onSelect:()=>{b(t),f(!1)},children:[e.jsx(G,{className:k("mr-2 h-4 w-4",i?"opacity-100":"opacity-0")}),s.name]},s.id)})})]})]})})]}),c&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c}),p&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:p}),e.jsxs("div",{className:"mt-4",children:[e.jsx(j,{htmlFor:"other_tenants",className:"text-base font-semibold",children:"Other Tenant Names"}),e.jsxs("div",{className:"relative mt-2",children:[e.jsx(E,{id:"other_tenants",type:"text",value:C,onChange:S,onFocus:()=>{l(o),a(o.length>0)},onBlur:()=>setTimeout(()=>a(!1),200),placeholder:"Type custom name or select from existing tenants",className:"w-full",disabled:!m||o.length===0}),v&&u.length>0&&e.jsx("div",{className:"absolute z-50 mt-1 max-h-60 w-full overflow-auto rounded-md border border-input bg-popover shadow-lg",children:u.map(s=>e.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onMouseDown:()=>T(s),children:s.name},s.id))})]})]})]})}export{ne as default};
