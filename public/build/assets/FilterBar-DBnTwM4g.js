import{r as o,j as t}from"./app-Dn1r5IbR.js";import{B as D}from"./button-DoJlCKhy.js";import{I as d}from"./input-DJHjvjS7.js";import{C as b}from"./chevron-down-Bfpn-qjr.js";import{S as J}from"./search-BFedrvkI.js";import{X as K}from"./x-BwrjvaMS.js";import"./app-BmbQfT0_.js";import"./index-DF1-xgR-.js";import"./utils-CBfrqCZ4.js";import"./createLucideIcon-ezkluWMI.js";function ne({filters:c,cities:u,properties:L,vendors:k,onSearch:P,onClear:V}){const[p,j]=o.useState(c),[i,m]=o.useState(c.city||""),[E,s]=o.useState(!1),[N,S]=o.useState([]),f=o.useRef(null),h=o.useRef(null),[I,g]=o.useState(c.property||""),[z,a]=o.useState(!1),x=o.useRef(null),y=o.useRef(null),[F,v]=o.useState(c.vendor_name||""),[B,l]=o.useState(!1),w=o.useRef(null),C=o.useRef(null);o.useEffect(()=>{if(u)if(i.trim()==="")S(u);else{const e=u.filter(r=>r.city.toLowerCase().includes(i.toLowerCase()));S(e)}},[i,u]);const R=L?.filter(e=>e.property_name.toLowerCase().includes(I.toLowerCase()))||[],_=k?.filter(e=>e.vendor_name.toLowerCase().includes(F.toLowerCase()))||[];o.useEffect(()=>{const e=r=>{h.current&&!h.current.contains(r.target)&&f.current&&!f.current.contains(r.target)&&s(!1),y.current&&!y.current.contains(r.target)&&x.current&&!x.current.contains(r.target)&&a(!1),C.current&&!C.current.contains(r.target)&&w.current&&!w.current.contains(r.target)&&l(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const n=(e,r)=>{j({...p,[e]:r})},T=e=>{m(e),n("city",e),s(!1)},O=e=>{m(e),n("city",e),s(!0)},U=e=>{const r=e.target.value;g(r),n("property",r),a(r.length>0)},X=e=>{g(e.property_name),n("property",e.property_name),a(!1)},q=e=>{const r=e.target.value;v(r),n("vendor_name",r),l(r.length>0)},A=e=>{v(e.vendor_name),n("vendor_name",e.vendor_name),l(!1)},G=()=>{P(p)},H=()=>{j({}),m(""),g(""),v(""),s(!1),a(!1),l(!1),V()};return t.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-6",children:[t.jsxs("div",{className:"relative",children:[t.jsx(d,{ref:f,type:"text",placeholder:"Filter by City",value:i,onChange:e=>O(e.target.value),onFocus:()=>s(!0),className:"text-input-foreground bg-input pr-8"}),t.jsx(b,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),E&&N.length>0&&t.jsx("div",{ref:h,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:N.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>T(e.city),children:e.city},e.id))})]}),t.jsxs("div",{className:"relative",children:[t.jsx(d,{ref:x,type:"text",placeholder:"Filter by Property",value:I,onChange:U,onFocus:()=>a(!0),className:"text-input-foreground bg-input pr-8"}),t.jsx(b,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),z&&R.length>0&&t.jsx("div",{ref:y,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:R.map(e=>t.jsxs("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>X(e),children:[e.property_name,e.city&&t.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",e.city,")"]})]},e.id))})]}),t.jsx(d,{type:"text",placeholder:"Filter by Unit",value:p.unit_name||"",onChange:e=>n("unit_name",e.target.value),className:"text-input-foreground bg-input"}),t.jsxs("div",{className:"relative",children:[t.jsx(d,{ref:w,type:"text",placeholder:"Filter by Vendor",value:F,onChange:q,onFocus:()=>l(!0),className:"text-input-foreground bg-input pr-8"}),t.jsx(b,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),B&&_.length>0&&t.jsx("div",{ref:C,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:_.map(e=>t.jsxs("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>A(e),children:[e.vendor_name,e.city&&t.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",e.city,")"]})]},e.id))})]}),t.jsxs(D,{onClick:G,variant:"default",className:"flex items-center",children:[t.jsx(J,{className:"mr-2 h-4 w-4"}),"Search"]}),t.jsxs(D,{onClick:H,variant:"outline",className:"flex items-center",children:[t.jsx(K,{className:"mr-2 h-4 w-4"}),"Clear"]})]})}export{ne as default};
