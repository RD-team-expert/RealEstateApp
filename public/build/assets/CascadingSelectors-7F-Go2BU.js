import{r as d,j as e}from"./app-Dn1r5IbR.js";import{L as x}from"./label-CyLYjr_a.js";import{S as u,a as j,b,c as f,d as g}from"./select-BPfsX62k.js";import{I as B}from"./input-DJHjvjS7.js";import"./app-BmbQfT0_.js";import"./index-C5yiDUFi.js";import"./index-DF1-xgR-.js";import"./utils-CBfrqCZ4.js";import"./index-Dc_FVRD7.js";import"./index-rczzAiLR.js";import"./index-cId8iuZu.js";import"./index-qhuad6ry.js";import"./index-CGaG4LkD.js";import"./index-BHn9DcD9.js";import"./index-WPnjh8bd.js";import"./index-h5kqUyi-.js";import"./index-IWqIVFcu.js";import"./index-q0Alrdsu.js";import"./index-C0T19-Xq.js";import"./chevron-down-Bfpn-qjr.js";import"./createLucideIcon-ezkluWMI.js";import"./check-CZby3Z4H.js";import"./chevron-up-CyiongBQ.js";function ie({hierarchicalData:N,cityId:i,propertyId:o,unitId:r,tenantId:w,otherTenants:_,onCityChange:T,onPropertyChange:y,onUnitChange:F,onTenantChange:L,onOtherTenantsChange:v,errors:l,validationErrors:n,cityRef:V,propertyRef:M,unitRef:O,tenantRef:P}){const m=d.useMemo(()=>{if(!i)return[];const t=N.find(a=>a.id.toString()===i);return t?t.properties:[]},[N,i]),c=d.useMemo(()=>{if(!o)return[];const t=m.find(a=>a.id.toString()===o);return t?t.units:[]},[m,o]),s=d.useMemo(()=>{if(!r)return[];const t=c.find(a=>a.id.toString()===r);return t?t.tenants:[]},[c,r]),[U,h]=d.useState(!1),[C,p]=d.useState(s);d.useMemo(()=>{p(s)},[s]);const k=t=>{if(v(t),t.trim()==="")p(s);else{const a=s.filter(S=>S.name.toLowerCase().includes(t.toLowerCase())||S.first_name.toLowerCase().includes(t.toLowerCase())||S.last_name.toLowerCase().includes(t.toLowerCase()));p(a)}h(!0)},z=t=>{v(t.name),h(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"rounded-lg border-l-4 border-l-indigo-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(x,{htmlFor:"city",className:"text-base font-semibold",children:"City *"})}),e.jsxs(u,{onValueChange:T,value:i,children:[e.jsx(j,{ref:V,children:e.jsx(b,{placeholder:"Select city"})}),e.jsx(f,{children:N.map(t=>e.jsx(g,{value:t.id.toString(),children:t.name},t.id))})]}),l.city_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.city_id}),n.city&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.city})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-blue-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(x,{htmlFor:"property",className:"text-base font-semibold",children:"Property *"})}),e.jsxs(u,{onValueChange:y,value:o,disabled:!i||m.length===0,children:[e.jsx(j,{ref:M,children:e.jsx(b,{placeholder:i?m.length===0?"No properties available":"Select property":"Select city first"})}),e.jsx(f,{children:m.map(t=>e.jsx(g,{value:t.id.toString(),children:t.name},t.id))})]}),l.property_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.property_id}),n.property&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.property})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-green-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(x,{htmlFor:"unit",className:"text-base font-semibold",children:"Unit *"})}),e.jsxs(u,{onValueChange:F,value:r,disabled:!o||c.length===0,children:[e.jsx(j,{ref:O,children:e.jsx(b,{placeholder:o?c.length===0?"No units available":"Select unit":"Select property first"})}),e.jsx(f,{children:c.map(t=>e.jsx(g,{value:t.id.toString(),children:t.name},t.id))})]}),l.unit_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.unit_id}),n.unit&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.unit})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-purple-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(x,{htmlFor:"tenant",className:"text-base font-semibold",children:"Tenant *"})}),e.jsxs(u,{onValueChange:L,value:w,disabled:!r||s.length===0,children:[e.jsx(j,{ref:P,children:e.jsx(b,{placeholder:r?s.length===0?"No tenants available":"Select tenant":"Select unit first"})}),e.jsx(f,{children:s.map(t=>e.jsx(g,{value:t.id.toString(),children:t.name},t.id))})]}),l.tenant_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.tenant_id}),n.tenant&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.tenant})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-pink-500 p-4",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx(x,{htmlFor:"other_tenants",className:"text-base font-semibold",children:"Other Tenant Names"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"You can select from the dropdown or type custom names"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(B,{id:"other_tenants",type:"text",placeholder:"Type tenant names or select from dropdown",value:_,onChange:t=>k(t.target.value),onFocus:()=>{p(s),h(s.length>0)},onBlur:()=>{setTimeout(()=>h(!1),200)},disabled:!r||s.length===0,className:"w-full"}),U&&C.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:C.map(t=>e.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>z(t),children:t.name},t.id))})]})]})]})}export{ie as default};
