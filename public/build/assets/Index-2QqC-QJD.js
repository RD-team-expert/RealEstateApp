import{r as A,a as T,j as e,H as P,L as j,b as p}from"./app-BydbXvNR.js";import{u as B,A as D}from"./app-layout-JAdefpY2.js";import{B as o}from"./app-logo-icon-_X7DW1Ak.js";import{I as n}from"./input-D0VuUaJ9.js";import{C as x,c as m,a as H,b as F}from"./card-D9wtjh1c.js";import{P as L,T as E,a as I,b as v,c as t,d as z,e as a,f as O}from"./table-BEFqGt7n.js";import{B as N}from"./badge-18jTDmdE.js";import{E as R}from"./eye-CPs45M0j.js";import{S as U}from"./square-pen-DQ2VcgES.js";import"./app-B_WQW7DO.js";import"./index-BqVwD9uT.js";import"./index-BMp7K-bq.js";function ee({auth:$,applications:l,statistics:h,filters:y}){const[r,b]=A.useState(y),{flash:c}=T().props,{hasPermission:g,hasAnyPermission:u,hasAllPermissions:_}=B(),d=(s,i)=>{const f={...r,[s]:i};b(f),p.get(route("applications.index"),f,{preserveState:!0,preserveScroll:!0})},w=s=>{confirm("Are you sure you want to delete this application?")&&p.delete(route("applications.destroy",s.id))},C=s=>s?e.jsx(N,{variant:"default",children:s}):e.jsx(N,{variant:"outline",children:"No Status"}),S=[{title:"Applications",href:"/applications"}];return e.jsxs(D,{breadcrumbs:S,children:[e.jsx(P,{title:"Applications"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[c?.success&&e.jsx("div",{className:"mb-4 bg-chart-1/20 border border-chart-1 text-chart-1 px-4 py-3 rounded",children:c.success}),c?.error&&e.jsx("div",{className:"mb-4 bg-destructive/20 border border-destructive text-destructive px-4 py-3 rounded",children:c.error}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx(x,{children:e.jsxs(m,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Total Applications"}),e.jsx("p",{className:"text-3xl font-bold text-primary",children:h.total})]})}),e.jsx(x,{children:e.jsxs(m,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"By Status"}),e.jsx("div",{className:"mt-2 space-y-1",children:Object.entries(h.status_counts).map(([s,i])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:[s||"No Status",":"]}),e.jsx("span",{className:"font-semibold text-foreground",children:i})]},s))})]})}),e.jsx(x,{children:e.jsxs(m,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"By Stage"}),e.jsx("div",{className:"mt-2 space-y-1",children:Object.entries(h.stage_counts).slice(0,5).map(([s,i])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:[s||"No Stage",":"]}),e.jsx("span",{className:"font-semibold text-foreground",children:i})]},s))})]})})]}),e.jsxs(x,{children:[e.jsxs(H,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(F,{className:"text-2xl",children:"Applications"}),_(["applications.create","applications.store"])&&e.jsx(j,{href:route("applications.create"),children:e.jsxs(o,{children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Add Application"]})})]}),e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(n,{type:"text",placeholder:"Property",value:r.property||"",onChange:s=>d("property",s.target.value)}),e.jsx(n,{type:"text",placeholder:"Name",value:r.name||"",onChange:s=>d("name",s.target.value)}),e.jsx(n,{type:"text",placeholder:"Unit",value:r.unit||"",onChange:s=>d("unit",s.target.value)}),e.jsx(n,{type:"text",placeholder:"Status",value:r.status||"",onChange:s=>d("status",s.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(n,{type:"text",placeholder:"Co-signer",value:r.co_signer||"",onChange:s=>d("co_signer",s.target.value)}),e.jsx(n,{type:"text",placeholder:"Stage in Progress",value:r.stage_in_progress||"",onChange:s=>d("stage_in_progress",s.target.value)}),e.jsx(n,{type:"date",placeholder:"Date From",value:r.date_from||"",onChange:s=>d("date_from",s.target.value)}),e.jsx(n,{type:"date",placeholder:"Date To",value:r.date_to||"",onChange:s=>d("date_to",s.target.value)})]})]})]}),e.jsxs(m,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(E,{children:[e.jsx(I,{children:e.jsxs(v,{children:[e.jsx(t,{children:"City"}),e.jsx(t,{children:"Property"}),e.jsx(t,{children:"Unit"}),e.jsx(t,{children:"Name"}),e.jsx(t,{children:"Co-signer"}),e.jsx(t,{children:"Status"}),e.jsx(t,{children:"Date"}),e.jsx(t,{children:"Stage"}),e.jsx(t,{children:"Note"}),e.jsx(t,{children:"Attachment"}),u(["applications.show","applications.edit","applications.update","applications.destroy"])&&e.jsx(t,{children:"Actions"})]})}),e.jsx(z,{children:l.data.map(s=>e.jsxs(v,{className:"hover:bg-muted/50",children:[e.jsx(a,{className:"font-medium",children:s.city}),e.jsx(a,{className:"font-medium",children:s.property}),e.jsx(a,{children:s.unit}),e.jsx(a,{children:s.name}),e.jsx(a,{children:s.co_signer}),e.jsx(a,{children:C(s.status)}),e.jsx(a,{children:s.date?new Date(s.date).toLocaleDateString():"N/A"}),e.jsx(a,{children:s.stage_in_progress||"N/A"}),e.jsx(a,{children:s.notes||"N/A"}),e.jsx(a,{children:s.attachment_name?e.jsx("a",{href:`/applications/${s.id}/download`,className:"text-primary hover:underline text-sm",children:s.attachment_name}):e.jsx("span",{className:"text-muted-foreground text-sm",children:"No attachment"})}),u(["applications.show","applications.edit","applications.update","applications.destroy"])&&e.jsx(a,{children:e.jsxs("div",{className:"flex gap-1",children:[g("applications.show")&&e.jsx(j,{href:route("applications.show",s.id),children:e.jsx(o,{variant:"outline",size:"sm",children:e.jsx(R,{className:"h-4 w-4"})})}),u(["applications.edit","applications.update"])&&e.jsx(j,{href:route("applications.edit",s.id),children:e.jsx(o,{variant:"outline",size:"sm",children:e.jsx(U,{className:"h-4 w-4"})})}),g("applications.destroy")&&e.jsx(o,{variant:"outline",size:"sm",onClick:()=>w(s),className:"text-destructive hover:text-destructive hover:bg-destructive/10",children:e.jsx(O,{className:"h-4 w-4"})})]})})]},s.id))})]})}),l.data.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx("p",{className:"text-lg",children:"No applications found."}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search criteria."})]}),l.last_page>1&&e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx("nav",{className:"flex space-x-2",children:l.links.map((s,i)=>e.jsx("button",{onClick:()=>s.url&&p.get(s.url),disabled:!s.url,className:`px-3 py-2 text-sm rounded ${s.active?"bg-primary text-primary-foreground":s.url?"bg-muted text-foreground hover:bg-accent":"bg-muted text-muted-foreground cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:s.label}},i))})}),l.meta&&e.jsx("div",{className:"mt-6 flex justify-between items-center",children:e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",l.meta.from||0," to ",l.meta.to||0," of ",l.meta.total||0," results"]})})]})]})]})})]})}export{ee as default};
