import{r as n,j as t}from"./app-XlMZG7vD.js";import{B as T}from"./button-D56PIbu9.js";import{I as p}from"./input-nhBJFe9F.js";import{C as m}from"./chevron-down-Dqt3V4Kg.js";import{S as se}from"./search-BKBHV1D6.js";import{X as ae}from"./x-B-P-7DDz.js";import"./app-D9zByHv3.js";import"./index-D09_T-bu.js";import"./index-CdJFUDDL.js";import"./utils-CBfrqCZ4.js";import"./createLucideIcon-BneQKrth.js";const le=[{value:"exclude_completed",label:"Exclude Completed"},{value:"all",label:"Show All"},{value:"Completed",label:"Completed"},{value:"In Progress",label:"In Progress"},{value:"Pending",label:"Pending"}];function we({filters:s,cities:i,properties:z,units:B,vendors:O,onSearch:A,onClear:X}){const[I,_]=n.useState(s),[d,h]=n.useState(s.city||""),[q,a]=n.useState(!1),[R,F]=n.useState([]),f=n.useRef(null),g=n.useRef(null),[D,x]=n.useState(s.property||""),[G,l]=n.useState(!1),v=n.useRef(null),w=n.useRef(null),[P,y]=n.useState(s.unit_name||""),[H,u]=n.useState(!1),C=n.useRef(null),b=n.useRef(null),[L,j]=n.useState(s.vendor_name||""),[J,c]=n.useState(!1),S=n.useRef(null),N=n.useRef(null),[K,k]=n.useState(s.status||"exclude_completed");n.useEffect(()=>{if(i)if(d.trim()==="")F(i);else{const e=i.filter(r=>r.city.toLowerCase().includes(d.toLowerCase()));F(e)}},[d,i]);const U=z?.filter(e=>e.property_name.toLowerCase().includes(D.toLowerCase()))||[],E=O?.filter(e=>e.vendor_name.toLowerCase().includes(L.toLowerCase()))||[],V=B?.filter(e=>e.unit_name.toLowerCase().includes(P.toLowerCase()))||[];n.useEffect(()=>{const e=r=>{g.current&&!g.current.contains(r.target)&&f.current&&!f.current.contains(r.target)&&a(!1),w.current&&!w.current.contains(r.target)&&v.current&&!v.current.contains(r.target)&&l(!1),b.current&&!b.current.contains(r.target)&&C.current&&!C.current.contains(r.target)&&u(!1),N.current&&!N.current.contains(r.target)&&S.current&&!S.current.contains(r.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const o=(e,r)=>{_({...I,[e]:r})},M=e=>{h(e),o("city",e),a(!1)},Q=e=>{h(e),o("city",e),a(!0)},W=e=>{const r=e.target.value;x(r),o("property",r),l(r.length>0)},Y=e=>{x(e.property_name),o("property",e.property_name),l(!1)},Z=e=>{const r=e.target.value;y(r),o("unit_name",r),u(r.length>0)},$=e=>{y(e.unit_name),o("unit_name",e.unit_name),u(!1)},ee=e=>{const r=e.target.value;j(r),o("vendor_name",r),c(r.length>0)},te=e=>{j(e.vendor_name),o("vendor_name",e.vendor_name),c(!1)},re=e=>{const r=e.target.value;k(r),o("status",r)},ne=()=>{A(I)},oe=()=>{_({}),h(""),x(""),y(""),j(""),k("exclude_completed"),a(!1),l(!1),u(!1),c(!1),X()};return t.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-7",children:[t.jsxs("div",{className:"relative",children:[t.jsx(p,{ref:f,type:"text",placeholder:"Filter by City",value:d,onChange:e=>Q(e.target.value),onFocus:()=>a(!0),className:"text-input-foreground bg-input pr-8"}),t.jsx(m,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),q&&R.length>0&&t.jsx("div",{ref:g,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:R.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>M(e.city),children:e.city},e.id))})]}),t.jsxs("div",{className:"relative",children:[t.jsx(p,{ref:v,type:"text",placeholder:"Filter by Property",value:D,onChange:W,onFocus:()=>l(!0),className:"text-input-foreground bg-input pr-8"}),t.jsx(m,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),G&&U.length>0&&t.jsx("div",{ref:w,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:U.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>Y(e),children:e.property_name},e.id))})]}),t.jsxs("div",{className:"relative",children:[t.jsx(p,{ref:C,type:"text",placeholder:"Filter by Unit",value:P,onChange:Z,onFocus:()=>u(!0),className:"text-input-foreground bg-input pr-8"}),t.jsx(m,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),H&&V.length>0&&t.jsx("div",{ref:b,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:V.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>$(e),children:e.unit_name},e.id))})]}),t.jsxs("div",{className:"relative",children:[t.jsx(p,{ref:S,type:"text",placeholder:"Filter by Vendor",value:L,onChange:ee,onFocus:()=>c(!0),className:"text-input-foreground bg-input pr-8"}),t.jsx(m,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),J&&E.length>0&&t.jsx("div",{ref:N,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:E.map(e=>t.jsxs("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>te(e),children:[e.vendor_name,e.city&&t.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",e.city,")"]})]},e.id))})]}),t.jsx("select",{value:K,onChange:re,className:"rounded-md border border-input bg-input px-3 py-2 text-sm text-input-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:le.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))}),t.jsxs(T,{onClick:ne,variant:"default",className:"flex items-center",children:[t.jsx(se,{className:"mr-2 h-4 w-4"}),"Search"]}),t.jsxs(T,{onClick:oe,variant:"outline",className:"flex items-center",children:[t.jsx(ae,{className:"mr-2 h-4 w-4"}),"Clear"]})]})}export{we as default};
