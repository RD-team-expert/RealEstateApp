import{j as e,a as c}from"./app-C2rmVmHv.js";import{C as v,b as y}from"./card-BCawuU56.js";import{T as w,a as T,b as C,c as o,d as S}from"./table-DkXsjxFg.js";import{u as _}from"./usePermissions-DlQTT3jc.js";import k from"./PaymentPlanTableRow-qpHxvpQ1.js";import{B as u}from"./button-VjjEP6Vi.js";import"./app-Ofegqgfz.js";import"./utils-CBfrqCZ4.js";import"./formatDate-B7VkYiMQ.js";import"./format-PYUiRpxY.js";import"./StatusBadge-DLxYvOuC.js";import"./badge--CFw3i9B.js";import"./index-DjZQUolQ.js";import"./index-CdJFUDDL.js";import"./eye-Bujvh-o-.js";import"./createLucideIcon-vG7_p-6g.js";import"./square-pen-Bv68EyOt.js";import"./trash-2-CCcs6h2C.js";function Q({paymentPlans:r,filters:d,perPage:a,search:x,onEdit:b,onDelete:g}){const{hasAnyPermission:p}=_(),s=r.current_page??r?.meta?.current_page??1,l=r.last_page??r?.meta?.last_page??1,h=r.total??r?.meta?.total??r.data.length,j=r.from??r?.meta?.from??0,f=r.to??r?.meta?.to??r.data.length,n=(()=>{if(String(a).toLowerCase()==="all")return"all";const t=typeof a=="number"?a:parseInt(String(a),10);if(!Number.isNaN(t)&&t>0)return String(t);const i=r?.per_page??r?.meta?.per_page??15;return String(i)})(),N=t=>{const i=t==="all"?"all":parseInt(t,10);c.get(route("payment-plans.index"),{city:d?.city||void 0,property:d?.property||void 0,unit:d?.unit||void 0,tenant:d?.tenant||void 0,per_page:i},{preserveState:!0})},m=t=>{t<1||t>l||c.get(route("payment-plans.index"),{city:d?.city||void 0,property:d?.property||void 0,unit:d?.unit||void 0,tenant:d?.tenant||void 0,page:t,per_page:n},{preserveState:!0})};return e.jsx(v,{className:"bg-card text-card-foreground shadow-lg",children:e.jsxs(y,{children:[e.jsx("div",{className:"relative overflow-x-auto",children:e.jsxs(w,{className:"border-collapse rounded-md border border-border",children:[e.jsx(T,{children:e.jsxs(C,{className:"border-border",children:[e.jsx(o,{className:"sticky left-0 z-10 min-w-[120px] border border-border bg-muted text-muted-foreground",children:"City"}),e.jsx(o,{className:"sticky left-[120px] z-10 min-w-[150px] border border-border bg-muted text-muted-foreground",children:"Property"}),e.jsx(o,{className:"sticky left-[270px] z-10 min-w-[120px] border border-border bg-muted text-muted-foreground",children:"Unit"}),e.jsx(o,{className:"sticky left-[390px] z-10 min-w-[150px] border border-border bg-muted text-muted-foreground",children:"Tenant"}),e.jsx(o,{className:"border border-border bg-muted text-muted-foreground text-right",children:"Amount"}),e.jsx(o,{className:"border border-border bg-muted text-muted-foreground text-right",children:"Paid"}),e.jsx(o,{className:"border border-border bg-muted text-muted-foreground text-right",children:"Left to Pay"}),e.jsx(o,{className:"border border-border bg-muted text-muted-foreground",children:"Status"}),e.jsx(o,{className:"border border-border bg-muted text-muted-foreground",children:"Date"}),e.jsx(o,{className:"border border-border bg-muted text-muted-foreground",children:"Note"}),p(["payment-plans.show","payment-plans.edit","payment-plans.update","payment-plans.destroy"])&&e.jsx(o,{className:"border border-border bg-muted text-muted-foreground",children:"Actions"})]})}),e.jsx(S,{children:r.data.map(t=>e.jsx(k,{plan:t,filters:d,perPage:n,currentPage:s,search:x,onEdit:b,onDelete:g},t.id))})]})}),r.data.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx("p",{className:"text-lg",children:"No payment plans found."}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search criteria."})]}),e.jsxs("div",{className:"mt-4 flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",j??0,"-",f??r.data.length," of ",h]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Rows per page:"}),e.jsxs("select",{className:"rounded-md border border-border bg-background p-1 text-sm",value:n,onChange:t=>N(t.target.value),children:[e.jsx("option",{value:"15",children:"15"}),e.jsx("option",{value:"30",children:"30"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"all",children:"All"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{variant:"outline",size:"sm",onClick:()=>m(s-1),disabled:s<=1,children:"Previous"}),e.jsx(u,{variant:"outline",size:"sm",onClick:()=>m(s+1),disabled:s>=l,children:"Next"})]})]})]})]})})}export{Q as default};
