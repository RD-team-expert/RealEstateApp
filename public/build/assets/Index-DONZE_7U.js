import{r as n,b as I,a as g,j as e,H as L}from"./app-C79wt3tX.js";import{u as R,A as X}from"./app-layout-CQQyJnHK.js";import{B as m}from"./createLucideIcon-C1z_f29J.js";import{I as y}from"./input-BS89LrTW.js";import{L as G}from"./label-CArU7ATR.js";import{C as v,a as w,c as C,b as k}from"./card-AzpDVrLx.js";import{P as S,T as U,a as Y,b as j,c as b,d as _,e as N,f as q}from"./table-BkCbQJPV.js";import{B as J}from"./badge-BxLpr-IS.js";import{A as K,a as O}from"./alert-C2MdDTBO.js";import{B as A}from"./building-2-Di3iXPYV.js";import{X as h}from"./index-DkjncacZ.js";import{S as F}from"./search-BTrBOoaV.js";import{C as u}from"./circle-alert-BzASD5aK.js";import{M as p}from"./map-pin-HpWmO8Ji.js";import{C as Q}from"./circle-x-spimeuTI.js";import{C as V}from"./circle-check-big-Bq2J0eZh.js";import"./app-Do7cDRzv.js";import"./index-DMpLQi-Z.js";import"./index-CkXl1I8e.js";import"./index-ChhieIKn.js";import"./index-DLJGb8q0.js";import"./chevron-right-CkaRxpST.js";import"./app-logo-icon-CJ6cgBSF.js";import"./file-text-DtifDZmy.js";const W=({type:t,message:i,onClose:a,duration:r=4e3})=>{n.useEffect(()=>{const s=setTimeout(()=>{a()},r);return()=>clearTimeout(s)},[a,r]);const l=()=>{switch(t){case"success":return e.jsx(V,{className:"h-5 w-5 text-green-500"});case"error":return e.jsx(Q,{className:"h-5 w-5 text-red-500"});case"info":return e.jsx(u,{className:"h-5 w-5 text-blue-500"});default:return e.jsx(u,{className:"h-5 w-5 text-blue-500"})}},o=()=>{switch(t){case"success":return"bg-green-50 border-green-200 dark:bg-green-950 dark:border-green-800";case"error":return"bg-red-50 border-red-200 dark:bg-red-950 dark:border-red-800";case"info":return"bg-blue-50 border-blue-200 dark:bg-blue-950 dark:border-blue-800";default:return"bg-blue-50 border-blue-200 dark:bg-blue-950 dark:border-blue-800"}};return e.jsx("div",{className:`fixed top-4 right-4 z-50 min-w-80 max-w-md p-4 rounded-lg border shadow-lg transform transition-all duration-300 ease-in-out ${o()}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[l(),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-medium text-foreground",children:i})}),e.jsx(m,{variant:"ghost",size:"sm",onClick:a,className:"h-6 w-6 p-0 text-muted-foreground hover:text-foreground",children:e.jsx(h,{className:"h-4 w-4"})})]})})},Z=()=>{const[t,i]=n.useState(null),a=n.useCallback((l,o)=>{i({type:l,message:o})},[]),r=n.useCallback(()=>{i(null)},[]);return{notification:t,showNotification:a,hideNotification:r}},ee=({onSubmit:t,onCancel:i,isLoading:a,error:r})=>{const[l,o]=n.useState(""),s=c=>{c.preventDefault(),l.trim()&&(t(l.trim()),o(""))};return e.jsxs(v,{className:"bg-card text-card-foreground shadow-lg border-primary/10",children:[e.jsx(w,{className:"pb-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5 text-primary"}),e.jsx(C,{className:"text-xl font-semibold",children:"Add New City"})]}),e.jsx(m,{onClick:i,variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground",children:e.jsx(h,{className:"h-4 w-4"})})]})}),e.jsxs(k,{children:[r&&e.jsxs(K,{className:"mb-4 text-destructive",children:[e.jsx(u,{className:"h-4 w-4"}),e.jsx(O,{className:"text-destructive",children:r})]}),e.jsxs("form",{onSubmit:s,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(G,{htmlFor:"city",className:"text-sm font-medium",children:["City Name ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(y,{id:"city",type:"text",value:l,onChange:c=>o(c.target.value),placeholder:"Enter city name (e.g., New York, London)",className:"transition-colors focus:border-primary",disabled:a,autoComplete:"off"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(m,{type:"submit",disabled:a||!l.trim(),className:"flex-1",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-background border-t-transparent"}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Add City"]})}),e.jsx(m,{type:"button",variant:"outline",onClick:i,disabled:a,children:"Cancel"})]})]})]})]})},se=({cities:t,onDelete:i,canDelete:a,searchTerm:r})=>{const l=n.useMemo(()=>r?t.filter(s=>s.city.toLowerCase().includes(r.toLowerCase())):t,[t,r]),o=n.useCallback((s,c)=>{window.confirm(`Are you sure you want to delete "${c}"? This action cannot be undone.`)&&i(s)},[i]);return l.length===0&&r?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(F,{className:"mx-auto h-12 w-12 text-muted-foreground/50"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold text-foreground",children:"No cities found"}),e.jsxs("p",{className:"text-muted-foreground",children:['No cities match your search for "',r,'"']})]}):t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(p,{className:"mx-auto h-12 w-12 text-muted-foreground/50"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold text-foreground",children:"No cities yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Get started by adding your first city"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-hidden rounded-lg border border-border",children:e.jsxs(U,{children:[e.jsx(Y,{children:e.jsxs(j,{className:"bg-muted/50 hover:bg-muted/50",children:[e.jsx(b,{className:"font-semibold text-foreground",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-4 w-4"}),"City Name"]})}),a&&e.jsx(b,{className:"font-semibold text-foreground w-24",children:"Actions"})]})}),e.jsx(_,{children:l.map(s=>e.jsxs(j,{className:"hover:bg-muted/30 transition-colors group",children:[e.jsx(N,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-primary/60"}),e.jsx("span",{className:"text-foreground",children:s.city})]})}),a&&e.jsx(N,{children:e.jsxs(m,{variant:"ghost",size:"sm",onClick:()=>o(s.id,s.city),className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsxs("span",{className:"sr-only",children:["Delete ",s.city]})]})})]},s.id))})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 text-sm text-muted-foreground border-t border-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{variant:"secondary",className:"font-mono",children:l.length}),e.jsxs("span",{children:[l.length===1?"city":"cities",r&&` matching "${r}"`]})]}),t.length!==l.length&&e.jsxs("span",{className:"text-xs",children:[t.length," total"]})]})]})},Ae=({cities:t})=>{const[i,a]=n.useState(!1),[r,l]=n.useState(""),{notification:o,showNotification:s,hideNotification:c}=Z(),{processing:T,errors:B,reset:f}=I({city:""}),{hasPermission:D,hasAllPermissions:P}=R(),x=P(["cities.store","cities.create"]),$=D("cities.destroy"),E=n.useCallback(d=>{g.post("/cities",{city:d},{onSuccess:()=>{f(),a(!1),s("success",`City "${d}" has been added successfully!`)},onError:()=>{s("error","Failed to add city. Please try again.")}})},[f,s]),M=n.useCallback(d=>{const z=t.find(H=>H.id===d)?.city||"Unknown";g.delete(`/cities/${d}`,{onSuccess:()=>{s("success",`City "${z}" has been deleted successfully!`)},onError:()=>{s("error","Failed to delete city. Please try again.")}})},[t,s]);return e.jsxs(X,{children:[e.jsx(L,{title:"Cities Management"}),o&&e.jsx(W,{type:o.type,message:o.message,onClose:c}),e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[e.jsx(A,{className:"h-8 w-8 text-primary"}),"Cities Management"]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage your cities database with ease"})]}),x&&e.jsx(m,{onClick:()=>a(!i),variant:i?"outline":"default",size:"lg",className:"shadow-lg",children:i?e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Cancel"]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Add City"]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[i&&x&&e.jsx("div",{className:"lg:col-span-4",children:e.jsx(ee,{onSubmit:E,onCancel:()=>a(!1),isLoading:T,error:B.city})}),e.jsx("div",{className:`${i&&x?"lg:col-span-8":"lg:col-span-12"}`,children:e.jsxs(v,{className:"bg-card text-card-foreground shadow-lg",children:[e.jsx(w,{className:"pb-4",children:e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(C,{className:"text-xl font-semibold",children:"Cities Directory"}),t.length>0&&e.jsxs("div",{className:"relative max-w-sm",children:[e.jsx(F,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(y,{placeholder:"Search cities...",value:r,onChange:d=>l(d.target.value),className:"pl-10 bg-background"})]})]})}),e.jsx(k,{children:e.jsx(se,{cities:t,onDelete:M,canDelete:$,searchTerm:r})})]})})]})]})})]})};export{Ae as default};
