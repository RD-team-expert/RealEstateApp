import{r as o,b as J,j as e}from"./app-Dn1r5IbR.js";import{B as I}from"./button-DoJlCKhy.js";import{D as K,a as Q,b as W}from"./drawer-BbQvx4Pm.js";import{I as c}from"./input-DJHjvjS7.js";import{L as i}from"./label-CyLYjr_a.js";import{S as C,a as S,b as E,c as F,d as k}from"./select-BPfsX62k.js";import{R as g}from"./radioGroup-Dyu-l9CF.js";import"./app-BmbQfT0_.js";import"./index-DF1-xgR-.js";import"./utils-CBfrqCZ4.js";import"./index-C_Yr3VBI.js";import"./index-Dc_FVRD7.js";import"./index-cId8iuZu.js";import"./index-WPnjh8bd.js";import"./index-qhuad6ry.js";import"./index-C5yiDUFi.js";import"./index-CGaG4LkD.js";import"./index-BHn9DcD9.js";import"./index-BV3nWfAJ.js";import"./x-BwrjvaMS.js";import"./createLucideIcon-ezkluWMI.js";import"./index-rczzAiLR.js";import"./index-h5kqUyi-.js";import"./index-IWqIVFcu.js";import"./index-q0Alrdsu.js";import"./index-C0T19-Xq.js";import"./chevron-down-Bfpn-qjr.js";import"./check-CZby3Z4H.js";import"./chevron-up-CyiongBQ.js";function Se({tenant:a,cities:R,properties:x,unitsByProperty:d,open:U,onOpenChange:f,onSuccess:Y}){const u=o.useRef(null),p=o.useRef(null),[V,h]=o.useState(""),[w,m]=o.useState(""),[L,b]=o.useState([]),[T,N]=o.useState([]),[j,v]=o.useState(""),{data:r,setData:t,put:H,processing:y,errors:l}=J({unit_id:a.unit_id?.toString()??"",first_name:a.first_name??"",last_name:a.last_name??"",street_address_line:a.street_address_line??"",login_email:a.login_email??"",alternate_email:a.alternate_email??"",mobile:a.mobile??"",emergency_phone:a.emergency_phone??"",cash_or_check:a.cash_or_check??"",has_insurance:a.has_insurance??"",sensitive_communication:a.sensitive_communication??"",has_assistance:a.has_assistance??"",assistance_amount:a.assistance_amount?.toString()??"",assistance_company:a.assistance_company??""}),A=()=>a.property_name?x.find(n=>n.property_name===a.property_name)?.city_id?.toString()??"":"",[_,P]=o.useState(A());o.useEffect(()=>{if(_){const s=x.filter(n=>n.city_id?.toString()===_);N(s)}a.property_name&&(v(a.property_name),d[a.property_name]&&b(d[a.property_name]))},[_,a.property_name,x,d]);const M=s=>{if(P(s),v(""),t("unit_id",""),h(""),m(""),s){const n=x.filter(q=>q.city_id?.toString()===s);N(n)}else N([]);b([])},$=s=>{v(s),t("unit_id",""),h(""),m(""),s&&d&&d[s]?b(d[s]):b([])},z=s=>{t("unit_id",s),m("")},D=s=>{s.preventDefault(),h(""),m("");let n=!1;(!j||j.trim()==="")&&(h("Please select a property before submitting the form."),u.current&&(u.current.focus(),u.current.scrollIntoView({behavior:"smooth",block:"center"})),n=!0),(!r.unit_id||r.unit_id.trim()==="")&&(m("Please select a unit before submitting the form."),p.current&&(p.current.focus(),p.current.scrollIntoView({behavior:"smooth",block:"center"})),n=!0),!n&&H(route("tenants.update",a.id),{onSuccess:()=>{h(""),m(""),f(!1),Y?.()}})},G=()=>{t({unit_id:a.unit_id?.toString()??"",first_name:a.first_name??"",last_name:a.last_name??"",street_address_line:a.street_address_line??"",login_email:a.login_email??"",alternate_email:a.alternate_email??"",mobile:a.mobile??"",emergency_phone:a.emergency_phone??"",cash_or_check:a.cash_or_check??"",has_insurance:a.has_insurance??"",sensitive_communication:a.sensitive_communication??"",has_assistance:a.has_assistance??"",assistance_amount:a.assistance_amount?.toString()??"",assistance_company:a.assistance_company??""}),h(""),m(""),P(A()),v(a.property_name??""),f(!1)};return e.jsx(K,{open:U,onOpenChange:f,modal:!1,children:e.jsx(Q,{size:"half",title:`Edit ${a.first_name} ${a.last_name}`,children:e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsx("div",{className:"flex-1 overflow-auto p-6",children:e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border-l-4 border-l-blue-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(i,{htmlFor:"city_id",className:"text-base font-semibold",children:"City *"})}),e.jsxs(C,{onValueChange:M,value:_,children:[e.jsx(S,{children:e.jsx(E,{placeholder:"Select city"})}),e.jsx(F,{children:R?.map(s=>e.jsx(k,{value:s.id.toString(),children:s.city},s.id))||[]})]})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-green-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(i,{htmlFor:"property_name",className:"text-base font-semibold",children:"Property Name *"})}),e.jsxs(C,{onValueChange:$,value:j,disabled:!_,children:[e.jsx(S,{ref:u,children:e.jsx(E,{placeholder:"Select property"})}),e.jsx(F,{children:T?.map(s=>e.jsx(k,{value:s.property_name,children:s.property_name},s.id))||[]})]}),V&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:V})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-purple-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(i,{htmlFor:"unit_id",className:"text-base font-semibold",children:"Unit *"})}),e.jsxs(C,{onValueChange:z,value:r.unit_id,disabled:!j,children:[e.jsx(S,{ref:p,children:e.jsx(E,{placeholder:"Select unit"})}),e.jsx(F,{children:L?.map(s=>e.jsx(k,{value:s.id.toString(),children:s.unit_name},s.id))||[]})]}),l.unit_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.unit_id}),w&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:w})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-orange-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(i,{htmlFor:"first_name",className:"text-base font-semibold",children:"First Name *"})}),e.jsx(c,{id:"first_name",value:r.first_name,onChange:s=>t("first_name",s.target.value),placeholder:"Enter first name"}),l.first_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.first_name})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-emerald-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(i,{htmlFor:"last_name",className:"text-base font-semibold",children:"Last Name *"})}),e.jsx(c,{id:"last_name",value:r.last_name,onChange:s=>t("last_name",s.target.value),placeholder:"Enter last name"}),l.last_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.last_name})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-slate-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(i,{htmlFor:"street_address_line",className:"text-base font-semibold",children:"Street Address"})}),e.jsx(c,{id:"street_address_line",value:r.street_address_line,onChange:s=>t("street_address_line",s.target.value),placeholder:"Enter street address"}),l.street_address_line&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.street_address_line})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-teal-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(i,{htmlFor:"login_email",className:"text-base font-semibold",children:"Login Email"})}),e.jsx(c,{id:"login_email",type:"email",value:r.login_email,onChange:s=>t("login_email",s.target.value),placeholder:"Enter login email address"}),l.login_email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.login_email})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-sky-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(i,{htmlFor:"alternate_email",className:"text-base font-semibold",children:"Alternate Email"})}),e.jsx(c,{id:"alternate_email",type:"email",value:r.alternate_email,onChange:s=>t("alternate_email",s.target.value),placeholder:"Enter alternate email address"}),l.alternate_email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.alternate_email})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-indigo-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(i,{htmlFor:"mobile",className:"text-base font-semibold",children:"Mobile Phone"})}),e.jsx(c,{id:"mobile",value:r.mobile,onChange:s=>t("mobile",s.target.value),placeholder:"Enter mobile phone number"}),l.mobile&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.mobile})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-pink-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(i,{htmlFor:"emergency_phone",className:"text-base font-semibold",children:"Emergency Phone"})}),e.jsx(c,{id:"emergency_phone",value:r.emergency_phone,onChange:s=>t("emergency_phone",s.target.value),placeholder:"Enter emergency phone number"}),l.emergency_phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.emergency_phone})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-red-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(i,{htmlFor:"cash_or_check",className:"text-base font-semibold",children:"Payment Method"})}),e.jsx(g,{value:r.cash_or_check,onValueChange:s=>t("cash_or_check",s),name:"cash_or_check",options:[{value:"Cash",label:"Cash"},{value:"Check",label:"Check"}]}),l.cash_or_check&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.cash_or_check})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-yellow-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(i,{htmlFor:"has_insurance",className:"text-base font-semibold",children:"Has Insurance"})}),e.jsx(g,{value:r.has_insurance,onValueChange:s=>t("has_insurance",s),name:"has_insurance",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}]}),l.has_insurance&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.has_insurance})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-cyan-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(i,{htmlFor:"sensitive_communication",className:"text-base font-semibold",children:"Sensitive Communication"})}),e.jsx(g,{value:r.sensitive_communication,onValueChange:s=>t("sensitive_communication",s),name:"sensitive_communication",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}]}),l.sensitive_communication&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.sensitive_communication})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-violet-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(i,{htmlFor:"has_assistance",className:"text-base font-semibold",children:"Has Assistance"})}),e.jsx(g,{value:r.has_assistance,onValueChange:s=>t("has_assistance",s),name:"has_assistance",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}]}),l.has_assistance&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.has_assistance})]}),r.has_assistance==="Yes"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"rounded-lg border-l-4 border-l-rose-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(i,{htmlFor:"assistance_amount",className:"text-base font-semibold",children:"Assistance Amount"})}),e.jsx(c,{id:"assistance_amount",type:"number",step:"0.01",value:r.assistance_amount,onChange:s=>t("assistance_amount",s.target.value),placeholder:"Enter assistance amount"}),l.assistance_amount&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.assistance_amount})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-amber-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(i,{htmlFor:"assistance_company",className:"text-base font-semibold",children:"Assistance Company"})}),e.jsx(c,{id:"assistance_company",value:r.assistance_company,onChange:s=>t("assistance_company",s.target.value),placeholder:"Enter assistance company name"}),l.assistance_company&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.assistance_company})]})]})]})}),e.jsx(W,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{onClick:D,disabled:y,className:"flex-1",children:y?"Updating...":"Update Tenant"}),e.jsx(I,{variant:"outline",onClick:G,disabled:y,children:"Cancel"})]})})]})})})}export{Se as default};
