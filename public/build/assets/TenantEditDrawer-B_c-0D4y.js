import{r as o,b as H,j as t}from"./app-DYme-6ST.js";import{B as j}from"./button-DygVteL_.js";import{D as T,a as $,b as z}from"./drawer-BC2XqbDZ.js";import M from"./LocationSection-BqQZZ_7s.js";import Y from"./PersonalInfoSection-DR7XDhLe.js";import q from"./ContactInfoSection-CS5Esfld.js";import G from"./PreferencesSection-R3UjdGCk.js";import J from"./AssistanceSection-BNEyYsV6.js";import"./app-BxoA0TtB.js";import"./index-DAeyJQLn.js";import"./index-CdJFUDDL.js";import"./utils-CBfrqCZ4.js";import"./index-BPUi24BT.js";import"./index-yvkaECEW.js";import"./index-B3RZid5o.js";import"./index-wTYJRjsu.js";import"./index-Dt2fvjT8.js";import"./index-DRjsfxtL.js";import"./x-xoZkVJyy.js";import"./createLucideIcon-Dwp8kkct.js";import"./label-Cs5jgoI2.js";import"./select-CPtJWUF5.js";import"./index-Dc_FVRD7.js";import"./index-D6kz9xqy.js";import"./index-DZXKY85H.js";import"./index-x8Nhs1r4.js";import"./index-DYyhglSa.js";import"./index-CadWMiU4.js";import"./chevron-down-CDnjTFxC.js";import"./check-B5KXzRGR.js";import"./chevron-up-3w0W2Y4A.js";import"./input-pR7fOcUW.js";import"./radioGroup-F0AlgpLY.js";function ke({tenant:s,cities:E,properties:_,unitsByProperty:c,open:k,onOpenChange:g,onSuccess:A}){const h=o.useRef(null),u=o.useRef(null),[N,m]=o.useState(""),[P,n]=o.useState(""),[I,p]=o.useState([]),[w,C]=o.useState([]),[b,d]=o.useState(""),{data:i,setData:a,put:D,processing:y,errors:l}=H({unit_id:s.unit_id?.toString()??"",first_name:s.first_name??"",last_name:s.last_name??"",street_address_line:s.street_address_line??"",login_email:s.login_email??"",alternate_email:s.alternate_email??"",mobile:s.mobile??"",emergency_phone:s.emergency_phone??"",cash_or_check:s.cash_or_check??"",has_insurance:s.has_insurance??"",sensitive_communication:s.sensitive_communication??"",has_assistance:s.has_assistance??"",assistance_amount:s.assistance_amount?.toString()??"",assistance_company:s.assistance_company??""}),S=()=>s.property_name?_.find(r=>r.property_name===s.property_name)?.city_id?.toString()??"":"",[f,x]=o.useState(S());o.useEffect(()=>{if(f){const e=_.filter(r=>r.city_id?.toString()===f);C(e)}s.property_name&&(d(s.property_name),c[s.property_name]&&p(c[s.property_name]))},[f,s.property_name,_,c]);const U=e=>{if(x(e),d(""),a("unit_id",""),m(""),n(""),e){const r=_.filter(L=>L.city_id?.toString()===e);C(r)}else C([]);p([])},V=e=>{d(e),a("unit_id",""),m(""),n(""),e&&c&&c[e]?p(c[e]):p([])},R=e=>{a("unit_id",e),n("")},v=e=>{e.preventDefault(),m(""),n("");let r=!1;(!b||b.trim()==="")&&(m("Please select a property before submitting the form."),h.current&&(h.current.focus(),h.current.scrollIntoView({behavior:"smooth",block:"center"})),r=!0),(!i.unit_id||i.unit_id.trim()==="")&&(n("Please select a unit before submitting the form."),u.current&&(u.current.focus(),u.current.scrollIntoView({behavior:"smooth",block:"center"})),r=!0),!r&&D(route("tenants.update",s.id),{onSuccess:()=>{m(""),n(""),g(!1),A?.()}})},F=()=>{a({unit_id:s.unit_id?.toString()??"",first_name:s.first_name??"",last_name:s.last_name??"",street_address_line:s.street_address_line??"",login_email:s.login_email??"",alternate_email:s.alternate_email??"",mobile:s.mobile??"",emergency_phone:s.emergency_phone??"",cash_or_check:s.cash_or_check??"",has_insurance:s.has_insurance??"",sensitive_communication:s.sensitive_communication??"",has_assistance:s.has_assistance??"",assistance_amount:s.assistance_amount?.toString()??"",assistance_company:s.assistance_company??""}),m(""),n(""),x(S()),d(s.property_name??""),g(!1)};return t.jsx(T,{open:k,onOpenChange:g,modal:!1,children:t.jsx($,{size:"half",title:`Edit ${s.first_name} ${s.last_name}`,children:t.jsxs("div",{className:"flex h-full flex-col",children:[t.jsx("div",{className:"flex-1 overflow-auto p-6",children:t.jsxs("form",{onSubmit:v,className:"space-y-4",children:[t.jsx(M,{cities:E,selectedCityId:f,onCityChange:U,availableProperties:w,selectedPropertyName:b,onPropertyChange:V,propertyNameRef:h,validationError:N,availableUnits:I,unitId:i.unit_id,onUnitChange:R,unitNumberRef:u,unitValidationError:P,errors:l}),t.jsx(Y,{firstName:i.first_name,lastName:i.last_name,streetAddress:i.street_address_line,onFirstNameChange:e=>a("first_name",e),onLastNameChange:e=>a("last_name",e),onStreetAddressChange:e=>a("street_address_line",e),errors:l}),t.jsx(q,{loginEmail:i.login_email,alternateEmail:i.alternate_email,mobile:i.mobile,emergencyPhone:i.emergency_phone,onLoginEmailChange:e=>a("login_email",e),onAlternateEmailChange:e=>a("alternate_email",e),onMobileChange:e=>a("mobile",e),onEmergencyPhoneChange:e=>a("emergency_phone",e),errors:l}),t.jsx(G,{cashOrCheck:i.cash_or_check,hasInsurance:i.has_insurance,sensitiveCommunication:i.sensitive_communication,hasAssistance:i.has_assistance,onCashOrCheckChange:e=>a("cash_or_check",e),onHasInsuranceChange:e=>a("has_insurance",e),onSensitiveCommunicationChange:e=>a("sensitive_communication",e),onHasAssistanceChange:e=>a("has_assistance",e),errors:l}),i.has_assistance==="Yes"&&t.jsx(J,{assistanceAmount:i.assistance_amount,assistanceCompany:i.assistance_company,onAssistanceAmountChange:e=>a("assistance_amount",e),onAssistanceCompanyChange:e=>a("assistance_company",e),errors:l})]})}),t.jsx(z,{children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx(j,{onClick:v,disabled:y,className:"flex-1",children:y?"Updating...":"Update Tenant"}),t.jsx(j,{variant:"outline",onClick:F,disabled:y,children:"Cancel"})]})})]})})})}export{ke as default};
