import{r as n,b as G,j as a}from"./app-XlMZG7vD.js";import{B as j}from"./button-D56PIbu9.js";import{D as J,a as K,b as Q}from"./drawer-B7-2XtV2.js";import{CitySelectionSection as W}from"./CitySelectionSection-BlFjZNJE.js";import{PropertySelectionSection as X}from"./PropertySelectionSection-D6qhJESl.js";import{UnitSelectionSection as Z}from"./UnitSelectionSection-uQVglmLt.js";import{PersonalInformationSection as $}from"./PersonalInformationSection-DsiQ0L6X.js";import{ContactInformationSection as ee}from"./ContactInformationSection-B3sn1Vh8.js";import{PaymentAndPreferencesSection as te}from"./PaymentAndPreferencesSection-CoLMJdGZ.js";import{AssistanceSection as re}from"./AssistanceSection-C13uRxqZ.js";import"./app-D9zByHv3.js";import"./index-D09_T-bu.js";import"./index-CdJFUDDL.js";import"./utils-CBfrqCZ4.js";import"./index-CUT4GDty.js";import"./index-C_K36Fy_.js";import"./index-BoN4SSkO.js";import"./index-pZGqFUGS.js";import"./index-DqP218B8.js";import"./index-D2DcuX69.js";import"./x-B-P-7DDz.js";import"./createLucideIcon-BneQKrth.js";import"./label-BKN3erGN.js";import"./popover-DR8Y8CsW.js";import"./index-CTF06pqo.js";import"./command-DGwO2Uw9.js";import"./search-BKBHV1D6.js";import"./chevrons-up-down-CmSv9Nzf.js";import"./check-ZO7ekD6P.js";import"./FormField-DM4NdY01.js";import"./input-nhBJFe9F.js";import"./RadioGroupField-DykVnrYK.js";import"./radioGroup-DrlpglLG.js";import"./index-D8BBDizX.js";import"./index-DdpYxxi8.js";function Fe({cities:A,properties:P,unitsByProperty:d,open:k,onOpenChange:g,onSuccess:V,currentFilters:m,page:w,perPage:R}){const l=n.useRef(null),u=n.useRef(null),h=n.useRef(null),f=n.useRef(null),[D,c]=n.useState(""),[I,o]=n.useState(""),[U,C]=n.useState(""),[L,b]=n.useState(""),[T,_]=n.useState([]),[F,E]=n.useState([]),[p,v]=n.useState(""),{data:t,setData:r,post:H,processing:x,errors:s,reset:z,transform:M}=G({unit_id:"",first_name:"",last_name:"",street_address_line:"",login_email:"",alternate_email:"",mobile:"",emergency_phone:"",cash_or_check:"",has_insurance:"",sensitive_communication:"",has_assistance:"",assistance_amount:"",assistance_company:"",city_id:""}),S=()=>{z(),c(""),o(""),C(""),b(""),_([]),E([]),v("")},O=e=>{if(r("city_id",e),r("unit_id",""),v(""),c(""),o(""),e){const i=P.filter(y=>y.city_id?.toString()===e);E(i)}else E([]);_([])},Y=e=>{v(e),r("unit_id",""),c(""),o(""),e&&d&&d[e]?_(d[e]):_([])},q=e=>{r("unit_id",e),o("")},N=e=>{e.preventDefault(),c(""),o(""),C(""),b("");let i=!1;(!p||p.trim()==="")&&(c("Please select a property before submitting the form."),l.current&&(l.current.focus(),l.current.scrollIntoView({behavior:"smooth",block:"center"})),i=!0),(!t.unit_id||t.unit_id.trim()==="")&&(o("Please select a unit before submitting the form."),u.current&&(u.current.focus(),u.current.scrollIntoView({behavior:"smooth",block:"center"})),i=!0),(!t.first_name||t.first_name.trim()==="")&&(C("Please enter a first name before submitting the form."),h.current&&(h.current.focus(),h.current.scrollIntoView({behavior:"smooth",block:"center"})),i=!0),(!t.last_name||t.last_name.trim()==="")&&(b("Please enter a last name before submitting the form."),f.current&&(f.current.focus(),f.current.scrollIntoView({behavior:"smooth",block:"center"})),i=!0),!i&&(M(y=>({...y,search:m?.search??"",city:m?.city??"",property:m?.property??"",unit_name:m?.unitName??"",perPage:R??15,page:w??1})),H(route("tenants.store"),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{S(),g(!1),V?.()}}))},B=()=>{S(),g(!1)};return a.jsx(J,{open:k,onOpenChange:g,modal:!1,children:a.jsx(K,{size:"half",title:"Create New Tenant",children:a.jsxs("div",{className:"flex h-full flex-col",children:[a.jsx("div",{className:"flex-1 overflow-auto p-6",children:a.jsxs("form",{onSubmit:N,className:"space-y-4",children:[a.jsx(W,{cities:A,value:t.city_id,onChange:O,error:s.city_id}),a.jsx(X,{ref:l,properties:F,value:p,onChange:Y,disabled:!t.city_id,validationError:D}),a.jsx(Z,{ref:u,units:T,value:t.unit_id,onChange:q,disabled:!p,error:s.unit_id,validationError:I}),a.jsx($,{firstNameRef:h,lastNameRef:f,firstName:t.first_name,lastName:t.last_name,streetAddress:t.street_address_line,onFirstNameChange:e=>r("first_name",e),onLastNameChange:e=>r("last_name",e),onStreetAddressChange:e=>r("street_address_line",e),firstNameError:s.first_name,lastNameError:s.last_name,streetAddressError:s.street_address_line,firstNameValidationError:U,lastNameValidationError:L}),a.jsx(ee,{loginEmail:t.login_email,alternateEmail:t.alternate_email,mobile:t.mobile,emergencyPhone:t.emergency_phone,onLoginEmailChange:e=>r("login_email",e),onAlternateEmailChange:e=>r("alternate_email",e),onMobileChange:e=>r("mobile",e),onEmergencyPhoneChange:e=>r("emergency_phone",e),loginEmailError:s.login_email,alternateEmailError:s.alternate_email,mobileError:s.mobile,emergencyPhoneError:s.emergency_phone}),a.jsx(te,{cashOrCheck:t.cash_or_check,hasInsurance:t.has_insurance,sensitiveCommunication:t.sensitive_communication,hasAssistance:t.has_assistance,onCashOrCheckChange:e=>r("cash_or_check",e),onHasInsuranceChange:e=>r("has_insurance",e),onSensitiveCommunicationChange:e=>r("sensitive_communication",e),onHasAssistanceChange:e=>r("has_assistance",e),cashOrCheckError:s.cash_or_check,hasInsuranceError:s.has_insurance,sensitiveCommunicationError:s.sensitive_communication,hasAssistanceError:s.has_assistance}),t.has_assistance==="Yes"&&a.jsx(re,{assistanceAmount:t.assistance_amount,assistanceCompany:t.assistance_company,onAssistanceAmountChange:e=>r("assistance_amount",e),onAssistanceCompanyChange:e=>r("assistance_company",e),assistanceAmountError:s.assistance_amount,assistanceCompanyError:s.assistance_company})]})}),a.jsx(Q,{children:a.jsxs("div",{className:"flex gap-2 w-full",children:[a.jsx(j,{type:"button",variant:"outline",onClick:B,className:"flex-1",children:"Cancel"}),a.jsx(j,{type:"submit",onClick:N,disabled:x,className:"flex-1",children:x?"Creating...":"Create Tenant"})]})})]})})})}export{Fe as default};
