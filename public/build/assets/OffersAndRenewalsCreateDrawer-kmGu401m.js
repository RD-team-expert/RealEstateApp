import{r as d,b as A,j as o}from"./app-mUrH0ynJ.js";import{B as y}from"./button-BFBNYzQ-.js";import{D as E,a as P,b as T}from"./drawer-B7FkQmZP.js";import F from"./CascadingSelectors-CCQmHYcR.js";import K from"./OfferInformationSection-BYcWqPiE.js";import B from"./AcceptanceSection-Dctcmpa8.js";import U from"./LeaseInformationSection-BCZlCBhD.js";import z from"./RenewalInformationSection-Cw6OUjLD.js";import q from"./AdditionalFieldsSection-BBdO4lDj.js";import G from"./DateOfDeclineSection-afR_95Ah.js";import"./app-BxoA0TtB.js";import"./index-Co1yv0YL.js";import"./index-CdJFUDDL.js";import"./utils-CBfrqCZ4.js";import"./index-CQgkcMAl.js";import"./index-CgzaaCP9.js";import"./index-Do303mGv.js";import"./index-D9BBn6e9.js";import"./index-bRwiAiPA.js";import"./index-kDRJ7vWo.js";import"./x-BVVw4O5L.js";import"./createLucideIcon-DUXn48BB.js";import"./label-DmNL2-zA.js";import"./select-NL-VGbzo.js";import"./index-Dc_FVRD7.js";import"./index-DK4fbPLM.js";import"./index-CXBw7cFo.js";import"./index-DEcWu7_s.js";import"./index-5IheD20q.js";import"./index-p6YNWFgp.js";import"./chevron-down-CcniYHCH.js";import"./check-nxBTAIc9.js";import"./chevron-up-Cls6AU_3.js";import"./input-Bo52L6_R.js";import"./DatePickerField-DS8OgBu9.js";import"./calendar-DAc8iCNl.js";import"./format-PYUiRpxY.js";import"./chevron-left-Bx0Sy0a0.js";import"./chevron-right-o746ehSI.js";import"./popover-B07j7TfD.js";import"./calendar-e6qKYHCo.js";import"./RadioGroupField-CwtwI2qb.js";import"./radioGroup-DvkZrWpP.js";function Ae({hierarchicalData:x,open:b,onOpenChange:u,onSuccess:O}){const _=d.useRef(null),f=d.useRef(null),p=d.useRef(null),m=d.useRef(null),[h,i]=d.useState({}),[s,j]=d.useState({date_sent_offer:!1,date_of_acceptance:!1,last_notice_sent:!1,date_sent_lease:!1,date_signed:!1,last_notice_sent_2:!1,date_of_decline:!1}),l=(e,n)=>{j(c=>({...c,[e]:n}))},{data:t,setData:a,post:D,processing:g,errors:r,reset:C}=A({tenant_id:"",city_id:"",property_id:"",unit_id:"",other_tenants:"",date_sent_offer:"",status:"",date_of_acceptance:"",last_notice_sent:"",notice_kind:"",lease_sent:"",date_sent_lease:"",lease_signed:"",date_signed:"",last_notice_sent_2:"",notice_kind_2:"",notes:"",date_of_decline:""}),v=e=>{a({...t,city_id:e,property_id:"",unit_id:"",tenant_id:""}),i(n=>({...n,city:void 0}))},w=e=>{a({...t,property_id:e,unit_id:"",tenant_id:""}),i(n=>({...n,property:void 0}))},R=e=>{a({...t,unit_id:e,tenant_id:""}),i(n=>({...n,unit:void 0}))},k=e=>{a("tenant_id",e),i(n=>({...n,tenant:void 0}))},N=e=>{a("other_tenants",e)},I=e=>{a("date_sent_offer",e),i(n=>({...n,date_sent_offer:void 0}))},L=e=>{a("date_of_decline",e)},S=e=>{e.preventDefault(),i({});let n=!1;const c={};if((!t.city_id||t.city_id.trim()==="")&&(c.city="Please select a city before submitting the form.",_.current&&(_.current.focus(),_.current.scrollIntoView({behavior:"smooth",block:"center"})),n=!0),(!t.property_id||t.property_id.trim()==="")&&(c.property="Please select a property before submitting the form.",f.current&&!n&&(f.current.focus(),f.current.scrollIntoView({behavior:"smooth",block:"center"})),n=!0),(!t.unit_id||t.unit_id.trim()==="")&&(c.unit="Please select a unit before submitting the form.",p.current&&!n&&(p.current.focus(),p.current.scrollIntoView({behavior:"smooth",block:"center"})),n=!0),(!t.tenant_id||t.tenant_id.trim()==="")&&(c.tenant="Please select a tenant before submitting the form.",m.current&&!n&&(m.current.focus(),m.current.scrollIntoView({behavior:"smooth",block:"center"})),n=!0),n){i(c);return}D(route("offers_and_renewals.store"),{onSuccess:()=>{C(),i({}),u(!1),O?.()}})},V=()=>{C(),i({}),u(!1)};return o.jsx(E,{open:b,onOpenChange:u,modal:!1,children:o.jsx(P,{size:"half",title:"Create New Offer/Renewal",children:o.jsxs("div",{className:"flex h-full flex-col",children:[o.jsx("div",{className:"flex-1 overflow-auto p-6",children:o.jsxs("form",{onSubmit:S,className:"space-y-4",children:[o.jsx(F,{hierarchicalData:x,cityId:t.city_id,propertyId:t.property_id,unitId:t.unit_id,tenantId:t.tenant_id,otherTenants:t.other_tenants,onCityChange:v,onPropertyChange:w,onUnitChange:R,onTenantChange:k,onOtherTenantsChange:N,errors:r,validationErrors:h,cityRef:_,propertyRef:f,unitRef:p,tenantRef:m}),o.jsx(K,{dateSentOffer:t.date_sent_offer,status:t.status,onDateSentOfferChange:I,onStatusChange:e=>a("status",e),errors:r,validationErrors:h,calendarOpen:s.date_sent_offer,onCalendarOpenChange:e=>l("date_sent_offer",e)}),t.status==="Didn't Accept"?o.jsx(G,{dateOfDecline:t.date_of_decline,onDateOfDeclineChange:L,errors:r,calendarOpen:s.date_of_decline,onCalendarOpenChange:e=>l("date_of_decline",e)}):o.jsxs(o.Fragment,{children:[o.jsx(B,{dateOfAcceptance:t.date_of_acceptance,lastNoticeSent:t.last_notice_sent,noticeKind:t.notice_kind,onDateOfAcceptanceChange:e=>a("date_of_acceptance",e),onLastNoticeSentChange:e=>a("last_notice_sent",e),onNoticeKindChange:e=>a("notice_kind",e),errors:r,calendarStates:{date_of_acceptance:s.date_of_acceptance,last_notice_sent:s.last_notice_sent},onCalendarOpenChange:l}),o.jsx(U,{leaseSent:t.lease_sent,dateSentLease:t.date_sent_lease,leaseSigned:t.lease_signed,dateSigned:t.date_signed,onLeaseSentChange:e=>a("lease_sent",e),onDateSentLeaseChange:e=>a("date_sent_lease",e),onLeaseSignedChange:e=>a("lease_signed",e),onDateSignedChange:e=>a("date_signed",e),errors:r,calendarStates:{date_sent_lease:s.date_sent_lease,date_signed:s.date_signed},onCalendarOpenChange:l}),o.jsx(z,{lastNoticeSent2:t.last_notice_sent_2,noticeKind2:t.notice_kind_2,onLastNoticeSent2Change:e=>a("last_notice_sent_2",e),onNoticeKind2Change:e=>a("notice_kind_2",e),errors:r,calendarOpen:s.last_notice_sent_2,onCalendarOpenChange:e=>l("last_notice_sent_2",e)}),o.jsx(q,{notes:t.notes,onNotesChange:e=>a("notes",e),errors:r})]})]})}),o.jsx(T,{children:o.jsxs("div",{className:"flex gap-2 justify-end",children:[o.jsx(y,{type:"button",variant:"outline",onClick:V,children:"Cancel"}),o.jsx(y,{type:"submit",onClick:S,disabled:g,children:g?"Creating...":"Create Offer/Renewal"})]})})]})})})}export{Ae as default};
