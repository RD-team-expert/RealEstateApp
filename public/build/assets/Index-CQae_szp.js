import{r as A,a as D,j as e,H as E,L as u,b as p}from"./app-CGrKwaDB.js";import{u as S,A as I}from"./app-layout-BYmuOqnb.js";import{B as o}from"./app-logo-icon-CKCvhyUf.js";import{I as j}from"./input-CMG5rO1B.js";import{C as c,c as x,a as L,b as B}from"./card-SLIn0jLe.js";import{P as H,T as F,a as z,b as v,c as r,d as M,e as t,f as R}from"./table-BHKvUkYd.js";import{B as y}from"./badge-34XoFXbi.js";import{E as q}from"./eye-BuFzPXHQ.js";import{S as $}from"./square-pen-C949YzdE.js";import"./app-CpGTTCLS.js";import"./index-CyndH3ya.js";import"./index-CD0lBVmf.js";function re({auth:G,properties:a,statistics:m,filters:N}){const{hasPermission:f,hasAnyPermission:g,hasAllPermissions:b}=S(),[i,w]=A.useState(N),{flash:n}=D().props,d=(s,l)=>{const h={...i,[s]:l};w(h),p.get(route("properties-info.index"),h,{preserveState:!0,preserveScroll:!0})},_=s=>{confirm("Are you sure you want to delete this property?")&&p.delete(route("properties-info.destroy",s.id))},C=s=>s.status==="Expired"?e.jsx(y,{variant:"destructive",children:"Expired"}):e.jsx(y,{variant:"default",className:"bg-green-100 text-green-800 hover:bg-green-100",children:"Active"}),P=s=>{const l=new Date,T=new Date(s).getTime()-l.getTime();return Math.ceil(T/(1e3*60*60*24))};return e.jsxs(I,{children:[e.jsx(E,{title:"Properties Insurance"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[n?.success&&e.jsx("div",{className:"mb-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded",children:n.success}),n?.error&&e.jsx("div",{className:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:n.error}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx(c,{children:e.jsxs(x,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Total Properties"}),e.jsx("p",{className:"text-3xl font-bold text-primary",children:m.total})]})}),e.jsx(c,{children:e.jsxs(x,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Active"}),e.jsx("p",{className:"text-3xl font-bold text-chart-1",children:m.active})]})}),e.jsx(c,{children:e.jsxs(x,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Expired"}),e.jsx("p",{className:"text-3xl font-bold text-destructive",children:m.expired})]})})]}),e.jsxs(c,{children:[e.jsxs(L,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(B,{className:"text-2xl",children:"Property Insurance List"}),b(["properties.create","properties.store"])&&e.jsx(u,{href:route("properties-info.create"),children:e.jsxs(o,{children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Add Property"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-4",children:[e.jsx(j,{type:"text",placeholder:"Property Name",value:i.property_name||"",onChange:s=>d("property_name",s.target.value)}),e.jsx(j,{type:"text",placeholder:"Insurance Company",value:i.insurance_company_name||"",onChange:s=>d("insurance_company_name",s.target.value)}),e.jsx(j,{type:"text",placeholder:"Policy Number",value:i.policy_number||"",onChange:s=>d("policy_number",s.target.value)}),e.jsxs("select",{value:i.status||"",onChange:s=>d("status",s.target.value),className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Expired",children:"Expired"})]})]})]}),e.jsxs(x,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(F,{children:[e.jsx(z,{children:e.jsxs(v,{children:[e.jsx(r,{children:"Property Name"}),e.jsx(r,{children:"Insurance Company"}),e.jsx(r,{children:"Amount"}),e.jsx(r,{children:"Effective Date"}),e.jsx(r,{children:"Policy Number"}),e.jsx(r,{children:"Expiration Date"}),e.jsx(r,{children:"Days Left"}),e.jsx(r,{children:"Status"}),g(["properties.destroy","properties.update","properties.edit","properties.show"])&&e.jsx(r,{children:"Actions"})]})}),e.jsx(M,{children:a.data.map(s=>e.jsxs(v,{className:"hover:bg-gray-50",children:[e.jsx(t,{className:"font-medium",children:s.property_name}),e.jsx(t,{children:s.insurance_company_name}),e.jsx(t,{children:s.formatted_amount}),e.jsx(t,{children:s.effective_date}),e.jsx(t,{children:s.policy_number}),e.jsx(t,{children:s.expiration_date}),e.jsx(t,{children:P(s.expiration_date)}),e.jsx(t,{children:C(s)}),g(["properties.destroy","properties.update","properties.edit","properties.show"])&&e.jsx(t,{children:e.jsxs("div",{className:"flex gap-1",children:[f("properties.show")&&e.jsx(u,{href:route("properties-info.show",s.id),children:e.jsx(o,{variant:"outline",size:"sm",children:e.jsx(q,{className:"h-4 w-4"})})}),b(["properties.update","properties.edit"])&&e.jsx(u,{href:route("properties-info.edit",s.id),children:e.jsx(o,{variant:"outline",size:"sm",children:e.jsx($,{className:"h-4 w-4"})})}),f("properties.destroy")&&e.jsx(o,{variant:"outline",size:"sm",onClick:()=>_(s),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(R,{className:"h-4 w-4"})})]})})]},s.id))})]})}),a.data.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("p",{className:"text-lg",children:"No properties found."}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search criteria."})]}),a.last_page>1&&e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx("nav",{className:"flex space-x-2",children:a.links.map((s,l)=>e.jsx("button",{onClick:()=>s.url&&p.get(s.url),disabled:!s.url,className:`px-3 py-2 text-sm rounded ${s.active?"bg-blue-500 text-white":s.url?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:s.label}},l))})}),a.meta&&e.jsx("div",{className:"mt-6 flex justify-between items-center",children:e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",a.meta.from||0," to ",a.meta.to||0," of ",a.meta.total||0," results"]})})]})]})]})})]})}export{re as default};
