import{r as d,b as A,j as r}from"./app-BSOlzI_M.js";import{B as E}from"./button-D2rKFPK1.js";import{D as I,a as L,b as Q}from"./drawer-B6ZRXvIZ.js";import U from"./CityField-AjkpWNMC.js";import W from"./VendorNameField-DgCi5i0J.js";import $ from"./PhoneNumberField-CQjSjS2l.js";import G from"./EmailField-By-8vPbv.js";import H from"./ServiceTypeField-hKVF0dLe.js";import"./app-D9zByHv3.js";import"./index-ByB7CnZO.js";import"./index-CdJFUDDL.js";import"./utils-CBfrqCZ4.js";import"./index-09CEhTtY.js";import"./index-BK07_5Wa.js";import"./index-C5g_kYK6.js";import"./index-DIXGfQsU.js";import"./index-BLt4aHaa.js";import"./index-Eh5rTZKr.js";import"./x-V2a7Zg3Q.js";import"./createLucideIcon-BGWKpKjb.js";import"./label-ku6Bo0xE.js";import"./popover-CKsI89_0.js";import"./index-C4PIvpnm.js";import"./command-CBR154ui.js";import"./search-BcNZ_u8M.js";import"./input-DWv8_Yxn.js";import"./plus-DpdyZws7.js";import"./trash-2-CnyQPA5D.js";import"./select-Ckv1zRlQ.js";import"./index-Dc_FVRD7.js";import"./index-p7EaCzMM.js";import"./index-CJ72cHre.js";import"./index-C4dPa-2_.js";import"./chevron-down--Oeingn_.js";import"./check-BE4k6INO.js";import"./chevron-up-RzjEL1k0.js";function Fe({cities:g,open:w,onOpenChange:h,onSuccess:S}){const p=d.useRef(null),u=d.useRef(null),[V,n]=d.useState(""),[N,a]=d.useState(""),[,v]=d.useState(""),{data:t,setData:s,post:F,processing:x,errors:i,reset:C,transform:D}=A({city_id:"",vendor_name:"",number:[],email:[],service_type:[]}),y=e=>{if(i[e])return i[e];const o=Object.keys(i).find(m=>m.startsWith(`${e}.`));if(o)return i[o]},R=e=>{s("city_id",e);const o=g.find(m=>m.id.toString()===e);v(o?o.city:""),n("")},k=e=>{s("vendor_name",e.target.value),a("")},P=e=>{s("number",e)},B=e=>{s("email",e)},T=e=>{s("service_type",e)},j=e=>{e.preventDefault(),n(""),a("");let o=!1;if((!t.city_id||t.city_id.trim()==="")&&(n("Please select a city before submitting the form."),p.current&&(p.current.focus(),p.current.scrollIntoView({behavior:"smooth",block:"center"})),o=!0),(!t.vendor_name||t.vendor_name.trim()==="")&&(a("Please enter a vendor name before submitting the form."),u.current&&(u.current.focus(),u.current.scrollIntoView({behavior:"smooth",block:"center"})),o=!0),o)return;const m=()=>{try{const _=new URLSearchParams(window.location.search),f=["city","city_id","vendor_name","number","email","per_page","page"],l={};return f.forEach(b=>{const c=_.get(b);c!==null&&(l[b]=c)}),l}catch{return{}}};D(_=>{const f=m(),l={};return[["city","filter_city"],["city_id","filter_city_id"],["vendor_name","filter_vendor_name"],["number","filter_number"],["email","filter_email"],["per_page","filter_per_page"],["page","filter_page"]].forEach(([c,z])=>{f[c]!==void 0&&(l[z]=f[c])}),{..._,...l}}),F(route("vendors.store"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{C(),v(""),n(""),a(""),h(!1),S?.()}})},q=()=>{C(),v(""),n(""),a(""),h(!1)};return r.jsx(I,{open:w,onOpenChange:h,modal:!1,children:r.jsx(L,{size:"half",title:"Create New Vendor",children:r.jsxs("div",{className:"flex h-full flex-col",children:[r.jsx("div",{className:"flex-1 overflow-auto p-6",children:r.jsxs("form",{onSubmit:j,className:"space-y-4",children:[r.jsx(U,{cities:g,value:t.city_id,onChange:R,error:i.city_id,validationError:V,ref:p}),r.jsx(W,{value:t.vendor_name,onChange:k,error:i.vendor_name,validationError:N,ref:u}),r.jsx($,{value:t.number,onChange:P,error:y("number")}),r.jsx(G,{value:t.email,onChange:B,error:y("email")}),r.jsx(H,{value:t.service_type,onChange:T,error:y("service_type")})]})}),r.jsxs(Q,{className:"flex-row justify-end gap-2 border-t bg-muted/50 p-4",children:[r.jsx(E,{type:"button",variant:"outline",onClick:q,children:"Cancel"}),r.jsx(E,{type:"submit",onClick:j,disabled:x,children:x?"Creating...":"Create Vendor"})]})]})})})}export{Fe as default};
