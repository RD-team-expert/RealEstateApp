import{r as n,b as S,j as r}from"./app-CHDKARjb.js";import{B as b}from"./button-DVMLQ4Cf.js";import{D as w,a as D,b as F}from"./drawer-DBQSSrTa.js";import R from"./CityField-BUggqX_A.js";import k from"./VendorNameField-DgZLwOgg.js";import I from"./PhoneNumberField-B52_OUtL.js";import P from"./EmailField-C4YvuCCM.js";import B from"./ServiceTypeField-RLJcU9bk.js";import"./app-BmbQfT0_.js";import"./index-DzrNkgKa.js";import"./utils-CBfrqCZ4.js";import"./index-DH5c0sFq.js";import"./index-Dc_FVRD7.js";import"./index-BMM8wKPv.js";import"./index-DhGOy-yS.js";import"./index-Bc-3DsyS.js";import"./index-DzT3tnb6.js";import"./index-q1apwmMP.js";import"./index-0tk3grE1.js";import"./index-DfGTd3cq.js";import"./x-DzxxLS5y.js";import"./createLucideIcon-C7c1hvIj.js";import"./label-DcQ_-sMZ.js";import"./select-DSkJK3rS.js";import"./index-DiN52TcP.js";import"./index-DUM9UyY6.js";import"./index-CwBu8RV2.js";import"./index-qPHptkmt.js";import"./index-vBQwvlXi.js";import"./chevron-down-qX4-vl1q.js";import"./check-Ck6Rqaxz.js";import"./chevron-up-DiltP7zF.js";import"./input-CESuFFYh.js";import"./radioGroup-DeMlaPSu.js";function _e({vendor:e,cities:f,open:h,onOpenChange:p,onSuccess:x}){const l=n.useRef(null),u=n.useRef(null),[v,m]=n.useState(""),[g,s]=n.useState(""),[,d]=n.useState(""),{data:o,setData:a,put:j,processing:y,errors:c}=S({city_id:e?.city_id?.toString()||"",vendor_name:e?.vendor_name||"",number:e?.number||"",email:e?.email||"",service_type:e?.service_type||""});n.useEffect(()=>{if(e){const t=e.city_id?.toString()||"",i=e.city?.city||"";a({city_id:t,vendor_name:e.vendor_name,number:e.number||"",email:e.email||"",service_type:e.service_type||""}),d(i)}},[e]);const C=t=>{a("city_id",t);const i=f.find(V=>V.id.toString()===t);d(i?i.city:""),m("")},N=t=>{a("vendor_name",t.target.value),s("")},_=t=>{if(t.preventDefault(),!e)return;m(""),s("");let i=!1;(!o.city_id||o.city_id.trim()==="")&&(m("Please select a city before submitting the form."),l.current&&(l.current.focus(),l.current.scrollIntoView({behavior:"smooth",block:"center"})),i=!0),(!o.vendor_name||o.vendor_name.trim()==="")&&(s("Please enter a vendor name before submitting the form."),u.current&&(u.current.focus(),u.current.scrollIntoView({behavior:"smooth",block:"center"})),i=!0),!i&&j(route("vendors.update",e.id),{onSuccess:()=>{m(""),s(""),p(!1),x?.()}})},E=()=>{if(e){const t=e.city_id?.toString()||"",i=e.city?.city||"";a({city_id:t,vendor_name:e.vendor_name,number:e.number||"",email:e.email||"",service_type:e.service_type||""}),d(i)}m(""),s(""),p(!1)};return e?r.jsx(w,{open:h,onOpenChange:p,modal:!1,children:r.jsx(D,{size:"half",title:`Edit Vendor - ${e.vendor_name}`,children:r.jsxs("div",{className:"flex h-full flex-col",children:[r.jsx("div",{className:"flex-1 overflow-auto p-6",children:r.jsxs("form",{onSubmit:_,className:"space-y-4",children:[r.jsx(R,{cityRef:l,value:o.city_id,cities:f,onChange:C,error:c.city_id,validationError:v}),r.jsx(k,{vendorNameRef:u,value:o.vendor_name,onChange:N,error:c.vendor_name,validationError:g}),r.jsx(I,{value:o.number,onChange:t=>a("number",t.target.value),error:c.number}),r.jsx(P,{value:o.email,onChange:t=>a("email",t.target.value),error:c.email}),r.jsx(B,{value:o.service_type,onChange:t=>a("service_type",t),error:c.service_type})]})}),r.jsxs(F,{className:"flex-row justify-end gap-2 border-t bg-muted/50 p-4",children:[r.jsx(b,{type:"button",variant:"outline",onClick:E,children:"Cancel"}),r.jsx(b,{type:"submit",onClick:_,disabled:y,children:y?"Updating...":"Update Vendor"})]})]})})}):null}export{_e as default};
