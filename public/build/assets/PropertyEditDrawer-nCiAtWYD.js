import{r as f,b as w,j as a}from"./app-mUrH0ynJ.js";import{D as P,a as V,b as k}from"./drawer-B7FkQmZP.js";import{B as _}from"./button-BFBNYzQ-.js";import A from"./PropertySelectField-DqQDFC3E.js";import B from"./InsuranceCompanyField-D1fJfZ_M.js";import R from"./AmountPolicyFields-C_tibIAc.js";import z from"./DateFields-DI0XHy9v.js";import q from"./NotesField-CF6wwGqz.js";import"./app-BxoA0TtB.js";import"./index-CQgkcMAl.js";import"./index-Co1yv0YL.js";import"./index-CgzaaCP9.js";import"./index-Do303mGv.js";import"./index-D9BBn6e9.js";import"./index-bRwiAiPA.js";import"./index-kDRJ7vWo.js";import"./index-CdJFUDDL.js";import"./utils-CBfrqCZ4.js";import"./x-BVVw4O5L.js";import"./createLucideIcon-DUXn48BB.js";import"./label-DmNL2-zA.js";import"./building-2-BuyWVU5H.js";import"./input-Bo52L6_R.js";import"./shield-DtSX21DX.js";import"./dollar-sign-BB476t67.js";import"./file-text-CjfNfFxM.js";import"./calendar-e6qKYHCo.js";import"./textarea-_9m8vmUo.js";function he({open:h,onOpenChange:c,property:e,availableProperties:x=[],onSuccess:G,currentFilters:v,currentPage:l,currentPerPage:u}){const[g,r]=f.useState(""),{data:n,setData:o,put:b,processing:d,errors:i,clearErrors:y}=w({property_id:e.property_id||0,insurance_company_name:e.insurance_company_name||"",amount:e.amount?e.amount.toString():"",policy_number:e.policy_number||"",effective_date:e.effective_date||"",expiration_date:e.expiration_date||"",notes:e.notes||""});f.useEffect(()=>{e&&(o({property_id:e.property_id||0,insurance_company_name:e.insurance_company_name||"",amount:e.amount?e.amount.toString():"",policy_number:e.policy_number||"",effective_date:e.effective_date||"",expiration_date:e.expiration_date||"",notes:e.notes||""}),r(""))},[e]);const C=t=>{o("property_id",parseInt(t.target.value)),r("")},j=t=>{o("insurance_company_name",t.target.value)},E=t=>{o("amount",t.target.value)},D=t=>{o("policy_number",t.target.value)},N=t=>{o("effective_date",t.target.value)},S=t=>{o("expiration_date",t.target.value)},U=t=>{o("notes",t.target.value)},F=()=>{const t=[];l&&l>1&&t.push(`page=${l}`),u&&t.push(`per_page=${u}`),Object.entries(v).forEach(([$,m])=>{m!=null&&m!==""&&t.push(`${$}=${encodeURIComponent(String(m))}`)});const s=route("properties-info.update",e.id);return t.length>0?`${s}?${t.join("&")}`:s},p=t=>{if(t.preventDefault(),!n.property_id||n.property_id===0){r("Please select a property before submitting the form.");return}const s=F();b(s,{onSuccess:()=>{r(""),c(!1)},onError:()=>{}})},I=()=>{o({property_id:e.property_id||0,insurance_company_name:e.insurance_company_name||"",amount:e.amount?e.amount.toString():"",policy_number:e.policy_number||"",effective_date:e.effective_date||"",expiration_date:e.expiration_date||"",notes:e.notes||""}),y(),r(""),c(!1)};return a.jsx(P,{open:h,onOpenChange:c,modal:!1,children:a.jsx(V,{size:"half",title:`Edit Property - ${e.property?.property_name||"Unknown"}`,children:a.jsxs("div",{className:"flex h-full flex-col",children:[a.jsx("div",{className:"flex-1 overflow-auto p-6",children:a.jsxs("form",{onSubmit:p,className:"space-y-4",children:[a.jsx(A,{value:n.property_id,onChange:C,availableProperties:x,error:i.property_id,validationError:g}),a.jsx(B,{value:n.insurance_company_name,onChange:j,error:i.insurance_company_name}),a.jsx(R,{amountValue:n.amount,policyNumberValue:n.policy_number,onAmountChange:E,onPolicyNumberChange:D,amountError:i.amount,policyNumberError:i.policy_number}),a.jsx(z,{effectiveDateValue:n.effective_date,expirationDateValue:n.expiration_date,onEffectiveDateChange:N,onExpirationDateChange:S,effectiveDateError:i.effective_date,expirationDateError:i.expiration_date}),a.jsx(q,{value:n.notes,onChange:U,error:i.notes})]})}),a.jsx(k,{children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(_,{type:"button",variant:"outline",onClick:I,disabled:d,children:"Cancel"}),a.jsx(_,{type:"submit",onClick:p,disabled:d,children:d?"Updating...":"Update Property"})]})})]})})})}export{he as default};
