import{r as n,b as G,j as a}from"./app-IncGAUEB.js";import{B as j}from"./button-BZreYh_c.js";import{D as J,a as K,b as Q}from"./drawer-BabOL_dj.js";import{CitySelectionSection as W}from"./CitySelectionSection-CpJxNoBv.js";import{PropertySelectionSection as X}from"./PropertySelectionSection-BQ9GjWCx.js";import{UnitSelectionSection as Z}from"./UnitSelectionSection-Dq6zjAZa.js";import{PersonalInformationSection as $}from"./PersonalInformationSection-9QDJ96fS.js";import{ContactInformationSection as ee}from"./ContactInformationSection-BjfcnCff.js";import{PaymentAndPreferencesSection as te}from"./PaymentAndPreferencesSection-gcTXVQFj.js";import{AssistanceSection as re}from"./AssistanceSection-D_8zA3I6.js";import"./app-DgqXL21p.js";import"./index-bCzQdt7o.js";import"./index-CdJFUDDL.js";import"./utils-CBfrqCZ4.js";import"./index-CfKQ6yNG.js";import"./index-BWcAjI1y.js";import"./index-D0fQOWIr.js";import"./index-yZxLUvKN.js";import"./index-iNsZkCT-.js";import"./index-6KC1G_4u.js";import"./x-B_qSqN6z.js";import"./createLucideIcon-Ci0S1m_Z.js";import"./label-BhALl-XJ.js";import"./popover-D0q3r5CP.js";import"./index-DfBxMdWp.js";import"./command-AnX11QHu.js";import"./search-CFDkSiim.js";import"./chevrons-up-down-D4md56fd.js";import"./check-gd2_wZBq.js";import"./FormField-BeIxh261.js";import"./input-BKi6rfRv.js";import"./RadioGroupField-cbUAPFUx.js";import"./radioGroup-BhgCKDH3.js";import"./index-X0Rqfk2m.js";import"./index-DizBXXCV.js";function Fe({cities:A,properties:P,unitsByProperty:d,open:k,onOpenChange:g,onSuccess:V,currentFilters:m,page:w,perPage:R}){const l=n.useRef(null),u=n.useRef(null),h=n.useRef(null),f=n.useRef(null),[D,c]=n.useState(""),[I,o]=n.useState(""),[U,C]=n.useState(""),[L,b]=n.useState(""),[T,_]=n.useState([]),[F,E]=n.useState([]),[p,v]=n.useState(""),{data:t,setData:r,post:H,processing:x,errors:s,reset:z,transform:M}=G({unit_id:"",first_name:"",last_name:"",street_address_line:"",login_email:"",alternate_email:"",mobile:"",emergency_phone:"",cash_or_check:"",has_insurance:"",sensitive_communication:"",has_assistance:"",assistance_amount:"",assistance_company:"",city_id:""}),S=()=>{z(),c(""),o(""),C(""),b(""),_([]),E([]),v("")},O=e=>{if(r("city_id",e),r("unit_id",""),v(""),c(""),o(""),e){const i=P.filter(y=>y.city_id?.toString()===e);E(i)}else E([]);_([])},Y=e=>{v(e),r("unit_id",""),c(""),o(""),e&&d&&d[e]?_(d[e]):_([])},q=e=>{r("unit_id",e),o("")},N=e=>{e.preventDefault(),c(""),o(""),C(""),b("");let i=!1;(!p||p.trim()==="")&&(c("Please select a property before submitting the form."),l.current&&(l.current.focus(),l.current.scrollIntoView({behavior:"smooth",block:"center"})),i=!0),(!t.unit_id||t.unit_id.trim()==="")&&(o("Please select a unit before submitting the form."),u.current&&(u.current.focus(),u.current.scrollIntoView({behavior:"smooth",block:"center"})),i=!0),(!t.first_name||t.first_name.trim()==="")&&(C("Please enter a first name before submitting the form."),h.current&&(h.current.focus(),h.current.scrollIntoView({behavior:"smooth",block:"center"})),i=!0),(!t.last_name||t.last_name.trim()==="")&&(b("Please enter a last name before submitting the form."),f.current&&(f.current.focus(),f.current.scrollIntoView({behavior:"smooth",block:"center"})),i=!0),!i&&(M(y=>({...y,search:m?.search??"",city:m?.city??"",property:m?.property??"",unit_name:m?.unitName??"",perPage:R??15,page:w??1})),H(route("tenants.store"),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{S(),g(!1),V?.()}}))},B=()=>{S(),g(!1)};return a.jsx(J,{open:k,onOpenChange:g,modal:!1,children:a.jsx(K,{size:"half",title:"Create New Tenant",children:a.jsxs("div",{className:"flex h-full flex-col",children:[a.jsx("div",{className:"flex-1 overflow-auto p-6",children:a.jsxs("form",{onSubmit:N,className:"space-y-4",children:[a.jsx(W,{cities:A,value:t.city_id,onChange:O,error:s.city_id}),a.jsx(X,{ref:l,properties:F,value:p,onChange:Y,disabled:!t.city_id,validationError:D}),a.jsx(Z,{ref:u,units:T,value:t.unit_id,onChange:q,disabled:!p,error:s.unit_id,validationError:I}),a.jsx($,{firstNameRef:h,lastNameRef:f,firstName:t.first_name,lastName:t.last_name,streetAddress:t.street_address_line,onFirstNameChange:e=>r("first_name",e),onLastNameChange:e=>r("last_name",e),onStreetAddressChange:e=>r("street_address_line",e),firstNameError:s.first_name,lastNameError:s.last_name,streetAddressError:s.street_address_line,firstNameValidationError:U,lastNameValidationError:L}),a.jsx(ee,{loginEmail:t.login_email,alternateEmail:t.alternate_email,mobile:t.mobile,emergencyPhone:t.emergency_phone,onLoginEmailChange:e=>r("login_email",e),onAlternateEmailChange:e=>r("alternate_email",e),onMobileChange:e=>r("mobile",e),onEmergencyPhoneChange:e=>r("emergency_phone",e),loginEmailError:s.login_email,alternateEmailError:s.alternate_email,mobileError:s.mobile,emergencyPhoneError:s.emergency_phone}),a.jsx(te,{cashOrCheck:t.cash_or_check,hasInsurance:t.has_insurance,sensitiveCommunication:t.sensitive_communication,hasAssistance:t.has_assistance,onCashOrCheckChange:e=>r("cash_or_check",e),onHasInsuranceChange:e=>r("has_insurance",e),onSensitiveCommunicationChange:e=>r("sensitive_communication",e),onHasAssistanceChange:e=>r("has_assistance",e),cashOrCheckError:s.cash_or_check,hasInsuranceError:s.has_insurance,sensitiveCommunicationError:s.sensitive_communication,hasAssistanceError:s.has_assistance}),t.has_assistance==="Yes"&&a.jsx(re,{assistanceAmount:t.assistance_amount,assistanceCompany:t.assistance_company,onAssistanceAmountChange:e=>r("assistance_amount",e),onAssistanceCompanyChange:e=>r("assistance_company",e),assistanceAmountError:s.assistance_amount,assistanceCompanyError:s.assistance_company})]})}),a.jsx(Q,{children:a.jsxs("div",{className:"flex gap-2 w-full",children:[a.jsx(j,{type:"button",variant:"outline",onClick:B,className:"flex-1",children:"Cancel"}),a.jsx(j,{type:"submit",onClick:N,disabled:x,className:"flex-1",children:x?"Creating...":"Create Tenant"})]})})]})})})}export{Fe as default};
