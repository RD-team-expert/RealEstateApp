import{r as m,b as k,j as r}from"./app-BBH7zvDr.js";import{B as x}from"./button-kQLvnJYc.js";import{D as R,a as P,b as B}from"./drawer-vn5In2pd.js";import T from"./CityField-6yMtHX5y.js";import z from"./VendorNameField-C2g6z-TC.js";import A from"./PhoneNumberField-D8wG5o9Z.js";import I from"./EmailField-CK3vSnRl.js";import W from"./ServiceTypeField-BXZRp6m2.js";import"./app-B1OP9MFD.js";import"./index-B4JvrASg.js";import"./index-CdJFUDDL.js";import"./utils-CBfrqCZ4.js";import"./index-CKW8D5J0.js";import"./index-BWJ0fZlj.js";import"./index-df1YLpcl.js";import"./index-wsGo_tiU.js";import"./index-LvlgiWdi.js";import"./index-D7NAAONM.js";import"./x-CW_SbUiO.js";import"./createLucideIcon-7kSuh4z9.js";import"./label-DwnzeD4h.js";import"./select-IIwc6umI.js";import"./index-Dc_FVRD7.js";import"./index-Uin3X5ek.js";import"./index-CnOa-MOf.js";import"./index-5ce13En_.js";import"./index-SVWUaHiW.js";import"./chevron-down-DZk5AEb3.js";import"./check-Xlj0_DVN.js";import"./chevron-up-eAQBr70u.js";import"./input-BCr8ZI70.js";import"./plus-Dr8pi5nE.js";import"./trash-2-Dnt6KKQ0.js";function xe({cities:h,open:C,onOpenChange:d,onSuccess:g}){const l=m.useRef(null),c=m.useRef(null),[j,n]=m.useState(""),[_,a]=m.useState(""),[,u]=m.useState(""),{data:t,setData:s,post:E,processing:v,errors:i,reset:b}=k({city_id:"",vendor_name:"",number:[],email:[],service_type:[]}),p=e=>{if(i[e])return i[e];const o=Object.keys(i).find(f=>f.startsWith(`${e}.`));if(o)return i[o]},V=e=>{s("city_id",e);const o=h.find(f=>f.id.toString()===e);u(o?o.city:""),n("")},N=e=>{s("vendor_name",e.target.value),a("")},w=e=>{s("number",e)},S=e=>{s("email",e)},F=e=>{s("service_type",e)},y=e=>{e.preventDefault(),n(""),a("");let o=!1;(!t.city_id||t.city_id.trim()==="")&&(n("Please select a city before submitting the form."),l.current&&(l.current.focus(),l.current.scrollIntoView({behavior:"smooth",block:"center"})),o=!0),(!t.vendor_name||t.vendor_name.trim()==="")&&(a("Please enter a vendor name before submitting the form."),c.current&&(c.current.focus(),c.current.scrollIntoView({behavior:"smooth",block:"center"})),o=!0),!o&&E(route("vendors.store"),{onSuccess:()=>{b(),u(""),n(""),a(""),d(!1),g?.()}})},D=()=>{b(),u(""),n(""),a(""),d(!1)};return r.jsx(R,{open:C,onOpenChange:d,modal:!1,children:r.jsx(P,{size:"half",title:"Create New Vendor",children:r.jsxs("div",{className:"flex h-full flex-col",children:[r.jsx("div",{className:"flex-1 overflow-auto p-6",children:r.jsxs("form",{onSubmit:y,className:"space-y-4",children:[r.jsx(T,{cities:h,value:t.city_id,onChange:V,error:i.city_id,validationError:j,ref:l}),r.jsx(z,{value:t.vendor_name,onChange:N,error:i.vendor_name,validationError:_,ref:c}),r.jsx(A,{value:t.number,onChange:w,error:p("number")}),r.jsx(I,{value:t.email,onChange:S,error:p("email")}),r.jsx(W,{value:t.service_type,onChange:F,error:p("service_type")})]})}),r.jsxs(B,{className:"flex-row justify-end gap-2 border-t bg-muted/50 p-4",children:[r.jsx(x,{type:"button",variant:"outline",onClick:D,children:"Cancel"}),r.jsx(x,{type:"submit",onClick:y,disabled:v,children:v?"Creating...":"Create Vendor"})]})]})})})}export{xe as default};
