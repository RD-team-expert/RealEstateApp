import{r as f,j as e,H as S,L as g,b as N}from"./app-CAyDEZnj.js";import{u as $,A as C}from"./app-layout-DY74bARH.js";import{B as d}from"./app-logo-icon-CjN8lF6W.js";import{I as E}from"./input-B9ajaorg.js";import{C as k,a as T,b as P,c as L}from"./card-C0B-VCo5.js";import{B as c}from"./badge-DMHCbH1W.js";import{P as B,T as H,a as I,b as p,c as t,d as D,e as a,f as R}from"./table-vqUsJnJJ.js";import{D as U}from"./download-CaQXFYds.js";import{S as Y}from"./search-DAnUxFW4.js";import{E as z}from"./eye-mISP0EBM.js";import{S as M}from"./square-pen-CUGzDP7i.js";import"./app-DSIzZYCB.js";import"./index-DsYzNQ6z.js";import"./index-3TL2J1ZM.js";const V=(i,l="tenants.csv")=>{const m=[["ID","Property Name","Unit Number","First Name","Last Name","Street Address","Login Email","Alternate Email","Mobile","Emergency Phone","Payment Method","Has Insurance","Sensitive Communication","Has Assistance","Assistance Amount","Assistance Company"].join(","),...i.map(r=>[r.id,`"${r.property_name||""}"`,`"${r.unit_number||""}"`,`"${r.first_name||""}"`,`"${r.last_name||""}"`,`"${(r.street_address_line||"").replace(/"/g,'""')}"`,`"${r.login_email||""}"`,`"${r.alternate_email||""}"`,`"${r.mobile||""}"`,`"${r.emergency_phone||""}"`,`"${r.cash_or_check||""}"`,`"${r.has_insurance||""}"`,`"${r.sensitive_communication||""}"`,`"${r.has_assistance||""}"`,`"${r.assistance_amount||""}"`,`"${(r.assistance_company||"").replace(/"/g,'""')}"`].join(","))].join(`
`),x=new Blob([m],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),u=URL.createObjectURL(x);o.setAttribute("href",u),o.setAttribute("download",l),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(u)};function ae({tenants:i,search:l}){const{hasPermission:h,hasAnyPermission:m,hasAllPermissions:x}=$(),[o,u]=f.useState(l||""),[r,j]=f.useState(!1),b=s=>{s.preventDefault(),N.get(route("tenants.index"),{search:o},{preserveState:!0})},y=s=>{confirm(`Are you sure you want to delete ${s.first_name} ${s.last_name}?`)&&N.delete(route("tenants.destroy",s.id))},_=()=>{if(i.length===0){alert("No data to export");return}j(!0);try{const s=`tenants-${new Date().toISOString().split("T")[0]}.csv`;V(i,s)}catch(s){console.error("Export failed:",s),alert("Export failed. Please try again.")}finally{j(!1)}},n=s=>s==null||s===""?"N/A":String(s),v=s=>s==null||s===""?e.jsx(c,{variant:"outline",children:"N/A"}):e.jsx(c,{variant:s==="Yes"?"default":"destructive",className:s==="Yes"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":void 0,children:s}),A=s=>s==null||s===""?e.jsx(c,{variant:"outline",children:"N/A"}):e.jsx(c,{variant:s==="Yes"?"destructive":"default",className:s==="No"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":void 0,children:s}),w=s=>s==null||s===""?e.jsx(c,{variant:"outline",children:"N/A"}):e.jsx(c,{variant:s==="Yes"?"default":"secondary",className:s==="Yes"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300",children:s});return e.jsxs(C,{children:[e.jsx(S,{title:"Tenants"}),e.jsx("div",{className:"py-12 bg-background text-foreground transition-colors min-h-screen",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs(k,{className:"bg-card text-card-foreground shadow-lg",children:[e.jsxs(T,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(P,{className:"text-2xl",children:"Tenants"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs(d,{variant:"outline",size:"sm",onClick:_,disabled:r||i.length===0,className:"flex items-center",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),r?"Exporting...":"Export CSV"]}),x(["tenants.create","tenants.store"])&&e.jsx(g,{href:route("tenants.create"),children:e.jsxs(d,{children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Add New Tenant"]})})]})]}),e.jsxs("form",{onSubmit:b,className:"flex gap-2 mt-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(E,{type:"text",placeholder:"Search tenants...",value:o,onChange:s=>u(s.target.value),className:"bg-input text-input-foreground"})}),e.jsx(d,{type:"submit",children:e.jsx(Y,{className:"h-4 w-4"})})]})]}),e.jsxs(L,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(H,{children:[e.jsx(I,{children:e.jsxs(p,{className:"border-border",children:[e.jsx(t,{className:"text-muted-foreground",children:"Property Name"}),e.jsx(t,{className:"text-muted-foreground",children:"Unit Number"}),e.jsx(t,{className:"text-muted-foreground",children:"First Name"}),e.jsx(t,{className:"text-muted-foreground",children:"Last Name"}),e.jsx(t,{className:"text-muted-foreground",children:"Street Address"}),e.jsx(t,{className:"text-muted-foreground",children:"Login Email"}),e.jsx(t,{className:"text-muted-foreground",children:"Alternate Email"}),e.jsx(t,{className:"text-muted-foreground",children:"Mobile"}),e.jsx(t,{className:"text-muted-foreground",children:"Emergency Phone"}),e.jsx(t,{className:"text-muted-foreground",children:"Payment Method"}),e.jsx(t,{className:"text-muted-foreground",children:"Has Insurance"}),e.jsx(t,{className:"text-muted-foreground",children:"Sensitive Communication"}),e.jsx(t,{className:"text-muted-foreground",children:"Has Assistance"}),e.jsx(t,{className:"text-muted-foreground",children:"Assistance Amount"}),e.jsx(t,{className:"text-muted-foreground",children:"Assistance Company"}),m(["tenants.show","tenants.edit","tenants.update","tenants.destroy"])&&e.jsx(t,{className:"text-muted-foreground",children:"Actions"})]})}),e.jsx(D,{children:i.map(s=>e.jsxs(p,{className:"hover:bg-muted/50 border-border",children:[e.jsx(a,{className:"font-medium text-foreground",children:n(s.property_name)}),e.jsx(a,{className:"text-foreground",children:n(s.unit_number)}),e.jsx(a,{className:"text-foreground",children:n(s.first_name)}),e.jsx(a,{className:"text-foreground",children:n(s.last_name)}),e.jsx(a,{className:"max-w-[200px] text-foreground",children:e.jsx("div",{className:"truncate",title:s.street_address_line||"N/A",children:n(s.street_address_line)})}),e.jsx(a,{className:"max-w-[200px] text-foreground",children:e.jsx("div",{className:"truncate",title:s.login_email||"N/A",children:n(s.login_email)})}),e.jsx(a,{className:"max-w-[200px] text-foreground",children:e.jsx("div",{className:"truncate",title:s.alternate_email||"N/A",children:n(s.alternate_email)})}),e.jsx(a,{className:"text-foreground",children:n(s.mobile)}),e.jsx(a,{className:"text-foreground",children:n(s.emergency_phone)}),e.jsx(a,{className:"text-foreground",children:n(s.cash_or_check)}),e.jsx(a,{children:v(s.has_insurance)}),e.jsx(a,{children:A(s.sensitive_communication)}),e.jsx(a,{children:w(s.has_assistance)}),e.jsx(a,{className:"text-foreground",children:s.assistance_amount?`$${s.assistance_amount}`:e.jsx("span",{className:"text-muted-foreground",children:"N/A"})}),e.jsx(a,{className:"max-w-[150px] text-foreground",children:e.jsx("div",{className:"truncate",title:s.assistance_company||"N/A",children:n(s.assistance_company)})}),m(["tenants.show","tenants.edit","tenants.update","tenants.destroy"])&&e.jsx(a,{children:e.jsxs("div",{className:"flex gap-1",children:[h("tenants.show")&&e.jsx(g,{href:route("tenants.show",s.id),children:e.jsx(d,{variant:"outline",size:"sm",children:e.jsx(z,{className:"h-4 w-4"})})}),x(["tenants.edit","tenants.update"])&&e.jsx(g,{href:route("tenants.edit",s.id),children:e.jsx(d,{variant:"outline",size:"sm",children:e.jsx(M,{className:"h-4 w-4"})})}),h("tenants.destroy")&&e.jsx(d,{variant:"outline",size:"sm",onClick:()=>y(s),className:"text-destructive hover:text-destructive hover:bg-destructive/10 border-destructive/20",children:e.jsx(R,{className:"h-4 w-4"})})]})})]},s.id))})]})}),i.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx("p",{className:"text-lg",children:"No tenants found."}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search criteria."})]}),e.jsx("div",{className:"mt-6 flex justify-between items-center border-t border-border pt-4",children:e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",i.length," tenant",i.length!==1?"s":"",l&&` matching "${l}"`]})})]})]})})})]})}export{ae as default};
