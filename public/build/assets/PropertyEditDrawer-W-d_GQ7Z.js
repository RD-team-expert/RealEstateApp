import{r as f,b as w,j as a}from"./app-p7g_f0wo.js";import{D as P,a as V,b as k}from"./drawer-BG8f08dK.js";import{B as _}from"./button-CgWb-OwV.js";import A from"./PropertySelectField-DlEPgTFN.js";import B from"./InsuranceCompanyField-DEnU_4Dq.js";import R from"./AmountPolicyFields-DFFD1blT.js";import z from"./DateFields-Cf88vsjW.js";import q from"./NotesField-BeCahuPG.js";import"./app-D9ss4c-j.js";import"./index-C9RY0Fne.js";import"./index-6lgmZUbB.js";import"./index-H5dANVBP.js";import"./index-DkhO7hde.js";import"./index-soOnB7Xl.js";import"./index-CiElmmUH.js";import"./index-DqXNBRMy.js";import"./index-CdJFUDDL.js";import"./utils-CBfrqCZ4.js";import"./x-CLgUf5rt.js";import"./createLucideIcon-DCkjgf37.js";import"./label-DYy2JzQ2.js";import"./building-2-yTwnRHRy.js";import"./input-DiaYLKYe.js";import"./shield-FYdlzjJa.js";import"./dollar-sign-BuRVt3W_.js";import"./file-text-CmxpgnvI.js";import"./calendar-C5PdxC03.js";import"./textarea-uGnQwSiz.js";function he({open:h,onOpenChange:c,property:e,availableProperties:x=[],onSuccess:G,currentFilters:v,currentPage:l,currentPerPage:u}){const[g,r]=f.useState(""),{data:n,setData:o,put:b,processing:d,errors:i,clearErrors:y}=w({property_id:e.property_id||0,insurance_company_name:e.insurance_company_name||"",amount:e.amount?e.amount.toString():"",policy_number:e.policy_number||"",effective_date:e.effective_date||"",expiration_date:e.expiration_date||"",notes:e.notes||""});f.useEffect(()=>{e&&(o({property_id:e.property_id||0,insurance_company_name:e.insurance_company_name||"",amount:e.amount?e.amount.toString():"",policy_number:e.policy_number||"",effective_date:e.effective_date||"",expiration_date:e.expiration_date||"",notes:e.notes||""}),r(""))},[e]);const C=t=>{o("property_id",parseInt(t.target.value)),r("")},j=t=>{o("insurance_company_name",t.target.value)},E=t=>{o("amount",t.target.value)},D=t=>{o("policy_number",t.target.value)},N=t=>{o("effective_date",t.target.value)},S=t=>{o("expiration_date",t.target.value)},U=t=>{o("notes",t.target.value)},F=()=>{const t=[];l&&l>1&&t.push(`page=${l}`),u&&t.push(`per_page=${u}`),Object.entries(v).forEach(([$,m])=>{m!=null&&m!==""&&t.push(`${$}=${encodeURIComponent(String(m))}`)});const s=route("properties-info.update",e.id);return t.length>0?`${s}?${t.join("&")}`:s},p=t=>{if(t.preventDefault(),!n.property_id||n.property_id===0){r("Please select a property before submitting the form.");return}const s=F();b(s,{onSuccess:()=>{r(""),c(!1)},onError:()=>{}})},I=()=>{o({property_id:e.property_id||0,insurance_company_name:e.insurance_company_name||"",amount:e.amount?e.amount.toString():"",policy_number:e.policy_number||"",effective_date:e.effective_date||"",expiration_date:e.expiration_date||"",notes:e.notes||""}),y(),r(""),c(!1)};return a.jsx(P,{open:h,onOpenChange:c,modal:!1,children:a.jsx(V,{size:"half",title:`Edit Property - ${e.property?.property_name||"Unknown"}`,children:a.jsxs("div",{className:"flex h-full flex-col",children:[a.jsx("div",{className:"flex-1 overflow-auto p-6",children:a.jsxs("form",{onSubmit:p,className:"space-y-4",children:[a.jsx(A,{value:n.property_id,onChange:C,availableProperties:x,error:i.property_id,validationError:g}),a.jsx(B,{value:n.insurance_company_name,onChange:j,error:i.insurance_company_name}),a.jsx(R,{amountValue:n.amount,policyNumberValue:n.policy_number,onAmountChange:E,onPolicyNumberChange:D,amountError:i.amount,policyNumberError:i.policy_number}),a.jsx(z,{effectiveDateValue:n.effective_date,expirationDateValue:n.expiration_date,onEffectiveDateChange:N,onExpirationDateChange:S,effectiveDateError:i.effective_date,expirationDateError:i.expiration_date}),a.jsx(q,{value:n.notes,onChange:U,error:i.notes})]})}),a.jsx(k,{children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(_,{type:"button",variant:"outline",onClick:I,disabled:d,children:"Cancel"}),a.jsx(_,{type:"submit",onClick:p,disabled:d,children:d?"Updating...":"Update Property"})]})})]})})})}export{he as default};
