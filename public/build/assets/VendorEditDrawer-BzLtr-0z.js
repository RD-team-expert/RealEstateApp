import{r as s,b as k,j as i}from"./app-mUrH0ynJ.js";import{B as g}from"./button-BFBNYzQ-.js";import{D as R,a as P,b as I}from"./drawer-B7FkQmZP.js";import B from"./CityField-Ai_weWUy.js";import T from"./VendorNameField-CEyZeicI.js";import U from"./PhoneNumberField-_XOXUaC6.js";import $ from"./EmailField-rdBIB4M2.js";import z from"./ServiceTypeField-BLAVYa83.js";import"./app-BxoA0TtB.js";import"./index-Co1yv0YL.js";import"./index-CdJFUDDL.js";import"./utils-CBfrqCZ4.js";import"./index-CQgkcMAl.js";import"./index-CgzaaCP9.js";import"./index-Do303mGv.js";import"./index-D9BBn6e9.js";import"./index-bRwiAiPA.js";import"./index-kDRJ7vWo.js";import"./x-BVVw4O5L.js";import"./createLucideIcon-DUXn48BB.js";import"./label-DmNL2-zA.js";import"./select-NL-VGbzo.js";import"./index-Dc_FVRD7.js";import"./index-DK4fbPLM.js";import"./index-CXBw7cFo.js";import"./index-DEcWu7_s.js";import"./index-5IheD20q.js";import"./index-p6YNWFgp.js";import"./chevron-down-CcniYHCH.js";import"./check-nxBTAIc9.js";import"./chevron-up-Cls6AU_3.js";import"./input-Bo52L6_R.js";import"./plus-Vhp6TgB7.js";import"./trash-2-PUmSVtRb.js";function ge({vendor:e,cities:h,open:_,onOpenChange:d,onSuccess:v}){const l=s.useRef(null),u=s.useRef(null),[j,m]=s.useState(""),[C,c]=s.useState(""),[,p]=s.useState(""),{data:o,setData:a,put:E,processing:b,errors:n}=k({city_id:e?.city_id?.toString()||"",vendor_name:e?.vendor_name||"",number:e?.number||[],email:e?.email||[],service_type:e?.service_type||[]}),f=t=>{if(n[t])return n[t];const r=Object.keys(n).find(y=>y.startsWith(`${t}.`));if(r)return n[r]};s.useEffect(()=>{if(e){const t=e.city_id?.toString()||"",r=e.city?.city||"";a({city_id:t,vendor_name:e.vendor_name,number:e.number||[],email:e.email||[],service_type:e.service_type||[]}),p(r)}},[e,_]);const N=t=>{a("city_id",t);const r=h.find(y=>y.id.toString()===t);p(r?r.city:""),m("")},S=t=>{a("vendor_name",t.target.value),c("")},V=t=>{a("number",t)},w=t=>{a("email",t)},F=t=>{a("service_type",t)},x=t=>{if(t.preventDefault(),!e)return;m(""),c("");let r=!1;(!o.city_id||o.city_id.trim()==="")&&(m("Please select a city before submitting the form."),l.current&&(l.current.focus(),l.current.scrollIntoView({behavior:"smooth",block:"center"})),r=!0),(!o.vendor_name||o.vendor_name.trim()==="")&&(c("Please enter a vendor name before submitting the form."),u.current&&(u.current.focus(),u.current.scrollIntoView({behavior:"smooth",block:"center"})),r=!0),!r&&E(route("vendors.update",e.id),{onSuccess:()=>{m(""),c(""),d(!1),v?.()}})},D=()=>{if(e){const t=e.city_id?.toString()||"",r=e.city?.city||"";a({city_id:t,vendor_name:e.vendor_name,number:e.number||[],email:e.email||[],service_type:e.service_type||[]}),p(r)}m(""),c(""),d(!1)};return e?i.jsx(R,{open:_,onOpenChange:d,modal:!1,children:i.jsx(P,{size:"half",title:`Edit Vendor - ${e.vendor_name}`,children:i.jsxs("div",{className:"flex h-full flex-col",children:[i.jsx("div",{className:"flex-1 overflow-auto p-6",children:i.jsxs("form",{onSubmit:x,className:"space-y-4",children:[i.jsx(B,{cityRef:l,value:o.city_id,cities:h,onChange:N,error:n.city_id,validationError:j}),i.jsx(T,{vendorNameRef:u,value:o.vendor_name,onChange:S,error:n.vendor_name,validationError:C}),i.jsx(U,{value:o.number,onChange:V,error:f("number")}),i.jsx($,{value:o.email,onChange:w,error:f("email")}),i.jsx(z,{value:o.service_type,onChange:F,error:f("service_type")})]})}),i.jsxs(I,{className:"flex-row justify-end gap-2 border-t bg-muted/50 p-4",children:[i.jsx(g,{type:"button",variant:"outline",onClick:D,children:"Cancel"}),i.jsx(g,{type:"submit",onClick:x,disabled:b,children:b?"Updating...":"Update Vendor"})]})]})})}):null}export{ge as default};
