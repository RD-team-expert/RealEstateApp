import{r as n,b as L,j as e}from"./app-mUrH0ynJ.js";import{D as q,a as B,b as G}from"./drawer-B7FkQmZP.js";import{B as w}from"./button-BFBNYzQ-.js";import H from"./LocationSection-CMBVV_pF.js";import J from"./DateFieldsSection-CsXZSkFe.js";import K from"./PropertyDetailsSection-uo0UofRP.js";import Q from"./StatusFieldsSection-CRUkpkpd.js";import"./app-BxoA0TtB.js";import"./index-CQgkcMAl.js";import"./index-Co1yv0YL.js";import"./index-CgzaaCP9.js";import"./index-Do303mGv.js";import"./index-D9BBn6e9.js";import"./index-bRwiAiPA.js";import"./index-kDRJ7vWo.js";import"./index-CdJFUDDL.js";import"./utils-CBfrqCZ4.js";import"./x-BVVw4O5L.js";import"./createLucideIcon-DUXn48BB.js";import"./FormField-BFaPLpUi.js";import"./label-DmNL2-zA.js";import"./SelectField-BDb_VpVO.js";import"./select-NL-VGbzo.js";import"./index-Dc_FVRD7.js";import"./index-DK4fbPLM.js";import"./index-CXBw7cFo.js";import"./index-DEcWu7_s.js";import"./index-5IheD20q.js";import"./index-p6YNWFgp.js";import"./chevron-down-CcniYHCH.js";import"./check-nxBTAIc9.js";import"./chevron-up-Cls6AU_3.js";import"./TextInputField-D0uAoOtH.js";import"./input-Bo52L6_R.js";import"./DatePickerField-DnKuhIa2.js";import"./calendar-DAc8iCNl.js";import"./format-PYUiRpxY.js";import"./chevron-left-Bx0Sy0a0.js";import"./chevron-right-o746ehSI.js";import"./popover-B07j7TfD.js";import"./calendar-e6qKYHCo.js";import"./TextAreaField-DfXDX515.js";import"./textarea-_9m8vmUo.js";import"./RadioGroupField-DZufQWgb.js";import"./radioGroup-DvkZrWpP.js";function zt({cities:N,propertiesByCityId:h,unitsByPropertyId:y,open:P,onOpenChange:b,onSuccess:R}){const l=n.useRef(null),u=n.useRef(null),c=n.useRef(null),[k,i]=n.useState({city:"",property:"",unit:""}),[C,g]=n.useState(null),[x,f]=n.useState(null),[v,m]=n.useState(null),[I,_]=n.useState([]),[E,p]=n.useState([]),[U,V]=n.useState({move_out_date:!1,date_lease_ending_on_buildium:!1,date_utility_put_under_our_name:!1}),{data:a,setData:s,post:F,processing:S,errors:d,reset:M}=L({unit_id:null,tenants:"",move_out_date:"",lease_status:"",date_lease_ending_on_buildium:"",keys_location:"",utilities_under_our_name:"",date_utility_put_under_our_name:"",walkthrough:"",repairs:"",send_back_security_deposit:"",notes:"",cleaning:"",list_the_unit:"",move_out_form:"",utility_type:""}),T=r=>{const t=parseInt(r);g(t),f(null),m(null),s("unit_id",null),i(o=>({...o,city:"",property:"",unit:""})),t&&h[t]?_(h[t]):_([]),p([])},A=r=>{const t=parseInt(r);f(t),m(null),s("unit_id",null),i(o=>({...o,property:"",unit:""})),t&&y[t]?p(y[t]):p([])},O=r=>{const t=parseInt(r);m(t),s("unit_id",t),i(o=>({...o,unit:""}))},z=r=>{V(t=>({...t,[r]:!t[r]}))},j=r=>{r.preventDefault(),i({city:"",property:"",unit:""});let t=!1;C||(i(o=>({...o,city:"Please select a city before submitting the form."})),l.current&&(l.current.focus(),l.current.scrollIntoView({behavior:"smooth",block:"center"})),t=!0),x||(i(o=>({...o,property:"Please select a property before submitting the form."})),u.current&&(u.current.focus(),u.current.scrollIntoView({behavior:"smooth",block:"center"})),t=!0),(!v||!a.unit_id)&&(i(o=>({...o,unit:"Please select a unit before submitting the form."})),c.current&&(c.current.focus(),c.current.scrollIntoView({behavior:"smooth",block:"center"})),t=!0),!t&&F(route("move-out.store"),{onSuccess:()=>{D(),R?.()}})},D=()=>{M(),g(null),f(null),m(null),i({city:"",property:"",unit:""}),_([]),p([]),b(!1)};return e.jsx(q,{open:P,onOpenChange:b,modal:!1,children:e.jsx(B,{size:"half",title:"Create New Move-Out Record",children:e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsx("div",{className:"flex-1 overflow-auto p-6",children:e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsx(H,{cities:N,availableProperties:I,availableUnits:E,selectedCity:C,selectedProperty:x,selectedUnit:v,validationErrors:k,cityRef:l,propertyRef:u,unitRef:c,onCityChange:T,onPropertyChange:A,onUnitChange:O,tenants:a.tenants,tenantsError:d.tenants,onTenantsChange:r=>s("tenants",r)}),e.jsx(J,{data:a,errors:d,calendarStates:U,onCalendarToggle:z,onDataChange:s}),e.jsx(K,{data:a,errors:d,onDataChange:s}),e.jsx(Q,{data:a,errors:d,onDataChange:s})]})}),e.jsx(G,{children:e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsx(w,{type:"button",variant:"outline",onClick:D,className:"flex-1",children:"Cancel"}),e.jsx(w,{type:"submit",onClick:j,disabled:S,className:"flex-1",children:S?"Creating...":"Create Move-Out Record"})]})})]})})})}export{zt as default};
