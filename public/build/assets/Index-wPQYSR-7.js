import{r as S,u as F,a as H,U as L,j as e,H as k,b as B}from"./app-BydbXvNR.js";import{u as D,A as E,X as I}from"./app-layout-JAdefpY2.js";import{B as i}from"./app-logo-icon-_X7DW1Ak.js";import{I as R}from"./input-D0VuUaJ9.js";import{L as M}from"./label-khDChMbA.js";import{C as m,a as x,b as h,c as u}from"./card-D9wtjh1c.js";import{P as U,T as q,a as z,b as j,c as f,d as J,e as g,f as O}from"./table-BEFqGt7n.js";import"./app-B_WQW7DO.js";import"./index-BqVwD9uT.js";import"./index-BMp7K-bq.js";const ee=({cities:r})=>{const[t,c]=S.useState(!1),{data:b,setData:p,post:N,processing:l,errors:d,reset:y}=F({city:""}),v=s=>{s.preventDefault(),N("/cities",{onSuccess:()=>{y(),c(!1)}})},C=s=>{window.confirm("Are you sure you want to delete this city?")&&B.delete(`/cities/${s}`)},{hasPermission:n,hasAllPermissions:w}=D(),{url:A}=H(),T=A.split("?")[1]??"",a=new URLSearchParams(T).get("bc"),P=L.useMemo(()=>{const s=[{title:"Cities",href:"/cities"}];if(!a)return s;try{const o=JSON.parse(a);return Array.isArray(o)?[...o,...s]:s}catch{return s}},[a]);return e.jsxs(E,{breadcrumbs:P,children:[e.jsx(k,{title:"Cities"}),e.jsx("div",{className:"py-12 bg-background text-foreground transition-colors min-h-screen",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[w(["cities.store","cities.create"])&&e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(m,{className:"bg-card text-card-foreground shadow-lg",children:[e.jsx(x,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(h,{className:"text-xl",children:"Manage Cities"}),e.jsx(i,{onClick:()=>c(!t),variant:t?"outline":"default",children:t?e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Cancel"]}):e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Add City"]})})]})}),t&&e.jsxs(u,{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-foreground",children:"Add New City"}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(M,{htmlFor:"city",className:"block text-sm font-medium text-foreground mb-1",children:["City Name ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(R,{id:"city",type:"text",value:b.city,onChange:s=>p("city",s.target.value),placeholder:"Enter city name",className:"bg-input text-input-foreground",required:!0}),d.city&&e.jsx("div",{className:"text-destructive text-sm mt-1",children:d.city})]}),e.jsx(i,{type:"submit",disabled:l,className:"w-full",children:l?"Adding...":"Add City"})]})]})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(m,{className:"bg-card text-card-foreground shadow-lg",children:[e.jsx(x,{children:e.jsx(h,{className:"text-xl",children:"Cities List"})}),e.jsxs(u,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(q,{children:[e.jsx(z,{children:e.jsxs(j,{className:"border-border",children:[e.jsx(f,{className:"text-muted-foreground",children:"City"}),n("cities.destroy")&&e.jsx(f,{className:"text-muted-foreground",children:"Actions"})]})}),e.jsx(J,{children:r.map(s=>e.jsxs(j,{className:"hover:bg-muted/50 border-border",children:[e.jsx(g,{className:"font-medium text-foreground",children:s.city}),n("cities.destroy")&&e.jsx(g,{children:e.jsx(i,{variant:"outline",size:"sm",onClick:()=>C(s.id),className:"text-destructive hover:text-destructive hover:bg-destructive/10 border-destructive/20",children:e.jsx(O,{className:"h-4 w-4"})})})]},s.id))})]})}),r.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx("p",{className:"text-lg",children:"No cities found."}),e.jsx("p",{className:"text-sm",children:"Add your first city using the form on the left."})]}),e.jsx("div",{className:"mt-6 flex justify-between items-center border-t border-border pt-4",children:e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",r.length," cities"]})})]})]})})]})})})]})};export{ee as default};
