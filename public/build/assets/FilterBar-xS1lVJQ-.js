import{r as o,j as t}from"./app-Dn1r5IbR.js";import{B as j}from"./button-DoJlCKhy.js";import{I as u}from"./input-DJHjvjS7.js";import{C as i}from"./chevron-down-Bfpn-qjr.js";import{S as M}from"./search-BFedrvkI.js";import{X as Q}from"./x-BwrjvaMS.js";import"./app-BmbQfT0_.js";import"./index-DF1-xgR-.js";import"./utils-CBfrqCZ4.js";import"./createLucideIcon-ezkluWMI.js";const oe=({cities:N,properties:R,propertiesByCityId:L,unitsByPropertyId:S,tenantsByUnitId:U,allUnits:D,tenantsData:P,tempFilters:n,onTempFiltersChange:a,onSearch:_,onClear:k})=>{const[T,s]=o.useState(!1),[E,l]=o.useState(!1),[z,c]=o.useState(!1),[B,d]=o.useState(!1),p=o.useRef(null),f=o.useRef(null),h=o.useRef(null),g=o.useRef(null),x=o.useRef(null),m=o.useRef(null),w=o.useRef(null),y=o.useRef(null);o.useEffect(()=>{const e=r=>{p.current&&!p.current.contains(r.target)&&x.current&&!x.current.contains(r.target)&&s(!1),f.current&&!f.current.contains(r.target)&&m.current&&!m.current.contains(r.target)&&l(!1),h.current&&!h.current.contains(r.target)&&w.current&&!w.current.contains(r.target)&&c(!1),g.current&&!g.current.contains(r.target)&&y.current&&!y.current.contains(r.target)&&d(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const O=e=>{a({...n,city:e.city,selectedCityId:e.id,property:"",selectedPropertyId:null,unit:"",selectedUnitId:null,tenant:"",selectedTenantId:null}),s(!1)},X=e=>{const r=e.target.value;a({...n,city:r,selectedCityId:null,property:"",selectedPropertyId:null,unit:"",selectedUnitId:null,tenant:"",selectedTenantId:null}),s(r.length>0)},q=e=>{const r=e.target.value;a({...n,property:r,selectedPropertyId:null,unit:"",selectedUnitId:null,tenant:"",selectedTenantId:null}),l(r.length>0)},A=e=>{a({...n,property:e.property_name,selectedPropertyId:e.id,unit:"",selectedUnitId:null,tenant:"",selectedTenantId:null}),l(!1)},G=e=>{const r=e.target.value;a({...n,unit:r,selectedUnitId:null,tenant:"",selectedTenantId:null}),c(r.length>0)},H=e=>{a({...n,unit:e.unit_name,selectedUnitId:e.id,tenant:"",selectedTenantId:null}),c(!1)},J=e=>{const r=e.target.value;a({...n,tenant:r,selectedTenantId:null}),d(r.length>0)},K=e=>{a({...n,tenant:e.full_name,selectedTenantId:e.id}),d(!1)},v=N.filter(e=>e?.city?.toLowerCase().includes(n.city.toLowerCase())),I=n.selectedCityId?(L[n.selectedCityId]||[]).filter(e=>e?.property_name?.toLowerCase().includes(n.property.toLowerCase())):R.filter(e=>e?.property_name?.toLowerCase().includes(n.property.toLowerCase())),C=n.selectedPropertyId?(S[n.selectedPropertyId]||[]).filter(e=>e?.unit_name?.toLowerCase().includes(n.unit.toLowerCase())):D.filter(e=>e?.unit_name?.toLowerCase().includes(n.unit.toLowerCase())),b=n.selectedUnitId?(U[n.selectedUnitId]||[]).filter(e=>e?.full_name?.toLowerCase().includes(n.tenant.toLowerCase())):P.filter(e=>e?.full_name?.toLowerCase().includes(n.tenant.toLowerCase()));return t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-6",children:[t.jsxs("div",{className:"relative",children:[t.jsx(u,{ref:x,type:"text",placeholder:"City",value:n.city,onChange:X,onFocus:()=>s(!0),className:"text-input-foreground bg-input pr-8"}),t.jsx(i,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),T&&v.length>0&&t.jsx("div",{ref:p,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:v.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>O(e),children:e.city},e.id))})]}),t.jsxs("div",{className:"relative",children:[t.jsx(u,{ref:m,type:"text",placeholder:"Property",value:n.property,onChange:q,onFocus:()=>l(!0),className:"text-input-foreground bg-input pr-8"}),t.jsx(i,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),E&&I.length>0&&t.jsx("div",{ref:f,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:I.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>A(e),children:e.property_name},e.id))})]}),t.jsxs("div",{className:"relative",children:[t.jsx(u,{ref:w,type:"text",placeholder:"Unit",value:n.unit,onChange:G,onFocus:()=>c(!0),className:"text-input-foreground bg-input pr-8"}),t.jsx(i,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),z&&C.length>0&&t.jsx("div",{ref:h,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:C.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>H(e),children:e.unit_name},e.id))})]}),t.jsxs("div",{className:"relative",children:[t.jsx(u,{ref:y,type:"text",placeholder:"Tenant",value:n.tenant,onChange:J,onFocus:()=>d(!0),className:"text-input-foreground bg-input pr-8"}),t.jsx(i,{className:"absolute top-1/2 right-2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),B&&b.length>0&&t.jsx("div",{ref:g,className:"absolute top-full right-0 left-0 z-50 mt-1 max-h-60 overflow-auto rounded-md border border-input bg-popover shadow-lg",children:b.map(e=>t.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground",onClick:()=>K(e),children:e.full_name},e.id))})]}),t.jsx("div",{className:"hidden md:block"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(j,{onClick:_,variant:"default",className:"flex items-center",children:[t.jsx(M,{className:"mr-2 h-4 w-4"}),"Search"]}),t.jsxs(j,{onClick:k,variant:"outline",className:"flex items-center",children:[t.jsx(Q,{className:"mr-2 h-4 w-4"}),"Clear"]})]})]})};export{oe as FilterBar};
