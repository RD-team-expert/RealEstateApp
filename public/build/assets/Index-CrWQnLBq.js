import{r as v,j as e,H as w,L as l,b as x}from"./app-CGrKwaDB.js";import{u as b,A as S}from"./app-layout-BYmuOqnb.js";import{B as n}from"./app-logo-icon-CKCvhyUf.js";import{I as P}from"./input-CMG5rO1B.js";import{C,a as T,b as A,c as L}from"./card-SLIn0jLe.js";import{P as B,T as D,a as _,b as h,c as t,d as H,e as a,f as E}from"./table-BHKvUkYd.js";import{B as j}from"./badge-34XoFXbi.js";import{S as I}from"./search-CIi3cbny.js";import{E as z}from"./eye-BuFzPXHQ.js";import{S as R}from"./square-pen-C949YzdE.js";import"./app-CpGTTCLS.js";import"./index-CyndH3ya.js";import"./index-CD0lBVmf.js";function X({payments:r,search:u}){const{hasPermission:d,hasAnyPermission:c,hasAllPermissions:o}=b(),[m,p]=v.useState(u||""),f=s=>{s.preventDefault(),x.get(route("payments.index"),{search:m},{preserveState:!0})},y=s=>{confirm("Are you sure you want to delete this payment?")&&x.delete(route("payments.destroy",s.id))},i=s=>s===null?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s),N=s=>{if(!s)return null;const g=s.toLowerCase().includes("paid")?"default":s.toLowerCase().includes("pending")?"secondary":"outline";return e.jsx(j,{variant:g,children:s})};return e.jsxs(S,{children:[e.jsx(w,{title:"Payments"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs(C,{children:[e.jsxs(T,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(A,{className:"text-2xl",children:"Payments Management"}),o(["payments.create","payments.store"])&&e.jsx(l,{href:route("payments.create"),children:e.jsxs(n,{children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Add Payment"]})})]}),e.jsxs("form",{onSubmit:f,className:"flex gap-2 mt-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(P,{type:"text",placeholder:"Search payments by city, unit, status, or notes...",value:m,onChange:s=>p(s.target.value)})}),e.jsx(n,{type:"submit",children:e.jsx(I,{className:"h-4 w-4"})})]})]}),e.jsxs(L,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(D,{children:[e.jsx(_,{children:e.jsxs(h,{children:[e.jsx(t,{children:"Date"}),e.jsx(t,{children:"City"}),e.jsx(t,{children:"Unit Name"}),e.jsx(t,{className:"text-right",children:"Owes"}),e.jsx(t,{className:"text-right",children:"Paid"}),e.jsx(t,{className:"text-right",children:"Left to Pay"}),e.jsx(t,{children:"Status"}),e.jsx(t,{children:"Note"}),e.jsx(t,{children:"Reversed Payments"}),e.jsx(t,{children:"Permanent"}),c(["payments.show","payments.edit","payments.update","payments.destroy"])&&e.jsx(t,{children:"Actions"})]})}),e.jsx(H,{children:r.data.map(s=>e.jsxs(h,{className:"hover:bg-gray-50",children:[e.jsx(a,{children:new Date(s.date).toLocaleDateString()}),e.jsx(a,{className:"font-medium",children:s.city}),e.jsx(a,{children:s.unit_name}),e.jsx(a,{className:"text-right font-medium text-red-600",children:i(s.owes)}),e.jsx(a,{className:"text-right text-green-600",children:i(s.paid)}),e.jsx(a,{className:"text-right font-medium text-blue-600",children:i(s.left_to_pay)}),e.jsx(a,{children:N(s.status)}),e.jsx(a,{children:s.notes}),e.jsx(a,{children:s.reversed_payments}),e.jsx(a,{children:e.jsx(j,{variant:s.permanent==="Yes"?"default":"secondary",children:s.permanent})}),c(["payments.show","payments.edit","payments.update","payments.destroy"])&&e.jsx(a,{children:e.jsxs("div",{className:"flex gap-1",children:[d("payments.show")&&e.jsx(l,{href:route("payments.show",s.id),children:e.jsx(n,{variant:"outline",size:"sm",children:e.jsx(z,{className:"h-4 w-4"})})}),o(["payments.edit","payments.update"])&&e.jsx(l,{href:route("payments.edit",s.id),children:e.jsx(n,{variant:"outline",size:"sm",children:e.jsx(R,{className:"h-4 w-4"})})}),d("payments.destroy")&&e.jsx(n,{variant:"outline",size:"sm",onClick:()=>y(s),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(E,{className:"h-4 w-4"})})]})})]},s.id))})]})}),r.data.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("p",{className:"text-lg",children:"No payments found."}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search criteria."})]}),r.meta&&e.jsx("div",{className:"mt-6 flex justify-between items-center",children:e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",r.meta.from||0," to ",r.meta.to||0," of ",r.meta.total||0," results"]})})]})]})})})]})}export{X as default};
