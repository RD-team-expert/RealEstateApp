import{r as i,b as X,j as e}from"./app-CCzuXckj.js";import{B as p}from"./button-CMWBItP5.js";import{P as S,a as w,p as u,b as F,C as P}from"./popover-D_vSdCKF.js";import{D as Z,a as ee,b as te}from"./drawer-D037HPJn.js";import{I as o}from"./input-Du17bKS3.js";import{L as n}from"./label-B-O3f5QY.js";import{S as U,a as L,b as O,c as z,d as B}from"./select-HddS9BVA.js";import{R as T}from"./radioGroup-0S5_KQF6.js";import{C as M}from"./calendar-Dcylb9am.js";import{f as x}from"./format-PYUiRpxY.js";import"./app-BmbQfT0_.js";import"./index-ChB7U0Zf.js";import"./utils-CBfrqCZ4.js";import"./createLucideIcon-C69XpSIN.js";import"./chevron-right-C8wvZ16F.js";import"./chevron-down-CCgMrUAw.js";import"./index-DyliiUy6.js";import"./index-Dt7h0l9k.js";import"./index-DODHwusq.js";import"./index-wJbuxyvX.js";import"./index-CqHfpVA2.js";import"./index-5SWgZ8xG.js";import"./index-BNwgaesP.js";import"./index-agTCOONj.js";import"./index-Dc_FVRD7.js";import"./index-DvwIsXwg.js";import"./index-DTxO9eYn.js";import"./x-DYjqv_U5.js";import"./index-D6OiOCOB.js";import"./index-vq7VqFSt.js";import"./index-wPy1uw0V.js";import"./check-Du7_omyy.js";import"./chevron-up-D8wKuaQi.js";function ke({cities:$,properties:y,open:Y,onOpenChange:N,onSuccess:G}){const _=i.useRef(null),b=i.useRef(null),[E,j]=i.useState(""),[D,d]=i.useState(""),[V,h]=i.useState(""),[I,f]=i.useState([]),[c,v]=i.useState(""),[g,C]=i.useState({lease_start:!1,lease_end:!1,insurance_expiration_date:!1}),m=(t,l)=>{C(W=>({...W,[t]:l}))},{data:s,setData:r,post:q,processing:R,errors:a,reset:k}=X({property_id:"",unit_name:"",tenants:"",lease_start:"",lease_end:"",count_beds:"",count_baths:"",lease_status:"",monthly_rent:"",recurring_transaction:"",utility_status:"",account_number:"",insurance:"",insurance_expiration_date:""});i.useEffect(()=>{if(c&&y){const t=y.filter(l=>l.city_id?.toString()===c);f(t),s.property_id&&!t.find(l=>l.id.toString()===s.property_id)&&r("property_id","")}else f([]),r("property_id","")},[c,y]);const H=t=>{v(t),j(""),d("")},J=t=>{r("property_id",t),d("")},K=t=>{r("unit_name",t.target.value),h("")},A=t=>{t.preventDefault(),j(""),d(""),h("");let l=!1;(!s.property_id||s.property_id.trim()==="")&&(d("Please select a property before submitting the form."),_.current&&(_.current.focus(),_.current.scrollIntoView({behavior:"smooth",block:"center"})),l=!0),(!s.unit_name||s.unit_name.trim()==="")&&(h("Please enter a unit name before submitting the form."),b.current&&(b.current.focus(),b.current.scrollIntoView({behavior:"smooth",block:"center"})),l=!0),!l&&q(route("units.store"),{onSuccess:()=>{k(),j(""),d(""),h(""),f([]),v(""),C({lease_start:!1,lease_end:!1,insurance_expiration_date:!1}),N(!1),G?.()}})},Q=()=>{k(),j(""),d(""),h(""),f([]),v(""),C({lease_start:!1,lease_end:!1,insurance_expiration_date:!1}),N(!1)};return e.jsx(Z,{open:Y,onOpenChange:N,modal:!1,children:e.jsx(ee,{size:"half",title:"Create New Unit",children:e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsx("div",{className:"flex-1 overflow-auto p-6",children:e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border-l-4 border-l-blue-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(n,{htmlFor:"city",className:"text-base font-semibold",children:"City *"})}),e.jsxs(U,{onValueChange:H,value:c,children:[e.jsx(L,{children:e.jsx(O,{placeholder:"Select a city"})}),e.jsx(z,{children:$?.map(t=>e.jsx(B,{value:t.id.toString(),children:t.city},t.id))||[]})]}),E&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:E})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-green-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(n,{htmlFor:"property_id",className:"text-base font-semibold",children:"Property *"})}),e.jsxs(U,{onValueChange:J,value:s.property_id,disabled:!c||I.length===0,children:[e.jsx(L,{ref:_,children:e.jsx(O,{placeholder:c?"Select property":"Select city first"})}),e.jsx(z,{children:I?.map(t=>e.jsx(B,{value:t.id.toString(),children:t.property_name},t.id))||[]})]}),a.property_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.property_id}),D&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:D})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-purple-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(n,{htmlFor:"unit_name",className:"text-base font-semibold",children:"Unit Name *"})}),e.jsx(o,{id:"unit_name",ref:b,value:s.unit_name,onChange:K,placeholder:"Enter unit name"}),a.unit_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.unit_name}),V&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:V})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-orange-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(n,{htmlFor:"tenants",className:"text-base font-semibold",children:"Tenants"})}),e.jsx(o,{id:"tenants",value:s.tenants,onChange:t=>r("tenants",t.target.value),placeholder:"Enter tenant names"}),a.tenants&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.tenants})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-emerald-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(n,{htmlFor:"lease_start",className:"text-base font-semibold",children:"Lease Start"})}),e.jsxs(S,{open:g.lease_start,onOpenChange:t=>m("lease_start",t),modal:!1,children:[e.jsx(w,{asChild:!0,children:e.jsxs(p,{variant:"outline",className:`w-full justify-start text-left font-normal ${!s.lease_start&&"text-muted-foreground"}`,children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),s.lease_start?x(u(s.lease_start,"yyyy-MM-dd",new Date),"PPP"):"Pick a date"]})}),e.jsx(F,{className:"z-[60] w-auto p-0",onOpenAutoFocus:t=>t.preventDefault(),children:e.jsx(P,{mode:"single",selected:s.lease_start?u(s.lease_start,"yyyy-MM-dd",new Date):void 0,onSelect:t=>{t&&(r("lease_start",x(t,"yyyy-MM-dd")),m("lease_start",!1))},initialFocus:!0})})]}),a.lease_start&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.lease_start})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-teal-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(n,{htmlFor:"lease_end",className:"text-base font-semibold",children:"Lease End"})}),e.jsxs(S,{open:g.lease_end,onOpenChange:t=>m("lease_end",t),modal:!1,children:[e.jsx(w,{asChild:!0,children:e.jsxs(p,{variant:"outline",className:`w-full justify-start text-left font-normal ${!s.lease_end&&"text-muted-foreground"}`,children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),s.lease_end?x(u(s.lease_end,"yyyy-MM-dd",new Date),"PPP"):"Pick a date"]})}),e.jsx(F,{className:"z-[60] w-auto p-0",onOpenAutoFocus:t=>t.preventDefault(),children:e.jsx(P,{mode:"single",selected:s.lease_end?u(s.lease_end,"yyyy-MM-dd",new Date):void 0,onSelect:t=>{t&&(r("lease_end",x(t,"yyyy-MM-dd")),m("lease_end",!1))},initialFocus:!0})})]}),a.lease_end&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.lease_end})]}),e.jsx("div",{className:"rounded-lg border-l-4 border-l-indigo-500 p-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"count_beds",className:"text-base font-semibold",children:"Count Beds"}),e.jsx(o,{id:"count_beds",type:"number",step:"0.5",min:"0",value:s.count_beds,onChange:t=>r("count_beds",t.target.value),placeholder:"Number of beds"}),a.count_beds&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.count_beds})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"count_baths",className:"text-base font-semibold",children:"Count Baths"}),e.jsx(o,{id:"count_baths",type:"number",step:"0.5",min:"0",value:s.count_baths,onChange:t=>r("count_baths",t.target.value),placeholder:"Number of baths"}),a.count_baths&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.count_baths})]})]})}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-pink-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(n,{htmlFor:"lease_status",className:"text-base font-semibold",children:"Lease Status"})}),e.jsx(T,{value:s.lease_status,onValueChange:t=>r("lease_status",t),name:"lease_status",options:[{value:"Fixed",label:"Fixed"},{value:"Fixed with roll over",label:"Fixed with roll over"},{value:"At will",label:"At will"}]}),a.lease_status&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.lease_status})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-red-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(n,{htmlFor:"monthly_rent",className:"text-base font-semibold",children:"Monthly Rent"})}),e.jsx(o,{id:"monthly_rent",type:"number",step:"0.01",min:"0",value:s.monthly_rent,onChange:t=>r("monthly_rent",t.target.value),placeholder:"Enter monthly rent amount"}),a.monthly_rent&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.monthly_rent})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-yellow-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(n,{htmlFor:"recurring_transaction",className:"text-base font-semibold",children:"Recurring Transaction"})}),e.jsx(o,{id:"recurring_transaction",value:s.recurring_transaction,onChange:t=>r("recurring_transaction",t.target.value),placeholder:"Enter recurring transaction details"}),a.recurring_transaction&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.recurring_transaction})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-cyan-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(n,{htmlFor:"utility_status",className:"text-base font-semibold",children:"Utility Status"})}),e.jsx(o,{id:"utility_status",value:s.utility_status,onChange:t=>r("utility_status",t.target.value),placeholder:"Enter utility status"}),a.utility_status&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.utility_status})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-gray-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(n,{htmlFor:"account_number",className:"text-base font-semibold",children:"Account Number"})}),e.jsx(o,{id:"account_number",value:s.account_number,onChange:t=>r("account_number",t.target.value),placeholder:"Enter account number"}),a.account_number&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.account_number})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-violet-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(n,{htmlFor:"insurance",className:"text-base font-semibold",children:"Insurance"})}),e.jsx(T,{value:s.insurance,onValueChange:t=>r("insurance",t),name:"insurance",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}]}),a.insurance&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.insurance})]}),e.jsxs("div",{className:"rounded-lg border-l-4 border-l-rose-500 p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(n,{htmlFor:"insurance_expiration_date",className:"text-base font-semibold",children:"Insurance Expiration Date"})}),e.jsxs(S,{open:g.insurance_expiration_date,onOpenChange:t=>m("insurance_expiration_date",t),modal:!1,children:[e.jsx(w,{asChild:!0,children:e.jsxs(p,{variant:"outline",className:`w-full justify-start text-left font-normal ${!s.insurance_expiration_date&&"text-muted-foreground"}`,children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),s.insurance_expiration_date?x(u(s.insurance_expiration_date,"yyyy-MM-dd",new Date),"PPP"):"Pick a date"]})}),e.jsx(F,{className:"z-[60] w-auto p-0",onOpenAutoFocus:t=>t.preventDefault(),children:e.jsx(P,{mode:"single",selected:s.insurance_expiration_date?u(s.insurance_expiration_date,"yyyy-MM-dd",new Date):void 0,onSelect:t=>{t&&(r("insurance_expiration_date",x(t,"yyyy-MM-dd")),m("insurance_expiration_date",!1))},initialFocus:!0})})]}),a.insurance_expiration_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.insurance_expiration_date})]})]})}),e.jsx(te,{children:e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsx(p,{type:"button",variant:"outline",onClick:Q,className:"flex-1",children:"Cancel"}),e.jsx(p,{type:"submit",onClick:A,disabled:R,className:"flex-1",children:R?"Creating...":"Create Unit"})]})})]})})})}export{ke as default};
