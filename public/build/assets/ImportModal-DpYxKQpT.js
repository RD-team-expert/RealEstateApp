import{r as i,j as e}from"./app-mUrH0ynJ.js";import{B as c}from"./button-BFBNYzQ-.js";import{C,a as y,c as S,b as w}from"./card-D_RIkHPn.js";import{L as F}from"./label-DmNL2-zA.js";import{F as u}from"./file-spreadsheet-DX_zq0xC.js";import{X as B}from"./x-BVVw4O5L.js";import{U as p}from"./upload-DN0aTFGZ.js";import{L as D}from"./loader-circle-BjljqF34.js";import"./app-BxoA0TtB.js";import"./index-Co1yv0YL.js";import"./index-CdJFUDDL.js";import"./utils-CBfrqCZ4.js";import"./index-D9BBn6e9.js";import"./createLucideIcon-DUXn48BB.js";const K=({isOpen:d,onClose:f,onSubmit:j,isLoading:t})=>{const l=i.useRef(null),[r,o]=i.useState(null),[g,n]=i.useState(!1),m=s=>{s&&s.type==="text/csv"?o(s):alert("Please select a valid CSV file.")},N=s=>{const a=s.target.files?.[0];a&&m(a)},b=s=>{s.preventDefault(),n(!1);const a=s.dataTransfer.files[0];a&&m(a)},v=s=>{s.preventDefault(),r&&j(r)},x=()=>{o(null),n(!1),l.current&&(l.current.value="")},h=()=>{x(),f()};return i.useEffect(()=>{d||x()},[d]),d?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:e.jsxs(C,{className:"w-full max-w-md bg-background",children:[e.jsx(y,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5 text-primary"}),e.jsx(S,{children:"Import Units from CSV"})]}),e.jsx(c,{onClick:h,variant:"ghost",size:"sm",disabled:t,children:e.jsx(B,{className:"h-4 w-4"})})]})}),e.jsx(w,{children:e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"CSV File"}),e.jsxs("div",{className:`rounded-lg border-2 border-dashed p-6 text-center transition-colors ${g?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50"}`,onDrop:b,onDragOver:s=>{s.preventDefault(),n(!0)},onDragLeave:()=>n(!1),children:[r?e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{className:"mx-auto h-8 w-8 text-green-600"}),e.jsx("p",{className:"font-medium text-green-700",children:r.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(r.size/1024).toFixed(1)," KB"]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{className:"mx-auto h-8 w-8 text-muted-foreground"}),e.jsxs("p",{className:"text-muted-foreground",children:["Drop your CSV file here or"," ",e.jsx(c,{type:"button",variant:"link",className:"h-auto p-0 text-primary",onClick:()=>l.current?.click(),children:"browse files"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"CSV files only, max 10MB"})]}),e.jsx("input",{ref:l,type:"file",accept:".csv",onChange:N,className:"hidden",disabled:t})]})]}),e.jsxs("div",{className:"rounded-lg bg-muted/50 p-3",children:[e.jsx("h4",{className:"mb-2 text-sm font-medium",children:"Required CSV Columns"}),e.jsxs("ul",{className:"space-y-1 text-xs text-muted-foreground",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"PropertyName"})," - Name of the property"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"number"})," - Unit number/name"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"BedBath"}),' - Bedroom/bathroom info (e.g., "4 Bed/3.5 Bath")']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Residents"}),' - Tenant names or "VACANT"']}),e.jsxs("li",{children:[e.jsx("strong",{children:"LeaseStartRaw"})," - Lease start date"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"LeaseEndRaw"})," - Lease end date"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"rent"})," - Monthly rent amount"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"recurringCharges"})," - Recurring charges"]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(c,{type:"submit",disabled:!r||t,className:"flex-1",children:t?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"mr-2 h-4 w-4"}),"Import CSV"]})}),e.jsx(c,{type:"button",variant:"outline",onClick:h,disabled:t,children:"Cancel"})]})]})})]})}):null};export{K as default};
